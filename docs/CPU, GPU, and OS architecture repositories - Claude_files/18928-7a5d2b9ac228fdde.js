try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d9a6b455-8d33-4303-95b3-879099aeaf10",e._sentryDebugIdIdentifier="sentry-dbid-d9a6b455-8d33-4303-95b3-879099aeaf10")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18928],{0x1db5af03:(e,t,a)=>{a.d(t,{O:()=>o});let o=(0,a(0x394ef833).v)(e=>({serversNeedingWebsocketRetry:[],addServerNeedingWebsocketRetry:t=>e(e=>({serversNeedingWebsocketRetry:[...e.serversNeedingWebsocketRetry,t]})),clearServersNeedingWebsocketRetry:()=>e({serversNeedingWebsocketRetry:[]})}))},0xeac745ba:(e,t,a)=>{function o(e,t,a,o,r){var n,s,i,c;if(!a||!o)return;let l=null==(n=a.success)||n,u=null==(s=o.success)||s;if(l!==u)return void r({event_key:"mcp.shadow.comparison",server_uuid:e,capability:t,match:!1,websocket_count:a.count,bootstrap_count:o.count,websocket_duration_ms:a.duration_ms,bootstrap_duration_ms:o.duration_ms});if(!l&&!u)return;let d=null!=(i=a.count)?i:0,p=null!=(c=o.count)?c:0;(0!==d||0!==p)&&r({event_key:"mcp.shadow.comparison",server_uuid:e,capability:t,match:d===p,websocket_count:a.count,bootstrap_count:o.count,websocket_duration_ms:a.duration_ms,bootstrap_duration_ms:o.duration_ms})}function r(e,t,a,o){var r,n;(null==(r=a.success)||r)&&0!==(null!=(n=a.count)?n:0)&&o({event_key:"mcp.shadow.comparison",server_uuid:e,capability:t,match:!1,websocket_count:a.count,bootstrap_count:0,websocket_duration_ms:a.duration_ms})}a.d(t,{Z:()=>n});let n=(0,a(0x394ef833).v)((e,t)=>({toolsData:new Map,promptsData:new Map,resourcesData:new Map,trackFn:null,bootstrapFinished:!1,websocketStartTime:0,setTrackFn:(t,a)=>e({trackFn:t,websocketStartTime:a}),setBootstrapFinished:()=>{e({bootstrapFinished:!0});let a=t();if(a.trackFn){for(let[e,t]of a.toolsData.entries())t.websocket&&!t.bootstrap&&r(e,"tools",t.websocket,a.trackFn);for(let[e,t]of a.promptsData.entries())t.websocket&&!t.bootstrap&&r(e,"prompts",t.websocket,a.trackFn);for(let[e,t]of a.resourcesData.entries())t.websocket&&!t.bootstrap&&r(e,"resources",t.websocket,a.trackFn)}},recordWebsocketTools:(e,a)=>{let n=t(),s=n.toolsData.get(e)||{};!s.websocket&&(s.websocket=a,n.toolsData.set(e,s),n.trackFn&&(s.bootstrap?o(e,"tools",a,s.bootstrap,n.trackFn):n.bootstrapFinished&&r(e,"tools",a,n.trackFn)))},recordWebsocketPrompts:(e,a)=>{let n=t(),s=n.promptsData.get(e)||{};!s.websocket&&(s.websocket=a,n.promptsData.set(e,s),n.trackFn&&(s.bootstrap?o(e,"prompts",a,s.bootstrap,n.trackFn):n.bootstrapFinished&&r(e,"prompts",a,n.trackFn)))},recordWebsocketResources:(e,a)=>{let n=t(),s=n.resourcesData.get(e)||{};!s.websocket&&(s.websocket=a,n.resourcesData.set(e,s),n.trackFn&&(s.bootstrap?o(e,"resources",a,s.bootstrap,n.trackFn):n.bootstrapFinished&&r(e,"resources",a,n.trackFn)))},recordBootstrapTools:(e,a)=>{let r=t(),n=r.toolsData.get(e)||{};!n.bootstrap&&(n.bootstrap=a,r.toolsData.set(e,n),n.websocket&&r.trackFn&&o(e,"tools",n.websocket,a,r.trackFn))},recordBootstrapPrompts:(e,a)=>{let r=t(),n=r.promptsData.get(e)||{};!n.bootstrap&&(n.bootstrap=a,r.promptsData.set(e,n),n.websocket&&r.trackFn&&o(e,"prompts",n.websocket,a,r.trackFn))},recordBootstrapResources:(e,a)=>{let r=t(),n=r.resourcesData.get(e)||{};!n.bootstrap&&(n.bootstrap=a,r.resourcesData.set(e,n),n.websocket&&r.trackFn&&o(e,"resources",n.websocket,a,r.trackFn))}}))},0x14444ae89:(e,t,a)=>{a.d(t,{p:()=>m});var o=a(0xac309a83),r=a(0x1b813d90),n=a(0xfe0d571e),s=a(0x156c4e43b);let i=n.$L.f,c=s.Ik({field:s.k5(["custom_oauth_client_id","custom_oauth_client_secret","url"]),sourceUrl:s.Yj()}),l=s.Ik({uuid:s.Yj(),name:s.Yj(),oneLiner:s.Yj(),description:s.Yj(),iconUrl:s.Yj().optional(),toolNames:s.YO(s.Yj()),promptNames:s.YO(s.Yj()),license:s.Yj().optional(),version:s.Yj().optional(),author:s.Ik({name:s.Yj().optional(),url:s.Yj().optional()}).optional(),documentation:s.Yj().optional(),support:s.Yj().optional(),privacyPolicy:s.Yj().optional(),requiredFields:s.YO(c).optional()});l.and(s.Ik({type:s.k5(["firstParty"]),syncSourceType:s.k5([r.v8.GDRIVE,r.v8.GMAIL,r.v8.GCAL,r.v8.SLACK])}));let u=l.and(s.Ik({type:s.k5(["remote"]),isAuthless:s.zM()}).and(s.KC([s.Ik({url:s.Yj(),urlRegex:s.Vx()}),s.Ik({url:s.Vx(),urlRegex:s.Yj()})])));l.and(s.Ik({type:s.k5(["local"]),manifest:i,onDiskPath:s.Yj().optional(),downloadCount:s.ai().optional(),lifetimeDownloadCount:s.ai().optional(),isBlocklisted:s.zM().optional(),isInternal:s.zM().optional(),isAllowlisted:s.zM().optional()}));let d=s.YO(u);var p=a(0xd126dc1a);let m=()=>{let e=(0,o.T9)("mcp_directory_servers","servers",[],d),t=(0,o.T9)("conditional_mcp_directory_servers","servers",[],d),a=e.concat(t);return(0,p.f)(a)}},0x14c0dfde7:(e,t,a)=>{a.d(t,{u3:()=>b,oQ:()=>v,p9:()=>g});var o=a(0x14de19ae8),r=a(0x18e5c6e75),n=a(0xac309a83),s=a(0x253a5c787),i=a(0x1ea21c42d),c=a.n(i),l=a(0xfc89b4a4);function u(e){var t,a,o,r,n,s,i,c;return{name:e.name,description:null!=(t=e.description)?t:void 0,annotations:e.annotations?{title:null!=(a=e.annotations.title)?a:void 0,readOnlyHint:null!=(o=e.annotations.readOnlyHint)?o:void 0,destructiveHint:null!=(r=e.annotations.destructiveHint)?r:void 0,idempotentHint:null!=(n=e.annotations.idempotentHint)?n:void 0,openWorldHint:null!=(s=e.annotations.openWorldHint)?s:void 0}:void 0,inputSchema:{...e.inputSchema,properties:null!=(i=e.inputSchema.properties)?i:void 0,required:null!=(c=e.inputSchema.required)?c:void 0},displayName:e.displayName,enabledKey:e.enabled_key,alwaysApprovedKey:e.always_approved_key}}function d(e){var t,a,o,r;return{name:e.name,description:null!=(a=e.description)?a:void 0,title:null!=(o=e.title)?o:void 0,arguments:null==(t=e.arguments)?void 0:t.map(e=>{var t,a;return{name:e.name,description:null!=(t=e.description)?t:void 0,required:null!=(a=e.required)?a:void 0}}),_meta:null!=(r=e._meta)?r:void 0,displayName:e.displayName}}function p(e){var t,a,o,r,n,s;return{uri:e.uri,name:e.name,description:null!=(t=e.description)?t:void 0,title:null!=(a=e.title)?a:void 0,mimeType:null!=(o=e.mimeType)?o:void 0,size:null!=(r=e.size)?r:void 0,annotations:null!=(n=e.annotations)?n:void 0,_meta:null!=(s=e._meta)?s:void 0,displayName:e.displayName}}var m=a(0xe824fb1c),_=a(0x1db5af03),y=a(0xeac745ba);function b(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];a||(m.eZ.getState().setRemoteIsLoading(!0),_.O.getState().clearServersNeedingWebsocketRetry());let n=Date.now(),i=[],l=()=>{if(0!==i.length){for(let e of i){let s=m.eZ.getState(),i=Date.now()-n;if("server_base"!==e.type||a){if("tools"===e.type){let o=e.tools||[],n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(u)}(t?(0,r.M)(o):o);a?y.Z.getState().recordBootstrapTools(e.uuid,{count:n.length,duration_ms:i}):s.setRemoteTools(e.uuid,n)}else if("resources"===e.type){let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(p)}(e.resources);a?y.Z.getState().recordBootstrapResources(e.uuid,{count:t.length,duration_ms:i}):s.setRemoteResources(e.uuid,t)}else if("prompts"===e.type){let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(d)}(e.prompts);a?y.Z.getState().recordBootstrapPrompts(e.uuid,{count:t.length,duration_ms:i}):s.setRemotePrompts(e.uuid,t)}}else{let t={uuid:e.uuid,name:e.name,url:e.url,custom_oauth_client_id:e.custom_oauth_client_id,custom_oauth_client_secret:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_authenticated:e.usedAuthentication};e.connected&&(0,m.nd)(e.uuid)&&(0,m.s$)(e.uuid)&&((0,m.rD)(t),(0,m.I3)(t.uuid,t.url,o)),e.connected?(0,m.n3)(e.uuid,e.usedAuthentication):(_.O.getState().addServerNeedingWebsocketRetry(t),s.removeRemoteServer(e.uuid))}}i.length=0}},b=c()(l,300,{leading:!0,trailing:!0}),g=new EventSource("/api/organizations/".concat(e,"/mcp/v2/bootstrap"),{withCredentials:!0});return g.onerror=()=>{b.cancel(),l(),g.close(),a||(m.eZ.getState().setRemoteIsLoading(!1),_.O.getState().clearServersNeedingWebsocketRetry()),(0,s.Cp)(Error("MCP bootstrap stream error"),{tags:{action:"mcp_bootstrap_stream_error",only_shadow:a},extra:{orgUuid:e}})},g.addEventListener("server_list",t=>{try{let{servers:e}=JSON.parse(t.data);if(!a){for(let t of(m.eZ.getState().setRemoteIsLoading(!1),e))if((0,m.nd)(t.uuid)){let e={uuid:t.uuid,name:t.name,url:t.url,custom_oauth_client_id:null,custom_oauth_client_secret:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_authenticated:!1};(0,m.rD)(e),(0,m.I3)(e.uuid,e.url,o)}}}catch(a){(0,s.Cp)(a,{tags:{action:"mcp_bootstrap_stream_server_list_parse"},extra:{orgUuid:e,eventData:t.data}})}}),g.addEventListener("server_base",t=>{try{let e=JSON.parse(t.data);i.push({type:"server_base",...e}),b()}catch(a){(0,s.Cp)(a,{tags:{action:"mcp_bootstrap_stream_server_base_parse"},extra:{orgUuid:e,eventData:t.data}})}}),g.addEventListener("tools",t=>{try{let{server_uuid:e,tools:a}=JSON.parse(t.data);i.push({type:"tools",uuid:e,tools:a}),b()}catch(a){(0,s.Cp)(a,{tags:{action:"mcp_bootstrap_stream_tools_parse"},extra:{orgUuid:e,eventData:t.data}})}}),g.addEventListener("resources",t=>{try{let{server_uuid:e,resources:a}=JSON.parse(t.data);i.push({type:"resources",uuid:e,resources:a}),b()}catch(a){(0,s.Cp)(a,{tags:{action:"mcp_bootstrap_stream_resources_parse"},extra:{orgUuid:e,eventData:t.data}})}}),g.addEventListener("prompts",t=>{try{let{server_uuid:e,prompts:a}=JSON.parse(t.data);i.push({type:"prompts",uuid:e,prompts:a}),b()}catch(a){(0,s.Cp)(a,{tags:{action:"mcp_bootstrap_stream_prompts_parse"},extra:{orgUuid:e,eventData:t.data}})}}),g.addEventListener("completed",()=>{b.cancel(),l(),g.close(),a||m.eZ.getState().setRemoteIsLoading(!1),a&&y.Z.getState().setBootstrapFinished()}),()=>{b.cancel(),g.close()}}let g=()=>(0,n.fS)("mcp_tb_sessions");function v(e){let{activeOrganization:t}=(0,o.YL)(),a=null==t?void 0:t.uuid,r=(0,n.fS)("claude_ai_unicode_sanitize_mcp_data"),s=g(),i=(0,n.fS)("mcp_shadow_comparison");(0,l.useEffect)(()=>{if(a){if(i)return b(a,r,!0,e);else if(s)return b(a,r,!1,e)}},[s,a,r,i,e])}},0x1d302b010:(e,t,a)=>{a.d(t,{vW:()=>M,R4:()=>C,qb:()=>O,ll:()=>A,XT:()=>E,eB:()=>T,W3:()=>R,NW:()=>F,lu:()=>D,p4:()=>j});var o=a(0xf32c56dd),r=a(0x12c9046cd),n=a(0x14de19ae8),s=a(0x139b5e710),i=a(0x49fac030),c=a(0xac309a83),l=a(0x1b813d90),u=a(0x17e725145),d=a(0xfc89b4a4),p=a(0x156c4e43b),m=a(0x14c0dfde7),_=a(0x9cb4c2a2),y=a(0x1c12b3087),b=a(0x597e433e),g=a(0xe824fb1c);function v(e){let t=window.atob(e),a=new ArrayBuffer(t.length),o=new Uint8Array(a);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);return a}var f=a(0x1e48e639d),h=a(0x242b93f35);let k=h.Ay.object({uuid:h.Ay.string().uuid(),name:h.Ay.string(),url:h.Ay.string(),created_at:h.Ay.string().datetime(),updated_at:h.Ay.string().datetime(),custom_oauth_client_id:h.Ay.string().nullable().optional(),custom_oauth_client_secret:h.Ay.string().nullable().optional(),is_authenticated:h.Ay.boolean().default(!1)});var w=a(0x14444ae89),S=a(0x1e841cc7d),x=a(0x18175ce17);let D=()=>(0,c.fS)("papi_mcp"),F=()=>(0,c.fS)("claude_ai_mcp_directory_web_only"),Y=p.k5(["safe_for_phi"]),I=p.Ik({type:Y,content_hash:p.Yj()});function T(e,t){let a=D(),o=(0,m.p9)();return(0,r.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers"),{queryKey:[i.lA,e],enabled:!o&&a&&!!e,...t,select:e=>p.YO(k).parse(e)})}function E(e,t,a){return(0,r.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),{queryKey:[i.Sm,e,t],enabled:!!e&&!!t,...a,select:e=>k.parse(e)})}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,{track:n}=(0,o.st)(),s=(0,u.useQueryClient)(),l=(0,m.p9)(),d=(0,c.fS)("claude_ai_unicode_sanitize_mcp_data"),p=(0,w.p)();return(0,r.L2)("/api/organizations/".concat(e,"/mcp/remote_servers"),"POST",{...t,onSuccess:(o,r,c)=>{var u;l&&((0,g.rD)(o),"directory"===a.source&&(0,g.I3)(o.uuid,o.url,p),(0,m.u3)(e,d)),s.invalidateQueries({queryKey:[i.lA,e]}),s.invalidateQueries({queryKey:[i.qE,e]}),null==(u=t.onSuccess)||u.call(t,o,r,c),n({event_key:"claudeai.mcp.create_server",source:a.source,url:o.url,type:"remote"})}})}function A(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,u.useQueryClient)(),n=(0,m.p9)(),s=(0,c.fS)("claude_ai_unicode_sanitize_mcp_data");return(0,r.L2)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),"DELETE",{...a,onSuccess:(r,c,l)=>{var u;(0,g.eg)(t),n?(0,m.u3)(e,s):(o.setQueryData([i.lA,e],e=>{var a;return null!=(a=null==e?void 0:e.filter(e=>e.uuid!==t))?a:[]}),o.invalidateQueries({queryKey:[i.lA,e]})),o.invalidateQueries({queryKey:[i.qE,e]}),null==(u=a.onSuccess)||u.call(a,r,c,l)}})}function R(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,u.useQueryClient)(),n=(0,m.p9)(),s=(0,c.fS)("claude_ai_unicode_sanitize_mcp_data");return(0,r.L2)("/api/organizations/".concat(e,"/mcp/logout/").concat(t),"POST",{...a,onSettled:()=>{(0,g.Ug)(t)},onSuccess:(t,r,c)=>{var l;n?(0,m.u3)(e,s):o.invalidateQueries({queryKey:[i.lA,e]}),o.invalidateQueries({queryKey:[i.qE,e]}),null==(l=a.onSuccess)||l.call(a,t,r,c)}})}function j(e){let t=(0,m.p9)(),{activeOrganization:a}=(0,n.YL)(),o=null==a?void 0:a.uuid;return(0,r.L2)("/api/organizations/".concat(o,"/chat_conversations/").concat(e,"/tool_approval"),"POST",{enabled:!!e&&!!o&&t})}function C(){let{mutateAsync:e}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,m.p9)(),{activeOrganization:a}=(0,n.YL)(),o=null==a?void 0:a.uuid;return(0,r.L2)("/api/organizations/".concat(o,"/mcp/attach_resource"),"POST",{enabled:t&&!!o,...e})}(),t=N(),a=function(){let{setIsUploadingDriveSync:e}=(0,_.oM)(),{setSyncSourceUuids:t}=(0,y.Jy)(e=>({setSyncSourceUuids:e.setSyncSourceUuids})),a=(0,x.kO)(),o=(0,x.qi)(l.v8.GDRIVE),{addError:r}=(0,s.Y)(),{mutate:n}=(0,S.EF)({onMutate:()=>{e(!0)},onSuccess:a=>{t(e=>[...e,a.uuid]),e(!1)},onError:t=>{e(!1),r((0,f.J)(t),{error:t})},meta:{noToast:!0}});return(0,d.useCallback)(e=>{a&&o&&n({sync_source_type:l.v8.MCP_RESOURCES,sync_source_config:{server_uuid:o.uuid,resource:{...e}}})},[n,a,o])}(),{addError:i}=(0,s.Y)(),c=(0,m.p9)(),u=function(){let{addError:e}=(0,s.Y)(),{track:t}=(0,o.st)(),{handleUpload:a}=(0,_.oM)();return(0,d.useCallback)(async(o,r)=>{try{let e=(await (0,g.KU)(o).readResource({uri:r.uri},{timeout:15e3})).contents.map(e=>{let a;return"text"in e?(a=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(a=v(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([a],r.name,{type:e.mimeType})});e.length>0&&await a(e)}catch(t){e("Failed to upload resource. You can try again.",{error:t})}},[t,e,a])}(),{setIsUploadingDriveSync:p}=(0,_.oM)();return(0,d.useCallback)(async o=>{let{serverUuid:r,resource:n,onClose:s}=o;if(!c||(0,g.HG)(r,c))return u(r,n);{let o;try{let e=(0,g.KU)(r);o=await e.readResource({uri:n.uri},{timeout:15e3})}catch(e){}try{var l;p(!0);let i=await e({resource:n,server_uuid:r,result:o});(null==(l=n.mimeType)?void 0:l.startsWith("application/vnd.google-apps"))?a(n):t(i),p(!1),null==s||s()}catch(e){p(!1),i("Failed to attach resource. You can try again.",{error:e,errorContext:{tags:{action:"attach_resource"},extra:{serverUuid:r}}})}}},[c,u,p,e,a,t,i])}function M(e){let{mutateAsync:t}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,m.p9)(),{activeOrganization:a}=(0,n.YL)(),o=null==a?void 0:a.uuid;return(0,r.L2)("/api/organizations/".concat(o,"/mcp/attach_prompt"),"POST",{enabled:t&&!!o,...e})}(),a=N(),{addError:i}=(0,s.Y)(),c=(0,m.p9)(),l=function(e){let{track:t}=(0,o.st)(),{addError:a}=(0,s.Y)(),{handleUpload:r}=(0,_.oM)();return(0,d.useCallback)(async(o,n,s)=>{try{let a=await (0,g.KU)(o).getPrompt({name:n.name,arguments:s},{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(s).length,assistant_messages:a.messages.filter(e=>"assistant"===e.role).length,user_messages:a.messages.filter(e=>"user"===e.role).length,text_messages:a.messages.filter(e=>"text"===e.content.type).length,image_messages:a.messages.filter(e=>"image"===e.content.type).length});let i=(e,t)=>{let a=e=>{let t=b._F[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},o=e=>"".concat(n.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],o("txt"),{type:"text/plain"});case"image":{let t=a(e.content.mimeType);return new File([v(e.content.data)],o(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var r;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!=(r=t.mimeType)?r:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let o=a(t.mimeType);return new File([v(t.blob)],"".concat(t.uri,".").concat(o),{type:t.mimeType})}throw Error("Invalid resource content");case"audio":throw Error("Audio content not supported");case"resource_link":throw Error("Resource links are not supported")}};if(1===a.messages.length)await r([i(a.messages[0],0)]);else if(a.messages.length>1){let e=a.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[i(e,t)]:[]),t=a.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let a=JSON.stringify(t,null,2);e.push(new File([a],"".concat(n.name,"_messages.json"),{type:"application/json"}))}await r(e)}null==e||e()}catch(e){a("Failed to get prompt. You can try again.",{error:e})}},[t,a,r,e])}(e);return(0,d.useCallback)(async o=>{let{serverUuid:r,prompt:n,args:s}=o;if(!c||(0,g.HG)(r,c))return l(r,n,s);{let o;try{let e=(0,g.KU)(r);o=await e.getPrompt({name:n.name,arguments:s},{timeout:15e3})}catch(e){}try{let i=await t({prompt:n,arguments:s,server_uuid:r,result:o});a(i),null==e||e()}catch(e){i("Failed to attach prompt. You can try again.",{error:e,errorContext:{tags:{action:"attach_prompt"},extra:{serverUuid:r}}})}}},[t,a,i,e,c,l])}function N(){let{setAttachments:e,setFiles:t}=(0,y.Jy)(e=>({setAttachments:e.setAttachments,setFiles:e.setFiles}));return(0,d.useCallback)(a=>{let{files:o,attachments:r}=a;o&&o.length>0&&t(e=>{let t=new Set(e.map(e=>e.file_uuid));return[...e,...o.filter(e=>!t.has(e.file_uuid))]}),r&&r.length>0&&e(e=>Array.from(new Set([...e,...r].map(e=>JSON.stringify(e)))).map(e=>JSON.parse(e)))},[e,t])}p.Ik({name:p.Yj(),url:p.Yj(),custom_oauth_client_id:p.Yj().nullable().optional(),custom_oauth_client_secret:p.Yj().nullable().optional(),attestations:p.YO(I).nullable().optional()}),p.Ik({name:p.Yj().optional().nullable(),url:p.Yj().optional().nullable()})},0x1e48e639d:(e,t,a)=>{a.d(t,{J:()=>r});var o=a(0x1016c6ed2);function r(e){let t="Unable to add Google Doc.";return e instanceof o.LG&&"access_denied"===e.errorCode?t+=" Please check that link is a valid Google Doc that you have access to.":t+=" "+e.message,t}}}]);
try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="8e62b619-967b-404e-823f-510789ed92ac",e._sentryDebugIdIdentifier="sentry-dbid-8e62b619-967b-404e-823f-510789ed92ac")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12693],{0x10574409:(e,a,l)=>{l.d(a,{w:()=>n});var t=l(0xfc89b4a4);let n=(e,a,l,n)=>(0,t.useMemo)(()=>{{let e=getComputedStyle(document.body);return"hsl(".concat(e.getPropertyValue("--".concat(n)),")")}},[l,n,a,e])},0x865ff458:(e,a,l)=>{l.d(a,{Hc:()=>b,XK:()=>h,Zl:()=>f,hz:()=>m,y_:()=>y});var t=l(0x12c9046cd),n=l(0x24553dffe),r=l(0x139b5e710),o=l(0x20e00cddd),i=l(0x49fac030),u=l(0xac309a83),s=l(0xfc89b4a4),d=l(0x1ab0d1ca1),c=l(0x156c4e43b),p=l(0x19572a4ef);function m(){var e;let a=(0,n.l)(),l=null!=(e=a.get(o.eT.PROMOTION))?e:null;return{data:(0,p.lx)(l),mutate:(0,s.useCallback)(e=>{a.set(o.eT.PROMOTION,JSON.stringify(e),{maxAgeSeconds:7776e3})},[a]),delete:(0,s.useCallback)(()=>{a.delete(o.eT.PROMOTION)},[a])}}function b(){var e,a,l;let{data:n}=m(),r=(a=null!=(e=null==n?void 0:n.promotionId)?e:null,l=e=>(0,p.IQ)(e,n),(0,t.Sk)("/api/billing/promotion/".concat(a),{queryKey:[i.t6,a],enabled:!!a,meta:{noToast:!0}},e=>(e.promotionId=a,l)?l(e):e));return{...r,isPending:r.isPending&&!!(null==n?void 0:n.promotionId)}}function h(){let{data:e,mutate:a}=m();(0,s.useEffect)(()=>{(null==e?void 0:e.needsCheckout)&&(e.needsCheckout=void 0,a(e))},[e,a])}function y(e){let{data:a,mutate:l}=m(),t=null==a?void 0:a.promotionId,n=(0,u.T9)("claude_ai_targeted_promotion","promotionId",null,c.Yj().nullable());return(0,s.useEffect)(()=>{!t&&n&&l({promotionId:n})},[t,n,l]),!!e&&!!(null==a?void 0:a.needsCheckout)&&!!(null==a?void 0:a.promotionId)}let f=()=>{let e=(0,s.useRef)(!1),a=(0,r.Y)(),l=(0,d.A)(),{delete:t}=m();return(0,s.useCallback)(n=>{(null==n?void 0:n.offerError)&&!e.current&&(e.current=!0,a.addError(l.formatMessage({defaultMessage:"This promotion is not available for your account",id:"Vu9kt6ezVH"}),{error:Error(n.offerError),messageForLogging:"This promotion is not available for your account"}),t())},[a,t,l])}},0x8b87af3b:(e,a,l)=>{l.d(a,{b:()=>n});let t=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK"],n=e=>t.includes(e.toUpperCase())||"GB"===e.toUpperCase()},0x12913aebd:(e,a,l)=>{l.d(a,{ThemeProvider:()=>d,D:()=>h});var t=l(0x22102fd88),n=l(0x24553dffe),r=l(0xb804d868),o=l(0x20e00cddd),i=l(0xfc89b4a4);let u="(prefers-color-scheme: dark)",s=(0,i.createContext)(void 0);function d(e){let{initialTheme:a,children:l}=e,[o,d]=(0,i.useState)(a),m=(0,n.l)(),[h,y]=(0,i.useState)(!1);(0,i.useEffect)(()=>{y(!0)},[]);let[f,g]=(0,r.Vc)("userThemeMode","auto"),[_,x]=(0,i.useState)(b(f));(0,i.useEffect)(()=>{x(b(f))},[f]),(0,i.useEffect)(()=>c(o),[o]),(0,i.useEffect)(()=>p(f,m),[m,f]);let v=(0,i.useCallback)(()=>{p(f,m),x(b(f))},[m,f]);return(0,i.useEffect)(()=>{if("auto"!==f)return;let e=window.matchMedia(u);return e.addEventListener("change",v),()=>e.removeEventListener("change",v)},[f,v]),(0,i.useEffect)(()=>{var e,a;null==(a=window.electronWindowControl)||null==(e=a.setThemeMode)||e.call(a,"auto"===f?"system":f)},[f]),(0,t.jsx)(s.Provider,{value:{theme:o,mode:f,setMode:g,setTheme:d,resolvedMode:_,mounted:h},children:l})}let c=e=>{"undefined"!=typeof document&&(document.documentElement.dataset.theme=e,m())},p=(e,a)=>{if("undefined"==typeof document)return;let l=b(e);a.set(o.eT.COLOR_MODE,l),document.documentElement.dataset.mode=l,m()},m=()=>{let[e,a,l]=getComputedStyle(document.documentElement).getPropertyValue("--bg-200").split(" "),t="hsl(".concat(e,",").concat(a,",").concat(l,")"),n=document.querySelector('meta[name="theme-color"]');n||((n=document.createElement("meta")).setAttribute("name","theme-color"),document.head.appendChild(n)),n.setAttribute("content",t)},b=e=>{var a;return"auto"!==e?"auto"===e?"light":e:(null==(a=window)?void 0:a.matchMedia(u).matches)?"dark":"light"},h=()=>{let e=(0,i.useContext)(s);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},0x147f75547:(e,a,l)=>{l.d(a,{n:()=>V});var t=l(0x22102fd88),n=l(0x24553dffe),r=l(0x1bdad8807),o=l(0x14023fbb8),i=l(0x10574409),u=l(0x12913aebd),s=l(0x20e00cddd),d=l(0x1f0218c95),c=l(0x1a1f6dda6),p=l(0xfc89b4a4),m=l(0x1ab0d1ca1),b=l(0xf32c56dd),h=l(0x14de19ae8),y=l(0x865ff458),f=l(0x215f3d6df),g=l(0x225bae024),_=l(0x6fe0a7f6),x=l(0xdc8aa2c8),v=l(0x5878331c),T=l.n(v);let k=[{key:"ad_nrt",label:"Andorran NRT number",countries:["AD"],placeholder:"A-123456-Z"},{key:"ar_cuit",label:"Argentinian tax ID number",countries:["AR"],placeholder:"12-3456789-01"},{key:"au_abn",label:"Australian Business Number (AU ABN)",countries:["AU"],placeholder:"12345678912"},{key:"au_arn",label:"Australian Taxation Office Reference Number",countries:["AU"],placeholder:"123456789123"},{key:"eu_vat",label:"European VAT number",countries:["AT"],placeholder:"ATU12345678"},{key:"eu_vat",label:"European VAT number",countries:["BE"],placeholder:"BE0123456789"},{key:"bo_tin",label:"Bolivian tax ID",countries:["BO"],placeholder:"123456789"},{key:"br_cnpj",label:"Brazilian CNPJ number",countries:["BR"],placeholder:"01.234.456/5432-10"},{key:"br_cpf",label:"Brazilian CPF number",countries:["BR"],placeholder:"123.456.789-87"},{key:"bg_uic",label:"Bulgaria Unified Identification Code",countries:["BG"],placeholder:"123456789"},{key:"eu_vat",label:"European VAT number",countries:["BG"],placeholder:"BG0123456789"},{key:"ca_bn",label:"Canadian BN",countries:["CA"],placeholder:"123456789"},{key:"ca_gst_hst",label:"Canadian GST/HST number",countries:["CA"],placeholder:"123456789RT0002"},{key:"ca_pst_bc",label:"Canadian PST number (BC)",countries:["CA"],placeholder:"PST-1234-5678"},{key:"ca_pst_mb",label:"Canadian PST number (MB)",countries:["CA"],placeholder:"123456-7"},{key:"ca_pst_sk",label:"Canadian PST number (SK)",countries:["CA"],placeholder:"1234567"},{key:"ca_qst",label:"Canadian QST number (Qu\xe9bec)",countries:["CA"],placeholder:"1234567890TQ1234"},{key:"cl_tin",label:"Chilean TIN",countries:["CL"],placeholder:"12.345.678-K"},{key:"cn_tin",label:"Chinese tax ID",countries:["CN"],placeholder:"123456789012345678"},{key:"co_nit",label:"Colombian NIT number",countries:["CO"],placeholder:"123.456.789-0"},{key:"cr_tin",label:"Costa Rican tax ID",countries:["CR"],placeholder:"1-234-567890"},{key:"eu_vat",label:"European VAT number",countries:["HR"],placeholder:"HR12345678912"},{key:"eu_vat",label:"European VAT number",countries:["CY"],placeholder:"CY12345678Z"},{key:"eu_vat",label:"European VAT number",countries:["CZ"],placeholder:"CZ1234567890"},{key:"eu_vat",label:"European VAT number",countries:["DK"],placeholder:"DK12345678"},{key:"do_rcn",label:"Dominican RCN number",countries:["DO"],placeholder:"123-4567890-1"},{key:"ec_ruc",label:"Ecuadorian RUC number",countries:["EC"],placeholder:"1234567890001"},{key:"eg_tin",label:"Egyptian TIN",countries:["EG"],placeholder:"123456789"},{key:"sv_nit",label:"El Salvadorian NIT number",countries:["SV"],placeholder:"1234-567890-123-4"},{key:"eu_vat",label:"European VAT number",countries:["EE"],placeholder:"EE123456789"},{key:"eu_oss_vat",label:"European One Stop Shop VAT number",countries:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"],placeholder:"EU123456789",last:!0},{key:"eu_vat",label:"European VAT number",countries:["FI"],placeholder:"FI12345678"},{key:"eu_vat",label:"European VAT number",countries:["FR"],placeholder:"FRAB123456789"},{key:"ge_vat",label:"Georgian VAT",countries:["GE"],placeholder:"123456789"},{key:"eu_vat",label:"European VAT number",countries:["DE"],placeholder:"DE123456789"},{key:"eu_vat",label:"European VAT number",countries:["GR"],placeholder:"EL123456789"},{key:"hk_br",label:"Hong Kong BR number",countries:["HK"],placeholder:"12345678"},{key:"eu_vat",label:"European VAT number",countries:["HU"],placeholder:"HU12345678"},{key:"hu_tin",label:"Hungary tax number (ad\xf3sz\xe1m)",countries:["HU"],placeholder:"12345678-1-23"},{key:"is_vat",label:"Icelandic VAT",countries:["IS"],placeholder:"123456"},{key:"in_gst",label:"Indian GST number",countries:["IN"],placeholder:"12ABCDE3456FGZH"},{key:"id_npwp",label:"Indonesian NPWP number",countries:["ID"],placeholder:"12.345.678.9-012.345"},{key:"eu_vat",label:"European VAT number",countries:["IE"],placeholder:"IE1234567AB"},{key:"il_vat",label:"Israel VAT",countries:["IL"],placeholder:"000012345"},{key:"eu_vat",label:"European VAT number",countries:["IT"],placeholder:"IT12345678912"},{key:"jp_cn",label:"Japanese Corporate Number",countries:["JP"],placeholder:"1234567891234"},{key:"jp_rn",label:"Japanese Registered Foreign Businesses’ Registration Number",countries:["JP"],placeholder:"12345"},{key:"jp_trn",label:"Japanese Tax Registration Number",countries:["JP"],placeholder:"T1234567891234"},{key:"ke_pin",label:"KRA PIN",countries:["KE"],placeholder:"P000111111A"},{key:"eu_vat",label:"European VAT number",countries:["LV"],placeholder:"LV12345678912"},{key:"li_uid",label:"Liechtensteinian UID number",countries:["LI"],placeholder:"CHE123456789"},{key:"eu_vat",label:"European VAT number",countries:["LT"],placeholder:"LT123456789123"},{key:"eu_vat",label:"European VAT number",countries:["LU"],placeholder:"LU12345678"},{key:"my_frp",label:"Malaysian FRP number",countries:["MY"],placeholder:"12345678"},{key:"my_itn",label:"Malaysian ITN",countries:["MY"],placeholder:"C 1234567890"},{key:"my_sst",label:"Malaysian SST number",countries:["MY"],placeholder:"A12-3456-78912345"},{key:"eu_vat",label:"European VAT number",countries:["MT"],placeholder:"MT12345678"},{key:"mx_rfc",label:"Mexican RFC number",countries:["MX"],placeholder:"ABC010203AB9"},{key:"eu_vat",label:"European VAT number",countries:["NL"],placeholder:"NL123456789B12"},{key:"nz_gst",label:"New Zealand GST number",countries:["NZ"],placeholder:"123456789"},{key:"no_vat",label:"Norwegian VAT number",countries:["NO"],placeholder:"123456789MVA"},{key:"no_voec",label:"Norwegian VAT on e-commerce number",countries:["NO"],placeholder:"1234567"},{key:"pe_ruc",label:"Peruvian RUC number",countries:["PE"],placeholder:"12345678901"},{key:"ph_tin",label:"Philippines Tax Identification Number",countries:["PH"],placeholder:"123456789012"},{key:"eu_vat",label:"European VAT number",countries:["PL"],placeholder:"PL1234567890"},{key:"eu_vat",label:"European VAT number",countries:["PT"],placeholder:"PT123456789"},{key:"eu_vat",label:"European VAT number",countries:["RO"],placeholder:"RO1234567891"},{key:"ro_tin",label:"Romanian tax ID number",countries:["RO"],placeholder:"1234567890123"},{key:"ru_inn",label:"Russian INN",countries:["RU"],placeholder:"1234567891"},{key:"ru_kpp",label:"Russian KPP",countries:["RU"],placeholder:"123456789"},{key:"sa_vat",label:"Saudi Arabia VAT",countries:["SA"],placeholder:"123456789012345"},{key:"rs_pib",label:"Serbian PIB number",countries:["RS"],placeholder:"123456789"},{key:"sg_gst",label:"Singaporean GST",countries:["SG"],placeholder:"M12345678X"},{key:"sg_uen",label:"Singaporean UEN",countries:["SG"],placeholder:"123456789F"},{key:"eu_vat",label:"European VAT number",countries:["SK"],placeholder:"SK1234567891"},{key:"eu_vat",label:"European VAT number",countries:["SI"],placeholder:"SI12345678"},{key:"si_tin",label:"Slovenia tax number (davčna številka)",countries:["SI"],placeholder:"12345678"},{key:"za_vat",label:"South African VAT number",countries:["ZA"],placeholder:"4123456789"},{key:"kr_brn",label:"Korean BRN",countries:["KR"],placeholder:"123-45-67890"},{key:"es_cif",label:"Spanish NIF number",countries:["ES"],placeholder:"A12345678"},{key:"eu_vat",label:"European VAT number",countries:["ES"],placeholder:"ESA1234567Z"},{key:"eu_vat",label:"European VAT number",countries:["SE"],placeholder:"SE123456789123"},{key:"ch_vat",label:"Switzerland VAT number",countries:["CH"],placeholder:"CHE-123.456.789 MWST"},{key:"tw_vat",label:"Taiwanese VAT",countries:["TW"],placeholder:"12345678"},{key:"th_vat",label:"Thai VAT",countries:["TH"],placeholder:"1234567891234"},{key:"tr_tin",label:"Turkish Tax Identification Number",countries:["TR"],placeholder:"0123456789"},{key:"ua_vat",label:"Ukrainian VAT",countries:["UA"],placeholder:"123456789"},{key:"ae_trn",label:"United Arab Emirates TRN",countries:["AE"],placeholder:"123456789012345"},{key:"eu_vat",label:"Northern Ireland VAT number",countries:["XI"],placeholder:"XI123456789"},{key:"gb_vat",label:"United Kingdom VAT number",countries:["GB"],placeholder:"GB123456789"},{key:"uy_ruc",label:"Uruguayan RUC number",countries:["UY"],placeholder:"123456789012"},{key:"ve_rif",label:"Venezuelan RIF number",countries:["VE"],placeholder:"A-12345678-9"},{key:"vn_tin",label:"Vietnamese tax ID number",countries:["VN"],placeholder:"1234567890"}],A=e=>{let{title:a,subtitle:l,countryCode:n,className:r,inputClassName:o,textClassName:i,taxIdType:u,onTaxIdTypeChange:s,taxId:d,onTaxIdChange:m,size:b,autoSelectFirst:h=!1,disabled:y}=e,f=(0,p.useMemo)(()=>{let e={};return k.forEach(a=>{a.countries.forEach(l=>{l in e?e[l].push(a):e[l]=[a]})}),e},[]),g=(0,p.useMemo)(()=>n&&T().sortBy(f[n],e=>e.last?2:1,e=>e.label)||[],[n,f]),v=(0,p.useMemo)(()=>Object.fromEntries(g.map(e=>[e.key,e])),[g]),A=(0,p.useMemo)(()=>u?v[u]:null,[v,u]),E=g.length>0;return(0,p.useEffect)(()=>{n&&0===g.length&&(s(void 0),m("")),(1===g.length||g.length>0&&h)&&s(g[0].key)},[g,n,m,s,h]),(0,t.jsx)("div",{hidden:!E,children:(0,t.jsxs)("div",{className:(0,c.A)(r,i,"flex flex-col"),children:[(0,t.jsx)("div",{className:(0,c.A)("text-text-100 text-sm",i),children:a}),l&&(0,t.jsx)("div",{className:"text-text-400 text-xs",children:l}),(0,t.jsxs)("div",{className:"mt-2 inline-flex w-full flex-wrap items-center gap-2",children:[1===g.length?(0,t.jsx)("label",{htmlFor:"tax-id-text",className:"text-sm",children:g[0].label}):(0,t.jsx)(x.g,{disabled:!E||y,options:g,placeholder:"Select tax ID type",selected:A,onSelect:e=>{s(e.key),m("")},className:(0,c.A)("min-w-[12rem]",o),textClassName:i,size:b,type:"primary"}),(0,t.jsx)(_.ks,{value:d,id:"tax-id-text",disabled:y,hidden:!A,placeholder:null==A?void 0:A.placeholder,onValueChange:e=>m(e||""),className:(0,c.A)("border-border-200 hover:border-border-100 w-48 border",o),type:"text",size:"md"===b?"default":b})]})]})})};var E=l(0x38e6572),I=l(0x23e1b1f63),S=l(0x4339cba),C=l(0x1ff5b1833),M=l(0xb323e954);function N(e){let{taxId:a,taxIdType:l,isChecked:n,onCheck:r}=e,o=(0,m.A)();return"au_abn"===l&&a.length>0?(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(M.S,{checked:n,onChange:r,label:o.formatMessage({id:"efQ78fRCLf",defaultMessage:"My business is registered for GST and the ABN number I have provided is valid."})})}):null}function P(e){let{onReady:a,onCancel:l,defaultCountry:n,defaultName:r,setAddress:o,setTaxParams:i,onBillingCountryChange:u,onBillingNameChange:s,action:_,children:x,returnPath:v,onPaymentMethodUpdated:T,legalAccepted:k,...S}=e,M=(0,m.A)(),P=(0,b.st)(),V=(0,d.useStripe)(),R=(0,d.useElements)(),{account:j}=(0,h.YL)(),{data:L}=(0,y.Hc)(),{supportedRegions:B}=(0,f.D)("claude-ai"),D=(0,p.useMemo)(()=>B.filter(e=>e.stripe_address_supported).map(e=>e.code),[B]),[U,O]=(0,p.useState)("claude-ai"===S.product?S.companyName:void 0),z=(0,p.useMemo)(()=>"claude-ai"===S.product?{...S,companyName:U}:S,[S,U]),[F,H]=(0,p.useState)(null),[G,K]=(0,p.useState)(!1),[Y,Z]=(0,p.useState)(!1),[J,W]=(0,p.useState)(null),[Q,X]=(0,p.useState)(""),[q,$]=(0,p.useState)(),[ee,ea]=(0,p.useState)(!1),el=(0,p.useMemo)(()=>""!==Q&&q?{type:q,value:Q}:void 0,[Q,q]);(0,p.useEffect)(()=>{null==i||i(el)},[el,i]);let et=w(K,z),{mutateAsync:en,error:er}=(0,I.uS)();(0,p.useEffect)(()=>{er&&H(er.message)},[er]);let eo=(e,a)=>{let l=new URL(e.toString());a&&(l.pathname+="/".concat(a));let t=new URLSearchParams(l.search);return t.set("action","subscribe"),t.set("redirect_status","succeeded"),"claude-ai"===z.product&&z.plan&&t.set("plan",z.plan),l.search=t.toString(),l},ei=async()=>{let e;if(G||!V||!R)return;let a=R.getElement("address");if(!a)return;K(!0);let l=new URL(window.location.origin),t=v.split("?");l.pathname=t[0];let n=new URLSearchParams(t[1]||"");n.set("action",_),"claude-ai"===z.product&&z.plan&&n.set("plan",z.plan),l.search=n.toString();let r="claude-ai"===z.product?z.plan:"team";if("subscribe"===_){P.track({event_key:"claudeai.pricing.payment_form_submitted",plan_type:r,billing_interval:z.billingInterval,has_promo:!!L,promo_code:(null==L?void 0:L.proMonthlyPromoCode)||(null==L?void 0:L.proAnnualPromoCode),has_tax_id:!!Q});let t=await R.submit();if(t.error)e=t.error;else{let t=(await a.getValue()).value.address,n={line1:t.line1,city:t.city,country:t.country,region:t.state,postalCode:t.postal_code,tax_id:el,billingInterval:z.billingInterval},r=await et(n),i=r.clientSecret;if("setupIntentId"in r&&r.setupIntentId&&!r.organization_id){var o;let a=await V.confirmSetup({elements:R,clientSecret:i,redirect:"if_required",confirmParams:{return_url:l.toString()}});if(a.error||(null==(o=a.setupIntent)?void 0:o.status)!=="succeeded")e=a.error;else{let t={...n,verified_setup_intent_id:a.setupIntent.id,company_name:U,plan:"claude-ai"===z.product?z.plan:void 0};try{let a=await et(t);if(a.clientSecret&&!a.isPendingSetupIntent){let t=eo(l,a.organization_id);e=(await V.confirmPayment({elements:R,clientSecret:a.clientSecret,confirmParams:{return_url:t.toString()}})).error}else{let e=eo(l,a.organization_id);window.location.href=e.toString()}}catch(e){H((e instanceof Error?e.message:void 0)||M.formatMessage({defaultMessage:"Failed to create subscription. Please try again.",id:"2cTonaP1h4"})),K(!1);return}}}else{r.organization_id&&(l.pathname+="/".concat(r.organization_id));let a={elements:R,clientSecret:i,confirmParams:{return_url:l.toString()}};e=(r.isPendingSetupIntent?await V.confirmSetup(a):await V.confirmPayment(a)).error}}(null==e?void 0:e.message)&&"validation_error"!==e.type&&(H(e.message),P.track({event_key:"claudeai.pricing.payment_failed",error_type:e.type,error_code:e.code,error_message:e.message,action:"update_payment_method",plan_type:r,billing_interval:z.billingInterval})),K(!1)}else{let{error:e}=await V.confirmSetup({elements:R,redirect:"if_required",confirmParams:{return_url:l.toString()}});if(e)e.message&&"validation_error"!==e.type&&H(e.message),e.type&&"validation_error"!==e.type&&P.track({event_key:"claudeai.pricing.payment_failed",error_type:e.type,error_code:e.code,error_message:e.message,action:"update_payment_method",plan_type:r,billing_interval:z.billingInterval});else try{await en({tax_id:el,remove_tax_id:!el,company_name:U}),T&&T()}catch(e){H((e instanceof Error?e.message:void 0)||M.formatMessage({defaultMessage:"Failed to update tax information. Please try again.",id:"o7RpaY2p01"}))}K(!1)}};(0,p.useEffect)(()=>{let e=null==R?void 0:R.getElement("address");if(!e)return;let a=e=>{let a=e.value.address;W(a),null==o||o({line1:a.line1,city:a.city,country:a.country,region:a.state,postalCode:a.postal_code,billingInterval:z.billingInterval}),e.value.name&&(O(e.value.name),null==s||s(e.value.name))};return e.on("change",a),()=>{e.off("change",a)}},[R,o,z.billingInterval,s]);let eu="subscribe"===_?(0,C.QS)(null==J?void 0:J.country):(0,t.jsx)(E.A,{defaultMessage:"Update",id:"BWpuKlRSA1"});return(0,t.jsxs)("form",{id:"payment-form",onSubmit:e=>{e.preventDefault(),G||ei()},className:(0,c.A)("subscribe"===_&&"p-5 bg-bg-100 border-0.5 border-border-400 rounded-md text-text-200"),children:[(0,t.jsx)("div",{className:"text-text-000 text-base font-medium mb-4",children:(0,t.jsx)(E.A,{defaultMessage:"Payment method",id:"BVTni9A2ca"})}),(0,t.jsx)(d.AddressElement,{options:{mode:"billing",allowedCountries:D,defaultValues:{name:null!=r?r:null==j?void 0:j.full_name,address:n?{country:n}:void 0}},onChange:e=>{let a=e.value.address.country;a!==(null==J?void 0:J.country)&&($(void 0),X(""),null==u||u(a))}}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(d.PaymentElement,{id:"payment-element",options:{readOnly:G,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==j?void 0:j.email_address,name:null==j?void 0:j.full_name}}},onReady:()=>{Z(!0),a&&a()}})}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(A,{title:M.formatMessage({id:"Da5iekR76B",defaultMessage:"Business tax ID (Optional)"}),subtitle:M.formatMessage({id:"KpCyzHnEGv",defaultMessage:"If you provide a tax ID, the “Full name” above should be your business’s name."}),countryCode:null==J?void 0:J.country,taxId:Q,onTaxIdChange:e=>{X(e),ea(!1)},taxIdType:q,onTaxIdTypeChange:e=>{$(e),ea(!1)},inputClassName:"text-md rounded-md flex-grow",textClassName:"font-system text-md",size:"lg"}),(0,t.jsx)(N,{taxId:Q,taxIdType:q,isChecked:ee,onCheck:ea})]}),F&&(0,t.jsx)("div",{className:"text-danger-000 mt-4",id:"payment-message",children:F}),(0,t.jsxs)("div",{className:"mt-5 flex flex-row flex-wrap items-center justify-end gap-3",children:[x,l&&(0,t.jsx)(g.$,{variant:"secondary",size:"default",onClick:l,children:(0,t.jsx)(E.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,t.jsx)(g.$,{type:"submit",loading:G,variant:"primary",className:"subscribe"===_?"py-3 w-full":"",size:"subscribe"===_?"lg":"default",disabled:G||!Y||"au_abn"===q&&Q.length>0&&!ee||"subscribe"===_&&!1===k,children:eu})]})]})}let w=(e,a)=>{var l,t;let{mutateAsync:n}=(0,I.Xt)(),{mutateAsync:r}=(0,I.PQ)(),{mutateAsync:o}=(0,I.Nb)(),i="claude-ai"===a.product&&(null==(l=a.trialInfo)?void 0:l.available)===!0&&(null==(t=a.trialInfo)?void 0:t.requires_payment_upfront)===!0,{mutateAsync:u}=(0,I.cR)(),{data:s}=(0,I.jN)(),{data:d}=(0,y.Hc)(),c=(null==s?void 0:s.status)==="trialing"&&!(null==s?void 0:s.payment_method);return(0,p.useCallback)(l=>{if("raven"===a.product)return n({...l,organization_name:a.organizationName,members:a.members.filter(e=>e.includes("@")),billingInterval:a.billingInterval},{onError:()=>{e(!1)}});if(c&&!a.plan)return u({billing_interval:a.billingInterval},{onError:()=>{e(!1)}}).then(e=>({clientSecret:e.clientSecret||"",isPendingSetupIntent:!0,organization_id:void 0}));let t=a.promoCode;!t&&(a.billingInterval===S.NW.MONTHLY?a.plan&&a.plan===S.un.FIVE_X&&(null==d?void 0:d.max5xMonthlyPromoCode)?t=null==d?void 0:d.max5xMonthlyPromoCode:a.plan===S.un.TWENTY_X&&(null==d?void 0:d.max20xMonthlyPromoCode)?t=null==d?void 0:d.max20xMonthlyPromoCode:(null==d?void 0:d.proMonthlyPromoCode)&&(t=d.proMonthlyPromoCode):a.billingInterval===S.NW.YEARLY&&(null==d?void 0:d.proAnnualPromoCode)&&(t=d.proAnnualPromoCode));let s="verified_setup_intent_id"in l&&l.verified_setup_intent_id;return i&&!s?o({...l,company_name:a.companyName,billingInterval:a.billingInterval,promoCode:t,plan:a.plan||"pro"}).catch(()=>{throw e(!1),Error("Failed to create payment verification")}):r({...l,company_name:a.companyName,billingInterval:a.billingInterval,promoCode:t,plan:a.plan},{onError:()=>{e(!1)}})},[a,n,r,o,u,e,d,c,i])};function V(e){let a,{defaultCountry:l,isLoading:o=!1,amount:b,currency:h,setAddress:y,setTaxParams:f,action:g,children:_,className:x,returnPath:v,onCancel:T,onPaymentMethodUpdated:k,legalAccepted:A,...E}=e,I=(0,m.A)(),[S,C]=(0,p.useState)(!0),{theme:M,mode:N}=(0,u.D)(),w=(0,n.l)(),[V,j]=(0,p.useState)(l),[L,B]=(0,p.useState)(),D=(0,r.Ak)(V),U=(0,r.Ri)("update"===g,V,D),O="subscribe"===g?D:(null==U?void 0:U.entity)||D,z=(0,r.ib)(O);(0,p.useEffect)(()=>{C(!0)},[O]);let F=w.get(s.eT.COLOR_MODE),H={loader:"never",appearance:{theme:"stripe",variables:{fontSizeBase:"16px",colorBackground:(0,i.w)(M,N,F,"bg-000"),colorText:(0,i.w)(M,N,F,"text-100")}},locale:(0,r.bN)(I.locale)},G=!0;return"subscribe"===g?a={mode:"subscription",amount:b,currency:null==h?void 0:h.toLowerCase(),payment_method_types:["card","link"],...H}:(G=!!U,a={clientSecret:null==U?void 0:U.clientSecret,...H}),(0,t.jsxs)("div",{className:(0,c.A)("relative",x),style:{minHeight:"460px"},children:[G&&!o&&(0,t.jsx)("div",{className:(0,c.A)("w-full pt-1 transition-opacity duration-1000",{"opacity-0":S||o}),children:(0,t.jsx)(d.Elements,{options:a,stripe:z,children:(0,t.jsx)(P,{onReady:()=>C(!1),defaultCountry:V,defaultName:L,setAddress:y,setTaxParams:f,onBillingCountryChange:j,onBillingNameChange:B,action:g,returnPath:v,onCancel:T,onPaymentMethodUpdated:k,legalAccepted:A,...E,children:_})},O)}),(S||o)&&(0,t.jsx)(R,{})]})}let R=()=>(0,t.jsx)("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:(0,t.jsx)(o.Loading,{})})},0x19572a4ef:(e,a,l)=>{l.d(a,{IQ:()=>r,Jd:()=>t,lx:()=>n});let t=["proMonthlyPromoCode","proAnnualPromoCode","welcomeMessageTitle","utmParams","max5xMonthlyPromoCode","max20xMonthlyPromoCode"],n=e=>{if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},r=(e,a)=>(null==a?void 0:a.overrides)?{...e,...a.overrides}:e},0x1ff5b1833:(e,a,l)=>{l.d(a,{CB:()=>u,He:()=>s,Hm:()=>d,QS:()=>c});var t=l(0x22102fd88),n=l(0x38e6572),r=l(0x4339cba),o=l(0x8b87af3b),i=l(0x132beb2b5);let u=e=>{switch(e){case"free":return(0,t.jsx)(i.QD,{size:"small"});case"claude_pro":return(0,t.jsx)(i.sA,{size:"small"});case"claude_max":return(0,t.jsx)(i.zD,{size:"small"})}},s=(e,a)=>{switch(e){case"raven":return a?(0,t.jsx)(n.A,{defaultMessage:"Enterprise plan",id:"0g7deXDj3b"}):(0,t.jsx)(n.A,{defaultMessage:"Team plan",id:"idguOo+PzU"});case"free":return(0,t.jsx)(n.A,{defaultMessage:"Free plan",id:"B+7815cfpz"});case"claude_pro":return(0,t.jsx)(n.A,{defaultMessage:"Pro plan",id:"P0xe8AvKVP"});case"claude_max":return(0,t.jsx)(n.A,{defaultMessage:"Max plan",id:"yC6ECfKPIQ"})}},d=(e,a,l)=>"free"===e?(0,t.jsx)(n.A,{defaultMessage:"Try Claude",id:"pZ4CtGSlwT"}):"claude_pro"===e&&a===r.NW.YEARLY?(0,t.jsx)(n.A,{defaultMessage:"Annual",id:"2C6TrW95uE"}):"claude_pro"===e&&a===r.NW.MONTHLY?(0,t.jsx)(n.A,{defaultMessage:"Monthly",id:"wYsv4ZHu+B"}):"claude_max"===e&&l===r.un.FIVE_X?(0,t.jsx)(n.A,{defaultMessage:"5x more usage than Pro",id:"Mqu1u9b9B1"}):"claude_max"===e&&l===r.un.TWENTY_X?(0,t.jsx)(n.A,{defaultMessage:"20x more usage than Pro",id:"YIkI1PRwfs"}):void 0,c=e=>e&&(0,o.b)(e)?(0,t.jsx)(n.A,{defaultMessage:"Subscribe and Pay",id:"Zt/6SnhrDf"}):(0,t.jsx)(n.A,{defaultMessage:"Subscribe",id:"gczcC5Leue"})},0x215f3d6df:(e,a,l)=>{l.d(a,{D:()=>u});var t=l(0xac309a83),n=l(0xfc89b4a4),r=l(0x156c4e43b);let o={},i=r.g1(r.Ik({name:r.Yj(),console_supported:r.zM(),phone_verification_supported:r.zM(),stripe_address_supported:r.zM(),claudeai_supported:r.zM()})),u=e=>{let{regions:a}=(()=>{let e=(0,t.iW)("supported_regions",o,i);return(0,n.useMemo)(()=>({regions:Object.entries(e).map(e=>{let[a,l]=e;return{code:a,...l}})}),[e])})();return(0,n.useMemo)(()=>({supportedRegions:a.filter(a=>"claude-ai"===e?a.claudeai_supported:"console"===e?a.console_supported:void 0)}),[a,e])}},0x23ed6222b:(e,a,l)=>{l.d(a,{So:()=>i,vv:()=>t,wh:()=>r,xs:()=>n});let t=function(e,a){let{preferWholeNumber:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=Math.round(e);let t={minimumFractionDigits:2,maximumFractionDigits:2};l&&e/100%1==0&&(t.minimumFractionDigits=0,t.maximumFractionDigits=0);let n=navigator.languages&&navigator.languages.length?navigator.languages:navigator.language?navigator.language:"en-US",r="string"==typeof n?n:n[0];return(["SGD","AUD","NZD"].includes(a)||"USD"===a&&"en-US"!==r)&&(t.currencyDisplay="code"),new Intl.NumberFormat(n||void 0,{style:"currency",currency:a,...t}).format(e/100)};function n(e){let{amount:a,currency:l,preferWholeNumber:n}=e;return t(a,l,{preferWholeNumber:n})}let r={GST:"GST",VAT:"VAT",JCT:"JCT"},o={aud:{showIncluded:!0,taxLabel:r.GST},brl:{showIncluded:!1,taxLabel:null},cad:{showIncluded:!1,taxLabel:null},eur:{showIncluded:!1,taxLabel:r.VAT},gbp:{showIncluded:!0,taxLabel:r.VAT},nzd:{showIncluded:!0,taxLabel:r.VAT},sgd:{showIncluded:!0,taxLabel:r.GST},usd:{showIncluded:!1,taxLabel:null}};function i(e,a){var l;return"usd"===e.toLowerCase()&&"jp"===a.toLowerCase()?{showIncluded:!1,taxLabel:r.JCT}:null!=(l=o[e.toLowerCase()])?l:o.usd}}}]);
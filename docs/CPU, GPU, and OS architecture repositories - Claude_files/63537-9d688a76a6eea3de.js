try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4fa33ef9-9ed8-4a3d-bfcf-55a702cea0e1",e._sentryDebugIdIdentifier="sentry-dbid-4fa33ef9-9ed8-4a3d-bfcf-55a702cea0e1")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63537],{0x53bbc52f:(e,t,a)=>{a.d(t,{TierSelectorProvider:()=>_,tg:()=>p});var r=a(0x22102fd88),n=a(0x49fac030),i=a(0xac309a83),l=a(0x17f3a2521),o=a(0xc6536c20),s=a(0xfc89b4a4),u=a(0x12c9046cd),d=a(0x14de19ae8);let c=(0,s.createContext)(null),p=()=>{let e=(0,s.useContext)(c);if(!e)throw Error("useTierSelector must be used within a TierSelectorProvider");return e},_=e=>{var t,a;let{children:p,initialEnabled:_=!1}=e,{account:f}=(0,d.YL)(),{mutate:g}=(0,u.Qv)("/api/account/settings","PATCH",(e,t)=>(null==t?void 0:t.account)?{...t,account:{...t.account,settings:{...t.account.settings,...e}}}:t,{queryKey:[n.Rw]}),[m,v]=(0,s.useState)(null),[y,h]=(0,s.useState)(null),[b,x]=(0,s.useState)(!1),S=(0,i.fS)("internal_tier_selector"),w=null!=S?S:_,j=(0,s.useState)(w)[1];(0,s.useEffect)(()=>{if((null==f?void 0:f.settings)&&!b){var e,t,a;let{tier:r,variant:n}=((e,t,a)=>{if(!e)return{tier:null,variant:null};switch(e){case"claude_free":return{tier:l.d7.FREE,variant:null};case"claude_pro":return{tier:l.d7.PRO,variant:null};case"claude_max":if("default_claude_max_20x"===t)return{tier:l.d7.MAX,variant:"20x"};return{tier:l.d7.MAX,variant:"5x"};case"claude_enterprise":return{tier:l.d7.ENTERPRISE,variant:({enterprise_standard:"standard",enterprise_tier_1:"premium"})[a||""]||"standard"};default:return{tier:null,variant:null}}})(null!=(e=f.settings.internal_tier_org_type)?e:void 0,null!=(t=f.settings.internal_tier_rate_limit_tier)?t:void 0,null!=(a=f.settings.internal_tier_seat_tier)?a:void 0);v(r),h(n),x(!0)}},[null==f?void 0:f.settings,b]);let k=(0,s.useCallback)((e,t)=>{if(!w){v(e),h(t);return}null===e?(g({internal_tier_org_type:null,internal_tier_rate_limit_tier:null,internal_tier_seat_tier:null,internal_tier_override_expires_at:null}),v(null),h(null)):(g({...((e,t)=>{switch(e){case l.d7.FREE:return{internal_tier_org_type:"claude_free",internal_tier_rate_limit_tier:"default_claude_ai",internal_tier_seat_tier:null};case l.d7.PRO:return{internal_tier_org_type:"claude_pro",internal_tier_rate_limit_tier:"default_claude_ai",internal_tier_seat_tier:null};case l.d7.MAX:if("20x"===t)return{internal_tier_org_type:"claude_max",internal_tier_rate_limit_tier:"default_claude_max_20x",internal_tier_seat_tier:null};return{internal_tier_org_type:"claude_max",internal_tier_rate_limit_tier:"default_claude_max_5x",internal_tier_seat_tier:null};case l.d7.ENTERPRISE:return{internal_tier_org_type:"claude_enterprise",internal_tier_rate_limit_tier:"default_raven",internal_tier_seat_tier:({standard:"enterprise_standard",premium:"enterprise_tier_1"})[t||"standard"]||"enterprise_standard"};default:return{internal_tier_org_type:"claude_free",internal_tier_rate_limit_tier:"default_claude_ai",internal_tier_seat_tier:null}}})(e,t),internal_tier_override_expires_at:null}),v(e),h(t))},[w,g]),C=(0,s.useCallback)(e=>{null===e?k(null,null):k(e,null)},[k]),E=(0,s.useCallback)(e=>{m?k(m,e):h(e)},[m,k]),L=(0,s.useMemo)(()=>{var e,t;let a=null==f||null==(e=f.settings)?void 0:e.internal_tier_org_type,r=null==f||null==(t=f.settings)?void 0:t.internal_tier_override_expires_at;if(null!==a||!r)return null;try{let e=o.c9.fromISO(r);if(e>o.c9.now())return e}catch(e){}return null},[null==f||null==(t=f.settings)?void 0:t.internal_tier_org_type,null==f||null==(a=f.settings)?void 0:a.internal_tier_override_expires_at]),P=null!==L,z=(0,s.useCallback)(e=>{w&&(g({internal_tier_org_type:null,internal_tier_rate_limit_tier:null,internal_tier_seat_tier:null,internal_tier_override_expires_at:o.c9.now().plus({days:e}).toISO()}),v(null),h(null))},[w,g]),M=(0,s.useCallback)(()=>{w&&g({internal_tier_override_expires_at:null})},[w,g]),T=w&&null!==m&&!P,K=w&&null!==m&&!P;return(0,r.jsx)(c.Provider,{value:{selectedTier:m,selectedTierVariant:y,isTierSelectorEnabled:w,shouldOverrideTokenLimits:T,shouldOverrideFeatureAccess:K,setTierOverride:k,setSelectedTier:C,setSelectedTierVariant:E,clearOverrideForDays:z,isOverrideCleared:P,overrideClearedUntil:L,reEnableOverride:M,setIsTierSelectorEnabled:j},children:p})}},0x945c7f20:(e,t,a)=>{a.d(t,{K:()=>o,p:()=>s});var r=a(0x14de19ae8),n=a(0x53bbc52f),i=a(0x17f3a2521),l=a(0x78b33fbd);let o=()=>{let e=(0,r.O9)(),t=(0,r.zc)(),a=(0,r.mV)(),{selectedTier:o,shouldOverrideFeatureAccess:s,isTierSelectorEnabled:u}=(0,n.tg)(),d=(0,l.useDynamicConfig)("claude_ai_projects_limits").get("max_free_projects",0)>0,c=u&&s&&o?o===i.d7.PRO||o===i.d7.MAX||o===i.d7.ENTERPRISE:e||t||a,p=(0,l.useLayer)("trials_freemium").get("free_project",!1);return d||c||p},s=()=>{let e=(0,r.O9)(),t=(0,r.zc)(),a=(0,r.mV)(),{selectedTier:o,shouldOverrideFeatureAccess:s,isTierSelectorEnabled:u}=(0,n.tg)(),d=(0,l.useDynamicConfig)("claude_ai_projects_limits"),c=(0,l.useLayer)("trials_freemium");if(u&&s&&o?o===i.d7.PRO||o===i.d7.MAX||o===i.d7.ENTERPRISE:e||t||a)return;let p=d.get("max_free_projects",0);return p>0?p:+!!c.get("free_project",!1)}},0xbebfc702:(e,t,a)=>{a.d(t,{BN:()=>P,CB:()=>h,GQ:()=>M,Gz:()=>z,Kf:()=>x,LQ:()=>L,PL:()=>y,Zd:()=>D,bL:()=>k,bs:()=>S,dx:()=>g,eW:()=>E,fo:()=>w,gM:()=>m,gr:()=>v,kj:()=>R,mu:()=>K,my:()=>Q,nl:()=>q,sC:()=>f,sS:()=>C,tz:()=>A,u7:()=>b,xQ:()=>T});var r=a(0x628a9a0b),n=a(0x12c9046cd),i=a(0x14de19ae8),l=a(0x139b5e710),o=a(0x1016c6ed2),s=a(0x49fac030),u=a(0xac309a83),d=a(0x17e725145),c=a(0xfc89b4a4),p=a(0x1ab0d1ca1),_=a(0x945c7f20);let f=30,g=1e4;var m=function(e){return e.Student="student",e.Meeting="meeting",e.Haystack="haystack",e}({}),v=function(e){return e.Study="study",e.Career="career",e.Research="research",e.Zoom="zoom",e.Teams="teams",e.GoogleMeet="google_meet",e}({});let y=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid;return(0,n.Sk)("/api/organizations/".concat(t,"/projects/count"),{queryKey:[s.Wy,{orgUuid:t}],staleTime:3e5,enabled:!!t,meta:{noToast:e=>e instanceof o.LG&&"permission_error"===e.type}})},h=e=>{let{enabled:t=!0,limit:a,offset:r,starred:l,creatorFilter:o,projectFilter:u,orderBy:d,type:c}=e,{activeOrganization:f}=(0,i.YL)(),g=(0,_.K)(),m=null==f?void 0:f.uuid,v=(0,p.A)(),y=new URLSearchParams;return y.append("include_harmony_projects","true"),void 0!==a&&y.append("limit",a.toString()),void 0!==r&&y.append("offset",r.toString()),void 0!==l&&y.append("starred",l.toString()),void 0!==o&&y.append("creator_filter",o.toString()),void 0!==u&&y.append("filter",u.toString()),void 0!==d&&y.append("order_by",d.toString()),void 0!==c&&y.append("type",c.toString()),(0,n.Sk)("/api/organizations/".concat(m,"/projects?").concat(y.toString()),{queryKey:[s.BP,{orgUuid:m},{limit:a,offset:r,starred:l,creatorFilter:o,projectFilter:u,orderBy:d,type:c}],enabled:!!(t&&f&&g),select:e=>{let t=e.length===a;return Object.assign(e.filter(e=>!e.archived_at).map(e=>"haystack"===e.type?{...e,unformattedName:e.name,name:v.formatMessage({defaultMessage:"Ask {name}",id:"bH47Z4hSE8"},{name:e.name})}:e),{hasMore:t})}})},b=e=>{let{enabled:t=!0,limit:a=f,offset:r=0,starred:l,creatorFilter:o,projectFilter:u,orderBy:d,searchQuery:c,isArchived:p}=e,{activeOrganization:g}=(0,i.YL)(),m=(0,_.K)(),v=null==g?void 0:g.uuid,y=new URLSearchParams;return y.append("limit",a.toString()),y.append("offset",r.toString()),void 0!==l&&y.append("starred",l.toString()),void 0!==o&&y.append("creator_filter",o.toString()),void 0!==u&&y.append("filter",u.toString()),void 0!==d&&y.append("order_by",d.toString()),void 0!==c&&y.append("searchQuery",c.toString()),void 0!==p&&y.append("is_archived",p.toString()),(0,n.Sk)("/api/organizations/".concat(v,"/projects_v2?").concat(y.toString()),{queryKey:[s.Wf,{orgUuid:v},{limit:a,offset:r,starred:l,creatorFilter:o,projectFilter:u,orderBy:d,searchQuery:c,isArchived:p}],enabled:!!(t&&g&&m)})},x=()=>{let{activeOrganization:e}=(0,i.YL)(),t=(0,n.mn)();return(0,c.useCallback)(async()=>(await t("/api/organizations/".concat(null==e?void 0:e.uuid,"/projects"))).json(),[null==e?void 0:e.uuid,t])},S=()=>{let e=x(),t=(0,r.uE)();return(0,c.useCallback)(async()=>{let[a,n]=await Promise.all([e(),t({limit:r.dy})]);return((e,t)=>{let a=e.map(e=>({...e,lastConversation:null==t?void 0:t.find(t=>t.project_uuid===e.uuid)})).filter(e=>e.lastConversation).sort((e,t)=>new Date(t.lastConversation.created_at).getTime()-new Date(e.lastConversation.created_at).getTime()),r=null==e?void 0:e.filter(e=>!a.find(t=>t.uuid===e.uuid));return[...a,...r]})(a,n)},[t,e])},w=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid,r=(0,p.A)();return(0,n.Sk)("/api/organizations/".concat(a,"/projects/").concat(e),{queryKey:[s.hc,{orgUuid:a,projectUuid:e}],enabled:!!(t&&e),staleTime:0,meta:{noToast:e=>e instanceof o.LG&&(404===e.statusCode||403===e.statusCode)},select:e=>"haystack"===e.type?{...e,unformattedName:e.name,name:r.formatMessage({defaultMessage:"Ask {name}",id:"bH47Z4hSE8"},{name:e.name})}:e})},j=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,a=(0,d.useQueryClient)();return{addProject:e=>{a.setQueriesData({queryKey:[s.Wf,{orgUuid:t}]},t=>t?{...t,data:[e,...t.data],pagination:{...t.pagination,total:t.pagination.total+1}}:t),a.setQueriesData({queryKey:[s.BP,{orgUuid:t}]},t=>t?[e,...t]:t),a.setQueriesData({queryKey:[s.Wy,{orgUuid:t}]},e=>e?{count:e.count+1}:e)},removeProject:e=>{a.setQueriesData({queryKey:[s.Wf,{orgUuid:t}]},t=>t?{...t,data:t.data.filter(t=>t.uuid!==e),pagination:{...t.pagination,total:Math.max(0,t.pagination.total-1)}}:t),a.setQueriesData({queryKey:[s.BP,{orgUuid:t}]},t=>t?t.filter(t=>t.uuid!==e):t),a.setQueriesData({queryKey:[s.Wy,{orgUuid:t}]},e=>e?{count:Math.max(0,e.count-1)}:e)}}},k=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,a=z(),{addProject:r}=j();return(0,n.L2)(()=>"/api/organizations/".concat(t,"/projects"),"POST",{onSuccess:e=>{r(e),a()}})},C=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid,r=z();return(0,n.Qv)(()=>"/api/organizations/".concat(a,"/projects/").concat(e),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{r(e)},queryKey:[s.hc,{orgUuid:a,projectUuid:e}]})},E=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid,r=z(),{removeProject:l}=j();return(0,n.L2)(()=>"/api/organizations/".concat(a,"/projects/").concat(e),"DELETE",{onSuccess:()=>{l(e),r(e,{remove:!0})}})},L=function(e){let{limit:t=30,offset:a=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:r}=(0,i.YL)(),l=null==r?void 0:r.uuid,u=new URLSearchParams;return u.append("limit",t.toString()),u.append("offset",a.toString()),(0,n.Sk)("/api/organizations/".concat(l,"/projects/").concat(e,"/conversations_v2?").concat(u.toString()),{queryKey:[s.yF,{orgUuid:l,projectUuid:e,limit:t,offset:a}],enabled:!!r,staleTime:0,meta:{noToast:e=>e instanceof o.LG&&403===e.statusCode}})},P=()=>{var e,t;let a=h({enabled:!0,creatorFilter:"is_creator",limit:g}),r=null==(t=a.data)||null==(e=t.find(e=>e.is_starter_project))?void 0:e.uuid;return{...a,data:r}},z=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,a=(0,d.useQueryClient)();return(e,r)=>{let{remove:n=!1}=r||{};if([[s.BP,{orgUuid:t}],[s.Wf,{orgUuid:t}],[s.Wy,{orgUuid:t}]].forEach(e=>void a.invalidateQueries({queryKey:e})),e){let r=n?"removeQueries":"invalidateQueries";[[s.hc,{orgUuid:t,projectUuid:e}],[s.yF,{orgUuid:t,projectUuid:e}],[s.vE,{projectUuid:e}]].forEach(e=>void a[r]({queryKey:e}))}}},M=(e,t)=>{let a=z();return(0,n.L2)("/api/organizations/".concat(e,"/projects/").concat(t,"/report"),"POST",{enabled:!!t&&!!e,onSuccess:()=>{a(t)}})},T=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid,r=(0,u.fS)("claude_ai_sticky_project_settings");return(0,n.Sk)("/api/organizations/".concat(a,"/projects/").concat(e,"/settings"),{queryKey:[s.vX,{orgUuid:a,projectUuid:e}],enabled:!!(t&&e&&r)})},K=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid,r=(0,u.fS)("claude_ai_sticky_project_settings");return(0,n.Qv)(()=>"/api/organizations/".concat(a,"/projects/").concat(e,"/settings"),"PUT",(e,t)=>t?{...t,...e}:void 0,{queryKey:[s.vX,{orgUuid:a,projectUuid:e}],enabled:!!(t&&e&&r)})},Q=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,a=(0,d.useQueryClient)();return(0,n.L2)(e=>"/api/organizations/".concat(t,"/projects/").concat(e.projectUuid,"/sync"),"POST",{meta:{noToast:!0},onSuccess:(e,r)=>{"done"===e.kb_resync_status&&r.projectUuid&&a.invalidateQueries({queryKey:[s.qz,{orgUuid:t,projectUuid:r.projectUuid}]}),r.projectUuid&&e.gdrive_resource_backfill_triggered&&a.invalidateQueries({queryKey:[s.LV,{orgUuid:t,projectUuid:r.projectUuid}]})}})},R=()=>(0,u.fS)("claudeai_sync_project"),D=()=>{let{mutateAsync:e}=(0,r.x6)();return{moveToProject:(0,c.useCallback)(async function(t,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{batchSize:n=20,batchDelayMs:i=500}=r;if(!t.length||!a)return Promise.resolve({totalMoved:0,totalFailed:0,conversationUuids:[],projectUuid:""});let l=t.length>1,o=0,s=0;if(l){let r=Math.ceil(t.length/n);for(let l=0;l<r;l++){let u=l*n,d=t.slice(u,u+n),c=await e({conversation_uuids:d,project_uuid:a});o+=c.moved.length,s+=c.failed.length,l<r-1&&await new Promise(e=>setTimeout(e,i))}}else{let r=await e({conversation_uuids:t,project_uuid:a});o=r.moved.length,s=r.failed.length}return{totalMoved:o,totalFailed:s,conversationUuids:t,projectUuid:a}},[e])}},q=()=>{let{mutateAsync:e}=(0,r.x6)(),{addSuccess:t,addError:a}=(0,l.Y)(),n=(0,p.A)(),o=(0,d.useQueryClient)(),{activeOrganization:u}=(0,i.YL)(),_=null==u?void 0:u.uuid,[f,g]=(0,c.useState)(new Set),m=(0,c.useCallback)(async function(i){let{showSuccess:l=!0,showError:u=!0,onSuccess:d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i.length)return Promise.resolve({moved:[],failed:[]});if(i.some(e=>f.has(e)))return Promise.resolve({moved:[],failed:i});g(e=>{let t=new Set(e);return i.forEach(e=>t.add(e)),t}),i.forEach(e=>{let t=[s.fC,{orgUuid:_},{uuid:e}];o.getQueryData(t)&&o.setQueryData(t,e=>e?{...e,project_uuid:void 0}:e)});try{let a=await e({conversation_uuids:i,project_uuid:null});return a.moved.length>0&&l&&t(n.formatMessage({defaultMessage:"Chat removed from project",id:"UkGfrdMZdS"})),null==d||d(a),await (0,r.C4)(o,_,i),a}catch(e){throw await (0,r.C4)(o,_,i),u&&a(n.formatMessage({defaultMessage:"Failed to remove chat from project",id:"4suoYkIuEm"}),{error:e,messageForLogging:"Failed to remove chat from project"}),e}finally{g(e=>{let t=new Set(e);return i.forEach(e=>t.delete(e)),t})}},[e,t,a,n,f,o,_]),v=(0,c.useCallback)(e=>f.has(e),[f]);return{removeFromProject:m,isRemoving:f.size>0,isRemovingConversation:v}},A=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid;return(0,n.Sk)("/api/organizations/".concat(a,"/projects/").concat(e,"/permissions"),{queryKey:[s._P,{orgUuid:a,projectUuid:e}],enabled:!!(t&&e)})}},0x18e5c6e75:(e,t,a)=>{function r(e){let t=e,a="",r=0;for(;t!==a&&r<10;)a=t,t=(t=(t=(t=t.normalize("NFKC")).replace(RegExp("[\\p{Cf}\\p{Co}\\p{Cn}]","gu"),"")).replace(RegExp("[\\p{Cc}]","gu"),e=>"\n"===e||"	"===e||"\r"===e?e:"")).replace(/[\u200B-\u200F]/g,"").replace(/[\u202A-\u202E]/g,"").replace(/[\u2066-\u2069]/g,"").replace(/[\uFEFF]/g,"").replace(/[\uE000-\uF8FF]/g,""),r++;if(r>=10)throw Error("Unicode sanitization reached maximum iterations (".concat(10,") for input: ").concat(e.slice(0,100)));return t}a.d(t,{M:()=>function e(t){if("string"==typeof t)return r(t);if(Array.isArray(t))return t.map(e);if(null!==t&&"object"==typeof t){let a={};for(let[r,n]of Object.entries(t))a[e(r)]=e(n);return a}return t},P:()=>r})},0x225bae024:(e,t,a)=>{a.d(t,{$:()=>f});var r=a(0x22102fd88),n=a(0x14023fbb8),i=a(0x13d7cf7dc),l=a(0x1b370f49d),o=a(0x1474caf99),s=a(0xa0c99a98),u=a(0x1a1f6dda6),d=a(0xfc89b4a4),c=a(0x29766f01),p=a.n(c);let _=(0,s.F)("inline-flex\n  items-center\n  justify-center\n  relative\n  shrink-0\n  can-focus\n  select-none\n  disabled:pointer-events-none\n  disabled:opacity-50\n  disabled:shadow-none\n  disabled:drop-shadow-none",{variants:{variant:{primary:"font-base-bold\n        relative\n        overflow-hidden\n        transition-transform\n        will-change-transform\n        ease-[cubic-bezier(0.165,0.85,0.45,1)]\n        duration-150\n        hover:scale-y-[1.015]\n        hover:scale-x-[1.005]\n        backface-hidden\n        after:absolute\n        after:inset-0\n        after:bg-[radial-gradient(at_bottom,hsla(var(--bg-000)/20%),hsla(var(--bg-000)/0%))]\n        after:opacity-0\n        after:transition\n        after:duration-200\n        after:translate-y-2\n        hover:after:opacity-100\n        hover:after:translate-y-0",claude:"font-base-bold\n          transition-colors",secondary:"font-base-bold\n          border-0.5\n          relative\n          overflow-hidden\n          transition\n          duration-100\n          backface-hidden",ghost:"border-transparent\n          transition\n          font-base\n          duration-300\n          ease-[cubic-bezier(0.165,0.85,0.45,1)]",danger:"font-base-bold\n          transition\n          hover:scale-y-[1.015]\n          hover:scale-x-[1.005]\n          hover:opacity-95"},size:{default:"h-9 px-4 py-2 rounded-lg min-w-[5rem] active:scale-[0.985] whitespace-nowrap",sm:"h-8 rounded-md px-3 min-w-[4rem] active:scale-[0.985] whitespace-nowrap !text-xs",lg:"h-11 rounded-[0.6rem] px-5 min-w-[6rem] active:scale-[0.985] whitespace-nowrap !text-base",icon:"h-9 w-9 rounded-md active:scale-95 shrink-0",icon_xs:"h-6 w-6 rounded-md active:scale-95",icon_sm:"h-8 w-8 rounded-md active:scale-95",icon_lg:"h-11 w-11 rounded-[0.6rem] active:scale-95"},option:{rounded:"!rounded-full",prepend:"",append:""}},compoundVariants:[{size:"default",option:"prepend",class:"pl-2 pr-3 gap-1"},{size:"lg",option:"prepend",class:"pl-2.5 pr-3.5 gap-1"},{size:"sm",option:"prepend",class:" pl-2 pr-2.5 gap-1"},{size:"default",option:"append",class:"pl-3 pr-2 gap-1"},{size:"lg",option:"append",class:"pl-3.5 pr-2.5 gap-1"},{size:"sm",option:"append",class:"pl-2.5 pr-2 gap-1"}],defaultVariants:{variant:"primary",size:"default"}}),f=(0,d.forwardRef)((e,t)=>{let{className:a,variant:s="primary",size:c,option:f,loading:g,href:m,onLinkClick:v,target:y,webBehavior:h,desktopBehavior:b,prepend:x,append:S,disabled:w,children:j,type:k="button",tooltip:C,tooltipSide:E="bottom",tooltipDelay:L,tooltipDisabled:P,tooltipHoverable:z=!1,shortcut:M,colorized:T,...K}=e;x&&(f="prepend"),(S||M)&&(f="append");let Q="primary"===s||"secondary"===s||"ghost"===s,R=T&&Q,D=!j||c&&c.startsWith("icon"),q=!K["aria-label"]&&C&&D?function(e){if(e){if("string"==typeof e)return e;if("number"==typeof e)return String(e);if((0,d.isValidElement)(e)){let t=e.props;if(t.defaultMessage&&"string"==typeof t.defaultMessage){if(t.values)return;return t.defaultMessage}if(t.children&&"string"==typeof t.children)return t.children}}}(C):void 0,A=(0,u.A)(_({variant:s,size:c,option:f,className:a}),(()=>{switch(s){case"primary":default:return p().primary;case"secondary":return p().secondary;case"ghost":return p().ghost;case"danger":return p().danger;case"claude":return p().claude}})(),R&&p().colorized,g&&"!text-transparent ![text-shadow:_none]"),F=(0,r.jsxs)(r.Fragment,{children:[g&&(0,r.jsx)("div",{className:(0,u.A)("absolute inset-0 flex items-center justify-center",p().loadingSpinner),children:(0,r.jsx)(n.Loading,{size:"sm",inheritColor:!0,delay:0})}),x,j,S,M&&(0,r.jsx)(i.ShortcutDisplay,{className:"ml-1",onDark:!R&&(!s||"claude"===s||"danger"===s||"primary"===s),small:!0,shortcut:M})]}),Y=m?(0,r.jsx)(o.DesktopSafeLink,{href:m,ref:t,webBehavior:h,desktopBehavior:b,..."_blank"===y&&{webBehavior:"new-tab",desktopBehavior:"open-in-browser"},className:A,"aria-label":K["aria-label"]||q,...K,onClick:v,children:F}):(0,r.jsx)("button",{className:A,ref:t,disabled:w||g,type:k,...K,"aria-label":K["aria-label"]||q,children:F});return C&&!P?(0,r.jsx)(l.Tooltip,{tooltipContent:C,side:E,delayDuration:L,disableHoverableContent:!z,children:(0,r.jsx)("div",{className:"w-fit",children:Y})}):Y});f.displayName="Button"}}]);
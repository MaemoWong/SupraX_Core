try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="66e1783d-823c-465e-96d5-daa398f9751b",e._sentryDebugIdIdentifier="sentry-dbid-66e1783d-823c-465e-96d5-daa398f9751b")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57803],{0xeaff4de:(e,t,s)=>{s.d(t,{Hv:()=>S,Rk:()=>M,XI:()=>y});var a=s(0x22102fd88),i=s(0xfab48d52),n=s(0x4d48ac5d),r=s(0x1882451af),l=s(0x239c4283),o=s(0xf32c56dd),d=s(0x14de19ae8),u=s(0x139b5e710),c=s(0x132beb2b5),m=s(0x225bae024),g=s(0x183548b63),f=s(0x141440998),x=s(0x78b33fbd),h=s(0x1a1f6dda6),p=s(0xef41e510),b=s.n(p),_=s(0xfc89b4a4),v=s(0x1ab0d1ca1),j=s(0x38e6572),k=s(0xac06e3dc);let w=null;function y(e){null==w||w(!0,e)}function M(){var e;let t=(0,v.A)(),s=(0,o.st)(),c=(0,d.zm)(),{addSuccess:m,addError:g}=(0,u.Y)(),[f,x]=(0,_.useState)(void 0),[h,p]=(0,_.useState)(!1),[b,j]=(0,_.useState)(!1),[k,y]=(0,_.useState)(!1),[M,S]=(0,_.useState)(!1),{data:A}=(0,i.WF)(),{data:E}=(0,i.Wm)(),L=(null==E?void 0:E.isEnabled)||!1,N="number"==typeof(null==E?void 0:E.monthlyLimit)&&(null==E?void 0:E.monthlyLimit)>0,I="number"==typeof(null==A?void 0:A.amount)&&A.amount>0;(0,_.useEffect)(()=>(w=(e,t)=>{p(e),x(t)},()=>{w=null}),[]);let{mutate:T,isPending:P}=(0,i.pA)({onSuccess:()=>{m(t.formatMessage({defaultMessage:"Extra usage has been turned on",id:"LC2Ix1nDGO"})),s.track({event_key:"claudeai.overages.enabled",spend_limit_type:"organization"}),y(!1),I||S(!0)},onError:e=>{g(e.message||t.formatMessage({defaultMessage:"Failed to turn on extra usage",id:"YHVjXnuk3m"}),{error:e,messageForLogging:"Failed to turn on extra usage"})}}),{mutate:Y,isPending:D}=(0,i.HP)({onSuccess:()=>{T({isEnabled:!0})},onError:e=>{g(e.message||t.formatMessage({defaultMessage:"Failed to set up billing infrastructure",id:"wmQ2LJxiyG"}),{error:e,messageForLogging:"Failed to set up billing infrastructure"})}}),F=(0,_.useCallback)(()=>{p(!1),x(void 0)},[]),O=(0,_.useCallback)(()=>{Y({seat_tier_monthly_spend_limits:c?{enterprise_standard:null,enterprise_tier_1:null,enterprise_usage_based:null}:{team_standard:null,team_tier_1:null},org_monthly_spend_limit:i.Dy})},[c,Y]),W=(0,_.useCallback)(()=>{L?j(!0):N?O():y(!0),F()},[L,N,O,F]),K=(0,_.useCallback)(()=>{y(!1),p(!0)},[]),U=(0,_.useCallback)(e=>{S(!1),e&&F()},[F]),B=(0,_.useCallback)(()=>{j(!1),F()},[F]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C,{isOpen:h,overagesEnabled:L,messageLimit:f,onOveragesClick:W,onClose:F}),(0,a.jsx)(r.n,{isOpen:k,onClose:K,onConfirm:O,isEnabling:D||P}),(0,a.jsx)(l.V,{isOpen:M,hasCredits:!1,onClose:U}),(0,a.jsx)(n.l,{isOpen:b,hasAutoReload:!!(null==A||null==(e=A.auto_reload_settings)?void 0:e.enabled),onClose:B})]})}function S(){return(0,x.useExperiment)("claude_ai_overages_upgrade_cta").get("enabled",!1)}function C(e){let{isOpen:t,overagesEnabled:s,messageLimit:i,onOveragesClick:n,onClose:r}=e,l=(0,v.A)(),u=(0,o.st)(),f=(0,d.UC)(),x=(0,d.bu)(),p=(0,d.tP)(),b=f||x||p,w=(0,d.$b)(),{windowName:y,status:M}=(0,k.T)(null==i?void 0:i.windows),S=(0,_.useMemo)(()=>(null==M?void 0:M.resets_at)?new Date(1e3*M.resets_at):null,[null==M?void 0:M.resets_at]),C=(0,_.useMemo)(()=>S?l.formatDate(S,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}):null,[l,S]),A=(0,_.useMemo)(()=>b?null:y&&S&&"overage"!==y?"5h"===y?l.formatMessage({defaultMessage:"Wait until {resetHour}",id:"0rNZILlkMs"},{resetHour:l.formatTime(S,{hour:"numeric"})}):l.formatMessage({defaultMessage:"Wait until {resetDayOfWeek}",id:"q0dq8jPlbz"},{resetDayOfWeek:l.formatDate(S,{weekday:"long"})}):l.formatMessage({defaultMessage:"No, thanks",id:"fFaCQIK3h3"}),[l,b,y,S]);(0,_.useEffect)(()=>{t&&u.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.viewed",limit_window:y,paid_account_tier:w,can_upgrade:b})},[t,u,y,w,b]);let N=(0,_.useCallback)(()=>{u.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.overages_clicked",limit_window:y,paid_account_tier:w,can_upgrade:b,overages_enabled:s}),n()},[u,y,w,b,s,n]),I=(0,_.useCallback)(()=>{u.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.upgrade_clicked",limit_window:y,paid_account_tier:w,can_upgrade:b,overages_enabled:s})},[u,y,w,b,s]),T=(0,_.useCallback)(()=>{u.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.closed",limit_window:y,paid_account_tier:w,can_upgrade:b}),r()},[u,y,w,b,r]),P=(0,_.useMemo)(()=>f?"/upgrade/pro":x?"/upgrade?hide_pro=true":p?"/upgrade":null,[f,x,p]);return(0,a.jsxs)(g.aF,{isOpen:t,modalSize:b?"2lg":"sm",backgroundColor:b?"bg-bg-200":"bg-bg-100",overlayClassName:"z-toast",onClose:T,children:[(0,a.jsx)("div",{className:"absolute top-3 right-4",children:(0,a.jsx)(g.s_,{onClose:T})}),(0,a.jsx)("h2",{className:"font-title",children:(0,a.jsx)(j.A,{defaultMessage:"Keep using Claude?",id:"cTZJslVw1b"})}),(0,a.jsx)("p",{className:(0,h.A)("mt-2 mb-5 text-sm",{"text-text-500":b}),children:C?(0,a.jsx)(j.A,{defaultMessage:"You've reached your plan's message limit. You can wait until it resets at {resetTime}, or continue now:",id:"GCY/aSohFS",values:{resetTime:C}}):(0,a.jsx)(j.A,{defaultMessage:"You've reached your plan's message limit. You can wait until it resets at the scheduled time, or continue now:",id:"Shyct06Bi/"})}),b?(0,a.jsxs)("div",{className:"flex flex-row items-stretch gap-4",children:[(0,a.jsx)(E,{title:l.formatMessage({defaultMessage:"Pay per message",id:"dtazUCgjED"}),description:l.formatMessage({defaultMessage:"Get extra usage to finish what you're working on.",id:"qRgjP76jll"}),PictogramComponent:c.Nq,onClick:N}),P&&(0,a.jsx)(E,{title:l.formatMessage({defaultMessage:"Upgrade to a higher plan",id:"MqTWZ29Lwe"}),description:l.formatMessage({defaultMessage:"Get higher limits and do more with Claude.",id:"YrmCb0w4py"}),PictogramComponent:c.j6,href:P,onClick:I})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("ul",{className:"mb-8",children:[(0,a.jsx)(L,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Continue without interruption",id:"0WkTDuwIgp"})}),(0,a.jsx)(L,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Pay only for what you use",id:"8FFgJKCSbr"})}),(0,a.jsx)(L,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Control costs with spending caps",id:"NMNGH13oxY"})}),(0,a.jsx)(L,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Track usage in real time",id:"eR6EzdokAj"})}),(0,a.jsx)(L,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Works with Claude.ai and Claude Code",id:"dkoDCo77YZ"})}),(0,a.jsx)(L,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Auto-reload when balance runs low",id:"C0IHaxOPo4"})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-end gap-2",children:[(0,a.jsx)(m.$,{className:"w-full",onClick:N,children:(0,a.jsx)(j.A,{defaultMessage:"Get extra usage",id:"tYq4Dt6buP"})}),(0,a.jsx)(m.$,{variant:"ghost",className:"w-full underline",onClick:T,children:A})]})]})]})}let A="flex flex-col flex-1 p-6 justify-between rounded-xl border text-left bg-bg-100 border-border-300 hover:border-border-100 min-h-[300px] shadow-sm";function E(e){let{title:t,description:s,PictogramComponent:i,href:n,onClick:r}=e,l=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-none",children:[(0,a.jsx)("h3",{className:"mb-2 font-semibold",children:t}),(0,a.jsx)("p",{className:"font-base text-text-500",children:s})]}),(0,a.jsx)(i,{size:"small"})]});return n?(0,a.jsx)(b(),{className:A,href:n,onClick:r,children:l}):(0,a.jsx)("button",{className:A,onClick:r,children:l})}function L(e){let{benefitText:t}=e;return(0,a.jsxs)("li",{className:"flex items-start gap-2.5 mb-1 text-text-300",children:[(0,a.jsx)(f.S,{className:"mt-0.5 flex-shrink-0",size:18}),(0,a.jsx)("span",{className:"text-sm",children:t})]})}},0x228fcd00:(e,t,s)=>{s.d(t,{r:()=>o,w:()=>l});var a=s(0xb844abc8),i=s(0x1bd175d8c),n=s(0xfc89b4a4),r=s(0x1e134e4dd);function l(e){let t=(0,a.vm)(),s=(0,i.V)(),l=r.Ar[e],d=t?"mac":"non-mac",u=s?"desktop":"web",c=(0,n.useMemo)(()=>null==l?void 0:l.bindings.filter(e=>(!e.platform||e.platform===d)&&(!e.app||e.app===u)),[null==l?void 0:l.bindings,d,u]),m=(0,n.useCallback)(e=>{if(!c)return null;for(let t of c)if(function(e,t){if(e.key.toLowerCase()!==t.key.toLowerCase())return!1;let s=new Set(t.modifiers),a=s.has("cmd"),i=s.has("ctrl"),n=s.has("shift"),r=s.has("alt");return e.metaKey===a&&e.ctrlKey===i&&e.shiftKey===n&&e.altKey===r}(e,t))return t;return null},[c]),g=(0,n.useMemo)(()=>(null==c?void 0:c[0])?o(c[0]):void 0,[c]);return{description:null==l?void 0:l.description,shortcutString:g,matchShortcut:m}}function o(e){return[...e.modifiers,e.key].join("+")}},0x2b8c35fe:(e,t,s)=>{s.d(t,{F:()=>n});var a=s(0xa5acf583),i=s(0xac309a83);let n=e=>{let{serverGateNames:t}=(0,a._r)(),s=(0,i.fS)(e);return!!t&&s&&t.includes(e)}},0x37d0d66c:(e,t,s)=>{s.d(t,{K:()=>n});var a=s(0xfc89b4a4),i=s(0xde77e32d);function n(e,t,s){var n;let r=(0,i.w)(e=>e.register),l=(0,i.w)(e=>e.unregister),o=null!=(n=null==s?void 0:s.disabled)&&n,d=null==s?void 0:s.description,u=null==s?void 0:s.href;(0,a.useEffect)(()=>(t||u?r(e,t,{disabled:o,description:d,href:u}):l(e),()=>l(e)),[e,t,o,d,u,r,l])}},0x654fb8f7:(e,t,s)=>{s.d(t,{U:()=>i,h:()=>a});let a=e=>"chat-input-file-upload-".concat(e),i=e=>{let t=document.getElementById(a(e));null==t||t.click()}},0x8c555bbe:(e,t,s)=>{s.d(t,{D:()=>l,MessageLimitModalProvider:()=>o});var a=s(0x22102fd88),i=s(0xfc89b4a4),n=s(0xd96dfc62);let r=null;function l(){r&&r(!0)}function o(){let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>(r=t,()=>{r=null}),[]),(0,a.jsx)(n.v,{isOpen:e,onClose:()=>t(!1),limitType:"message_limit"})}},0xac06e3dc:(e,t,s)=>{s.d(t,{T:()=>a});function a(e,t){var s,a,i,n,r,l,o,d;if(!e)return{windowName:null,status:null};let u=null==(d=null==t?void 0:t.startsWith("claude-opus"))||d,c=(null==(s=e["5h"])?void 0:s.status)==="exceeded_limit",m=(null==(a=e["7d"])?void 0:a.status)==="exceeded_limit",g=u&&(null==(i=e["7d_opus"])?void 0:i.status)==="exceeded_limit",f=(null==(n=e.overage)?void 0:n.status)==="exceeded_limit";if((m||c||g)&&f)return{windowName:"overage",status:e.overage};let x=[];if(c&&x.push({name:"5h",resetTime:e["5h"].resets_at}),m&&x.push({name:"7d",resetTime:e["7d"].resets_at}),g&&x.push({name:"7d_opus",resetTime:e["7d_opus"].resets_at}),x.length>1){let t=x.reduce((e,t)=>t.resetTime>e.resetTime?t:e);return{windowName:t.name,status:e[t.name]}}return g?{windowName:"7d_opus",status:e["7d_opus"]}:m?{windowName:"7d",status:e["7d"]}:c||(null==(r=e["5h"])?void 0:r.status)==="approaching_limit"?{windowName:"5h",status:e["5h"]}:(null==(l=e["7d"])?void 0:l.status)==="approaching_limit"?{windowName:"7d",status:e["7d"]}:(null==(o=e.overage)?void 0:o.status)==="approaching_limit"?{windowName:"overage",status:e.overage}:{windowName:null,status:null}}},0xde77e32d:(e,t,s)=>{s.d(t,{w:()=>a});let a=(0,s(0x394ef833).v)(e=>({commands:new Map,register:function(t,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e(e=>{var i;let n=new Map(e.commands);return n.set(t,{execute:s,disabled:null!=(i=a.disabled)&&i,description:a.description,href:a.href}),{commands:n}})},unregister:t=>e(e=>{let s=new Map(e.commands);return s.delete(t),{commands:s}})}))},0x1025e2485:(e,t,s)=>{s.d(t,{q:()=>o});var a=s(0x22102fd88),i=s(0xa6a34c14),n=s(0x1a1f6dda6),r=s(0xfc89b4a4),l=s(0x1c12b3087);let o=e=>{let{children:t,actionButton:s,title:o,minimalUi:d,dangerText:u}=e,{hasBlockingWarning:c,setHasBlockingWarning:m}=(0,l.Tc)(e=>({hasBlockingWarning:e.hasBlockingWarning,setHasBlockingWarning:e.setHasBlockingWarning}),"BlockingWarning");return(0,r.useEffect)(()=>(m(!0),()=>{m(!1)}),[c,m]),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,a.jsxs)("div",{className:(0,n.A)("flex flex-row items-center gap-2 md:w-full",u?"text-danger-000":d?"text-text-300":"text-danger-000"),children:[d?null:(0,a.jsx)(i.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsxs)("div",{children:[o&&(0,a.jsx)("div",{className:"text-sm font-medium",children:o}),(0,a.jsx)("div",{className:"text-sm",children:t})]})]}),!!s&&(0,a.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:s})]})})}},0x109513363:(e,t,s)=>{s.d(t,{IK:()=>C,hq:()=>P,AC:()=>S});var a=s(0x22102fd88),i=s(0x226530adf),n=s(0x10e9ea2cc),r=s(0x14de19ae8),l=s(0x53bbc52f),o=s(0x225bae024),d=s(0x22fc8d729),u=s(0x20e00cddd),c=s(0xac309a83),m=s(0x1ab362a20),g=s(0x78b33fbd),f=s(0xc6536c20),x=s(0xfc89b4a4),h=s(0x38e6572),p=s(0x4d48ac5d),b=s(0xe0745a8f),_=s(0x8c555bbe),v=s(0x19273021e),j=s(0x12c402068),k=s(0x1025e2485),w=s(0xac06e3dc),y=s(0x242212ea2);function M(){let e=(0,g.useExperiment)("claude_ai_rate_limit_modal").get("show_upgrade_modal",!1);return(0,x.useEffect)(()=>{e&&(0,_.D)()},[e]),null}let S=()=>{let{messageLimit:e,account:t,activeOrganization:s}=(0,r.YL)(),{isTierSelectorEnabled:i}=(0,l.tg)(),n=(0,r.mV)(),o=(0,r.O9)(),d=(0,r.zc)(),[u,c]=(0,x.useState)(!0),[m,g]=(0,x.useState)(!0),f=(0,x.useMemo)(()=>{if(!t||!s)return!1;let e=t.memberships.find(e=>e.organization.uuid===s.uuid);return(null==e?void 0:e.seat_tier)==="enterprise_usage_based"||(null==e?void 0:e.seat_tier)==="enterprise_usage_based_chat"},[t,s]),h=function(e){var t,s,a;if(!e||"within_limit"===e.type)return{isOverageScenario:!1,isBlocking:!1,isActive:!1};let i=!!e.overageDisabledReason&&"overage_not_provisioned"!==e.overageDisabledReason&&"org_level_disabled"!==e.overageDisabledReason,n=!!(null==(t=e.windows)?void 0:t.overage)||i,r=(null==(a=e.windows)||null==(s=a.overage)?void 0:s.status)==="exceeded_limit"||i;return{isOverageScenario:n,isBlocking:r,isActive:!r&&n}}(e);return h.isOverageScenario?h.isBlocking?{messageLimit:e,overageExceededWarning:(0,a.jsx)(L,{messageLimit:e,isBlocking:!0})}:f?{messageLimit:e}:{messageLimit:e,approachingMessageLimitWarning:m?(0,a.jsx)(L,{messageLimit:e,isBlocking:!1,onDismiss:()=>g(!1)}):void 0}:(null==e?void 0:e.type)==="exceeded_limit"||(null==e?void 0:e.type)==="approaching_limit"&&0===e.remaining?{messageLimit:e,exceededMessageLimitWarning:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A,{messageLimit:e,showTierSelector:i,isUsageBasedSeatTier:f}),!o&&!n&&!d&&(0,a.jsx)(M,{})]})}:(null==e?void 0:e.type)==="approaching_limit"&&(null==e?void 0:e.representativeClaim)!=="five_hour"?{messageLimit:e,approachingMessageLimitWarning:u?(0,a.jsx)(E,{messageLimit:e,onDismiss:()=>c(!1)}):void 0}:{}},C=e=>{let t=S(),{messageLimit:s}=t,a=(null==s?void 0:s.type)==="within_limit",n=(0,i.Z3)(e),r=a?null:null==s?void 0:s.conversationUuid,l=(0,i.Z3)(null!=r?r:null);return(null==s?void 0:s.type)!=="within_limit"&&(null==s?void 0:s.perModelLimit)&&n!==l?{}:t};function A(e){let{messageLimit:t,showTierSelector:s=!1,isUsageBasedSeatTier:i=!1}=e,n=(0,r.mV)(),l=(0,r.O9)(),o=(0,r.zc)(),c=(0,r.tP)(),m=(0,b.o)(),g=(0,r.Kq)(),{limitActionButton:x}=(0,y.h)({messageLimit:t}),{hasOAuthTokens:p}=function(){var e;let{data:t,isLoading:s}=(0,v.Jh)();return{hasOAuthTokens:null!=(e=null==t?void 0:t.some(e=>!e.is_revoked))&&e,isLoading:s}}(),{windowName:_,status:j}=(0,w.T)(t.windows),M=(null==j?void 0:j.resets_at)||t.resetsAt;if(!M)return null;let S=f.c9.fromSeconds(M),C=n&&m&&!g,A=(()=>{if(i)if(C)return(0,a.jsx)(h.A,{defaultMessage:"Extra usage is required - contact an admin to keep working",id:"Bidiq5CnYF"});else return(0,a.jsx)(h.A,{defaultMessage:"Extra usage is required",id:"fejJ1o01QI"});if("5h"===_)if(C)return(0,a.jsx)(h.A,{defaultMessage:"Session limit resets {time} - contact an admin to keep working",id:"f+LljSJaDw",values:{time:S.toLocaleString(f.c9.TIME_SIMPLE)}});else return(0,a.jsx)(h.A,{defaultMessage:"Session limit reached ∙ resets {time}",id:"m3w/HLXJdF",values:{time:S.toLocaleString(f.c9.TIME_SIMPLE)}});if("7d"===_){let e=S.toFormat("cccc");return C?(0,a.jsx)(h.A,{defaultMessage:"Weekly limit resets {day} {time} - contact an admin to keep working",id:"LUFY3UYYXY",values:{day:e,time:S.toLocaleString(f.c9.TIME_SIMPLE)}}):(0,a.jsx)(h.A,{defaultMessage:"Weekly limit reached ∙ resets {day} {time}",id:"MhyGCtndd7",values:{day:e,time:S.toLocaleString(f.c9.TIME_SIMPLE)}})}if("7d_opus"===_){let e=S.toFormat("cccc");return C?(0,a.jsx)(h.A,{defaultMessage:"Opus limit resets {day} {time} - contact an admin to keep working",id:"ir+wpgGBaT",values:{day:e,time:S.toLocaleString(f.c9.TIME_SIMPLE)}}):(0,a.jsx)(h.A,{defaultMessage:"Opus limit reached ∙ resets {day} {time}",id:"9Di9WqoUCM",values:{day:e,time:S.toLocaleString(f.c9.TIME_SIMPLE)}})}return null})();return(0,a.jsxs)(k.q,{actionButton:C?null:x,minimalUi:!0,children:[A||(s?(0,a.jsx)(h.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}. As an internal user, you can change your tier in the user menu to test different rate limits.",id:"Um8zFcRLL/",values:{time:(0,a.jsx)("span",{className:"inline-block",children:S.toLocaleString(f.c9.TIME_SIMPLE)})}}):o&&c?(0,a.jsx)(h.A,{defaultMessage:"Increase usage for uninterrupted work or continue at {time}.",id:"5QbZN4LMkt",values:{time:(0,a.jsx)("span",{className:"inline-block",children:S.toLocaleString(f.c9.TIME_SIMPLE)})}}):l||n||o?p?(0,a.jsx)(h.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}. <link>Your limits are shared with Claude Code</link>",id:"UrobydPO9o",values:{time:(0,a.jsx)("span",{className:"inline-block",children:S.toLocaleString(f.c9.TIME_SIMPLE)}),link:e=>(0,a.jsx)(d.Y,{href:"/settings/claude-code",children:e})}}):(0,a.jsx)(h.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}.",id:"bXAswF0AK8",values:{time:(0,a.jsx)("span",{className:"inline-block",children:S.toLocaleString(f.c9.TIME_SIMPLE)})}}):(0,a.jsx)(h.A,{defaultMessage:"You are out of free <link>messages</link> until {time}",id:"PKaisys/Ji",values:{time:(0,a.jsx)("span",{className:"inline-block",children:S.toLocaleString(f.c9.TIME_SIMPLE)}),link:e=>(0,a.jsx)(d.Y,{target:"_blank",rel:"noreferrer",href:u.Kf,children:e})}})),(0,a.jsx)(T,{messageLimit:t})]})}let E=e=>{let{messageLimit:t,onDismiss:s}=e,{limitActionButton:i}=(0,y.h)(),{windowName:n,status:r}=(0,w.T)(t.windows),l=(null==r?void 0:r.resets_at)||t.resetsAt;if(!l)return null;let d=f.c9.fromSeconds(l);return(0,a.jsxs)(j.x,{children:[(0,a.jsx)("span",{className:"text-text-300 text-sm",children:"5h"===n?(0,a.jsx)(h.A,{defaultMessage:"Approaching session limit",id:"eufK6+n0Ub"}):"7d"===n?(0,a.jsx)(h.A,{defaultMessage:"Approaching weekly limit",id:"t2T1PWD6TI"}):(0,a.jsx)(h.A,{defaultMessage:"You’re almost out of usage - your limits will reset at {time}",id:"jKI2rDp1ds",values:{time:(0,a.jsx)("span",{className:"inline-block",children:d.toLocaleString(f.c9.TIME_SIMPLE)})}})}),(0,a.jsxs)("span",{children:[i,(0,a.jsx)(o.$,{className:"ml-2 !bg-transparent",size:"icon_xs",variant:"ghost",onClick:s,children:(0,a.jsx)(m.X,{size:12})})]})]})},L=e=>{let{messageLimit:t,onDismiss:s,isBlocking:i}=e;return i?(0,a.jsx)(N,{messageLimit:t}):(0,a.jsx)(I,{messageLimit:t,onDismiss:s})},N=e=>{let{messageLimit:t}=e,s=(0,r.mV)(),i=(0,b.o)(),[n,l]=(0,x.useState)(!1);if(s&&i)return(0,a.jsx)(k.q,{actionButton:null,minimalUi:!0,dangerText:!0,children:(0,a.jsx)(h.A,{defaultMessage:"Limit reached - contact an admin to keep working",id:"f1/9b+4969"})});if((null==t?void 0:t.overageDisabledReason)==="out_of_credits"){let e=(0,a.jsx)("button",{onClick:()=>l(!0),className:"underline text-sm",children:(0,a.jsx)(h.A,{defaultMessage:"Add funds",id:"sx0aSlxLIy"})});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.q,{actionButton:e,minimalUi:!0,dangerText:!0,children:(0,a.jsx)(h.A,{defaultMessage:"Wallet empty",id:"hgChvDBkGs"})}),(0,a.jsx)(p.l,{isOpen:n,onClose:()=>l(!1)})]})}let o=(0,a.jsx)(d.Y,{href:"/settings/usage",className:"text-sm",children:(0,a.jsx)(h.A,{defaultMessage:"Manage",id:"0AzlrbMWV9"})});return(0,a.jsx)(k.q,{actionButton:o,minimalUi:!0,dangerText:!0,children:(0,a.jsx)(h.A,{defaultMessage:"Spending cap reached",id:"e2HH8SvqXl"})})},I=e=>{let{messageLimit:t,onDismiss:s}=e,{windowName:i,status:n}=(0,w.T)(t.windows),r=(null==n?void 0:n.resets_at)||t.resetsAt;if(!r)return null;let l=f.c9.fromSeconds(r);return(0,a.jsxs)(j.x,{children:[(0,a.jsx)("span",{className:"text-text-300 text-sm",children:(()=>{if("5h"===i)return(0,a.jsx)(h.A,{defaultMessage:"Session limit resets {time} ∙ continuing with extra usage",id:"SYg4MwoW+k",values:{time:l.toLocaleString(f.c9.TIME_SIMPLE)}});if("7d"===i){let e=l.toFormat("cccc");return(0,a.jsx)(h.A,{defaultMessage:"Weekly limit resets {day} {time} ∙ continuing with extra usage",id:"wvFU29jyYg",values:{day:e,time:l.toLocaleString(f.c9.TIME_SIMPLE)}})}if("7d_opus"===i){let e=l.toFormat("cccc");return(0,a.jsx)(h.A,{defaultMessage:"Opus limit resets {day} {time} ∙ continuing with extra usage",id:"P3sN2kt3TW",values:{day:e,time:l.toLocaleString(f.c9.TIME_SIMPLE)}})}return(0,a.jsx)(h.A,{defaultMessage:"Limit reached ∙ continuing with extra usage",id:"uWI9rRK6Dw"})})()}),(0,a.jsx)("span",{children:s&&(0,a.jsx)(o.$,{className:"ml-2 !bg-transparent",size:"icon_xs",variant:"ghost",onClick:s,children:(0,a.jsx)(m.X,{size:12})})})]})},T=e=>{let{messageLimit:t}=e,{mutate:s}=(0,n.T)(t.conversationUuid);return(0,c.fS)("can_reset_rate_limits")?(0,a.jsx)(o.$,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>s(),children:(0,a.jsx)(h.A,{defaultMessage:"Reset limits",id:"0Lg76lu7jn"})}):null},P=e=>{var t;let{messageLimit:s,activeOrganization:a}=(0,r.YL)(),l=(0,n.$)(),o=(0,i.Z3)(e),d=(null==s?void 0:s.type)!=="within_limit"&&null!=(t=null==s?void 0:s.conversationUuid)?t:null,u=(0,i.Z3)(d);(0,x.useEffect)(()=>{(null==a?void 0:a.uuid)&&s&&"within_limit"!==s.type&&u!==o&&l({type:"within_limit"},a.uuid,e)},[e,u,a,s,o,l])}},0x12c402068:(e,t,s)=>{s.d(t,{x:()=>n});var a=s(0x52e2618c);function i(){let e=(0,a._)(["\n  font-normal\n  text-[0.65rem]\n  sm:text-xs\n  w-full\n  flex\n  gap-1.5\n  items-center\n  justify-between\n"]);return i=function(){return e},e}let n=s(0x14fe1b2a5).J.div(i())},0x142811145:(e,t,s)=>{s.d(t,{Ar:()=>a.Ar,Kh:()=>i.K,rM:()=>n.r,wk:()=>n.w});var a=s(0x1e134e4dd),i=s(0x37d0d66c),n=s(0x228fcd00)},0x151bca12b:(e,t,s)=>{s.d(t,{R9:()=>b,VF:()=>p});var a=s(0x22102fd88),i=s(0xf32c56dd),n=s(0x211a8be49),r=s(0x20e00cddd),l=s(0x1457b343f),o=s(0x1d0eef17),d=s(0xfc89b4a4),u=s(0x654fb8f7),c=s(0x142811145),m=s(0x23977865),g=s(0x1bd175d8c),f=s(0x12524db6),x=s(0x14de19ae8);let h=(0,d.createContext)({isExpanded:!1,isInvisibleWhenNotExpanded:!1,setIsExpanded:()=>void 0,closeSidebarOnMobile:()=>void 0,isMobile:!1,isClaudeAppGAMac:!1,setForceMobileLayout:()=>void 0,isShortcutsModalOpen:!1,setIsShortcutsModalOpen:()=>void 0});function p(){return(0,d.useContext)(h)}function b(e){let{children:t}=e,s=(0,i.st)(),[p,b]=(0,n.j)(r.eT.SIDEBAR_PINNED,!1),[_,v]=(0,n.j)(r.eT.SIDEBAR_VISIBLE_ON_LOAD,!1),{width:j}=(0,l.l)(),[k,w]=(0,d.useState)(!1),y=k||(0===j?!_:j<1024),M=(0,g.V)(m.E_),[S,C]=(0,d.useState)(_&&p),[A,E]=(0,d.useState)(!1),L=y||M,N=(0,d.useRef)("initial_load"),I=(0,d.useRef)(!1);!function(){var e;let{activeOrganization:t}=(0,x.YL)(),{value:s}=(0,f.fd)(),a=(0,f.FE)(),{orgShortname:i}=(0,f.J)(),n=(null==t||null==(e=t.raven_configuration)?void 0:e.haystack_project_name)||i;(0,c.Kh)("ask_your_org",void 0,{disabled:!s,description:n?"Ask ".concat(n):void 0,href:a})}();let{matchShortcut:T}=(0,c.wk)("toggle_sidebar"),{matchShortcut:P}=(0,c.wk)("shortcuts_modal"),{matchShortcut:Y}=(0,c.wk)("settings"),{matchShortcut:D}=(0,c.wk)("file_upload"),F=(0,d.useCallback)(()=>{N.current="keyboard_shortcut",C(e=>!e)},[]),O=(0,d.useCallback)(()=>{E(!0)},[]),W=(0,d.useCallback)(()=>{let e=document.getElementById((0,u.h)("onpage"))||document.getElementById((0,u.h)("modal"))||document.getElementById((0,u.h)("bottom"));e instanceof HTMLInputElement&&e.click()},[]);(0,c.Kh)("toggle_sidebar",F),(0,c.Kh)("shortcuts_modal",O),(0,c.Kh)("file_upload",W),(0,o.M)("keydown",e=>{T(e)&&(e.preventDefault(),F()),P(e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),O()),Y(e)&&(e.preventDefault(),window.location.href="/settings"),D(e)&&(e.preventDefault(),W())});let K=(0,d.useMemo)(()=>({isExpanded:S,isInvisibleWhenNotExpanded:L,setIsExpanded:e=>{"initial_load"===N.current&&(N.current="user_toggle"),C(e),y||b(e)},closeSidebarOnMobile:()=>{y&&S&&(N.current="user_toggle",C(!1))},isMobile:y,isClaudeAppGAMac:M,setForceMobileLayout:w,isShortcutsModalOpen:A,setIsShortcutsModalOpen:E}),[S,L,y,M,b,A]);return(0,d.useEffect)(()=>{y?(v(!1),N.current="responsive_layout",C(!1)):(v(!0),N.current="responsive_layout",C(p))},[y,v,C,p]),(0,d.useEffect)(()=>{if(!I.current){I.current=!0,s.track({event_key:"claudeai.sidebar.state_set",is_expanded:S,source:"initial_load"});return}let e=N.current;s.track({event_key:"claudeai.sidebar.state_set",is_expanded:S,source:e}),N.current="initial_load"},[S,s]),(0,a.jsx)(h.Provider,{value:K,children:t})}},0x1e134e4dd:(e,t,s)=>{s.d(t,{Ar:()=>i});var a=s(0xb91ccc43);s(0x21d170f9);let i=Object.fromEntries(Object.entries({...{quick_chat:{description:"Quick chat",category:"shortcut",shortcut:{bindings:[{key:"k",modifiers:["cmd"],platform:"mac"},{key:"k",modifiers:["ctrl"],platform:"non-mac"}]},icon:a.C1},toggle_sidebar:{description:"Toggle sidebar",category:"shortcut",shortcut:{bindings:[{key:".",modifiers:["cmd"],platform:"mac"},{key:".",modifiers:["ctrl"],platform:"non-mac"}]}},extended_thinking:{description:"Toggle extended thinking",category:"shortcut",shortcut:{bindings:[{key:"e",modifiers:["cmd","shift"],platform:"mac"},{key:"e",modifiers:["ctrl","shift"],platform:"non-mac"}]}},incognito:{description:"Incognito chat",category:"shortcut",shortcut:{bindings:[{key:"i",modifiers:["cmd","shift"],platform:"mac"},{key:"i",modifiers:["ctrl","shift"],platform:"non-mac"}]},icon:a.kbL,href:"/new?incognito=true"},shortcuts_modal:{description:"Keyboard shortcuts",category:"shortcut",shortcut:{bindings:[{key:"/",modifiers:["cmd"],platform:"mac"},{key:"/",modifiers:["ctrl"],platform:"non-mac"}]}},settings:{description:"Settings",category:"shortcut",shortcut:{bindings:[{key:",",modifiers:["cmd","shift"],platform:"mac"},{key:",",modifiers:["ctrl","shift"],platform:"non-mac"}]},icon:a.wB_,href:"/settings"},file_upload:{description:"Upload file",category:"shortcut",shortcut:{bindings:[{key:"u",modifiers:["cmd"],platform:"mac"},{key:"u",modifiers:["ctrl"],platform:"non-mac"}]}},share_chat:{description:"Share chat",category:"action"},projects:{description:"Go to Projects",category:"action",href:"/projects",icon:a.JtL},claude_code:{description:"Claude Code",searchHints:["terminal","coding"],category:"action",icon:a.CyN,href:"/code"}}}).filter(e=>{let[,t]=e;return t.shortcut}).map(e=>{let[t,s]=e;return[t,{bindings:s.shortcut.bindings,description:s.description}]}))},0x20567b754:(e,t,s)=>{s.d(t,{L:()=>l});var a=s(0x22102fd88),i=s(0x1a1f6dda6),n=s(0x160045b25),r=s(0x1dc411c0f);function l(e){let{warning:t,placement:s,theme:l,onClick:o}=e,d=(0,i.A)("w-full border-0.5 relative z-[5] px-3.5","bottom"===s?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5",{"bg-danger-900 border-transparent":"danger"===l,"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":"pro"===l,"bg-bg-300 border-transparent":"info"===l,"bg-bg-200 border-transparent":"chin"===l,"hover:bg-bg-300 transition-colors":"chin"===l&&!!o});return(0,a.jsx)(n.N,{children:t&&(0,a.jsx)(r.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:o?(0,a.jsx)("button",{className:(0,i.A)(d),onClick:o,children:t}):(0,a.jsx)("div",{className:d,children:t})})})}},0x211a8be49:(e,t,s)=>{s.d(t,{j:()=>r,y:()=>n});var a=s(0x24553dffe),i=s(0xfc89b4a4);let n=e=>{let{shouldFocus:t,target:s,delayMs:a=100}=e;(0,i.useEffect)(()=>{if(t&&s){let e=setTimeout(()=>{var e;null==(e=s.current)||e.focus()},a);return()=>clearTimeout(e)}},[t,s,a])},r=(e,t)=>{let s=(0,a.l)(),n=s.get(e),[r,l]=(0,i.useState)(void 0!==n?"true"===n:t);return[r,(0,i.useCallback)(t=>{l(a=>{let i="function"==typeof t?t(a):t;return s.set(e,i.toString()),i})},[s,e])]}},0x242212ea2:(e,t,s)=>{s.d(t,{h:()=>c});var a=s(0x22102fd88),i=s(0xa5acf583),n=s(0x14de19ae8),r=s(0x22fc8d729),l=s(0xfc89b4a4),o=s(0x38e6572),d=s(0xe0745a8f),u=s(0xeaff4de);function c(){let{allowSelfUpgrade:e=!0,messageLimit:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=function(e){let t=(0,n.UC)(),s=(0,n.wi)(),a=(0,n.bu)(),r=(0,n.tP)(),l=(0,n.Kq)(),o=(0,i.fZ)(),c=(0,n.mV)(),g=(0,d.o)(),f=(0,u.Hv)();return o?(t||a||r)&&e?t?s||a||r?"subscribe":"subscribe-pro-only":a?m({isOveragesUpgradeCtaExperimentActive:f,isOveragesProvisioningAvailable:g,canManageBilling:l,isRaven:c})?"overages-or-upgrade":"subscribe-max":r?m({isOveragesUpgradeCtaExperimentActive:f,isOveragesProvisioningAvailable:g,canManageBilling:l,isRaven:c})?"overages-or-upgrade":"subscribe-max-20x":"none":g?c?"enable-overages":"overages-or-upgrade":"none":"contact-sales"}(e),r=null;switch(s){case"contact-sales":r=(0,a.jsx)(g,{});break;case"subscribe":r=(0,a.jsx)(f,{});break;case"subscribe-pro-only":r=(0,a.jsx)(x,{});break;case"subscribe-max":r=(0,a.jsx)(h,{});break;case"subscribe-max-20x":r=(0,a.jsx)(p,{});break;case"enable-overages":r=(0,a.jsx)(b,{});break;case"overages-or-upgrade":r=(0,a.jsx)(_,{messageLimit:t});break;case"none":r=null}return{limitActionButtonType:s,limitActionButton:r}}function m(e){let{isOveragesUpgradeCtaExperimentActive:t,isOveragesProvisioningAvailable:s,canManageBilling:a,isRaven:i}=e;return t&&s&&a&&!i}function g(){let{websiteBaseUrl:e}=(0,i._r)();return(0,a.jsx)(r.Y,{href:"".concat(e,"/contact-sales"),className:"text-sm",children:(0,a.jsx)(o.A,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function f(){return(0,a.jsx)(r.Y,{href:"/upgrade?hide_free=true",className:"text-sm",children:(0,a.jsx)(o.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function x(){return(0,a.jsx)(r.Y,{href:"/upgrade/pro",className:"text-sm",children:(0,a.jsx)(o.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function h(){return(0,a.jsx)(r.Y,{href:"/upgrade?hide_pro=true",className:"text-sm",children:(0,a.jsx)(o.A,{defaultMessage:"Subscribe to Max",id:"8ACH3Vf732"})})}function p(){return(0,a.jsx)(r.Y,{href:"/upgrade",className:"text-sm",children:(0,a.jsx)(o.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function b(){let e=(0,n.mV)(),t=(0,n.Kq)();return(0,a.jsx)(r.Y,{href:e&&t?"/admin-settings/usage":"/settings/usage",className:"text-sm",children:(0,a.jsx)(o.A,{defaultMessage:"Keep working",id:"YJG5oUjsVT"})})}function _(e){let{messageLimit:t}=e,s=l.useRef(!1);(0,l.useEffect)(()=>{s.current||(null===u.XI||void 0===u.XI||(0,u.XI)(t),s.current=!0)},[]);let i=(0,l.useCallback)(()=>{null===u.XI||void 0===u.XI||(0,u.XI)(t)},[t]);return(0,a.jsx)(r.Y,{className:"text-sm",onClick:i,children:(0,a.jsx)(o.A,{defaultMessage:"Keep working",id:"YJG5oUjsVT"})})}}}]);
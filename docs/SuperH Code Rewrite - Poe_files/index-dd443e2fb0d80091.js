(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{48312:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(25925)}])},58586:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"BotSelectorHomeMain_BotSelectorPill_bot",selections:[{kind:"ScalarField",name:"id"},{alias:"smallPicture",args:[{kind:"Literal",name:"size",value:"small"}],kind:"LinkedField",name:"picture",plural:!1,selections:[{kind:"FragmentSpread",name:"BotImage_picture"}],storageKey:'picture(size:"small")'},{kind:"FragmentSpread",name:"BotImage_bot"},{kind:"FragmentSpread",name:"botHelpers_useBotDisplayName_bot"}],type:"Bot"};t.hash="5221e564d0e59a44b71c669fca0d5be4",a.default=t},36433:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"BotSelectorHomeMain_bots",selections:[{kind:"ScalarField",name:"id"},{kind:"FragmentSpread",name:"BotSelectorHomeMain_BotSelectorPill_bot"}],type:"Bot"};t.hash="555452187339f510869d129673372ae0",a.default=t},97706:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatHomeMainActionButtons_viewer",selections:[{alias:"poeEnableMultiUserInvite",args:[{kind:"Literal",name:"gateName",value:"poe_enable_multi_user_invite"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_multi_user_invite")'}],type:"Viewer"};t.hash="4678443edad59470e8ca8a0baff4e90b",a.default=t},5371:function(e,a,n){"use strict";var t,i,l,r,s,o,d,c,m,u,p,g,_,k,b;n.r(a);let h=(t={kind:"ScalarField",name:"uid"},i={kind:"ScalarField",name:"id"},l={kind:"ScalarField",name:"subscriptionProductId"},s=[r={kind:"Literal",name:"paidSubscriptionPeriod",value:"yearly"}],o=[i],m={kind:"Literal",name:"optionsContext",value:"insufficient_points"},u={kind:"ScalarField",name:"displayName"},p={kind:"ScalarField",name:"amountDueToday"},g={kind:"ScalarField",name:"subscriptionRenewalTime"},_={alias:"monthlyCost",args:c=[d={kind:"Literal",name:"paidSubscriptionPeriod",value:"monthly"}],kind:"ScalarField",name:"costPerPeriod",storageKey:'costPerPeriod(paidSubscriptionPeriod:"monthly")'},{fragment:{argumentDefinitions:[],kind:"Fragment",name:"ChatHomeMainInputContainerOptimisticViewerQuery",selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"HandleBotLandingPageInner_viewer"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"ChatHomeMainInputContainerOptimisticViewerQuery",selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[t,i,{kind:"ScalarField",name:"__typename"}]},{kind:"ScalarField",name:"creationTime"},{kind:"ScalarField",name:"hasRecentlyUnsubscribed"},{alias:"badgingEnabledProportion",args:[{kind:"Literal",name:"gateName",value:"poe_badging_enabled_proportion"}],kind:"ScalarField",name:"floatGate",storageKey:'floatGate(gateName:"poe_badging_enabled_proportion")'},{alias:"useInFrameCanvasServerRelay",args:[{kind:"Literal",name:"gateName",value:"poe_web_canvas_use_in_frame_canvas_server_relay"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_canvas_use_in_frame_canvas_server_relay")'},{alias:"enableCanvasAppDebugMode",args:[{kind:"Literal",name:"gateName",value:"poe_canvas_enable_debug_mode"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_canvas_enable_debug_mode")'},{alias:"persistenceAndSyncEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_canvas_data_store"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_canvas_data_store")'},{alias:"codeEditorCanvasBotId",args:[{kind:"Literal",name:"gateName",value:"poe_web_code_editor_canvas_bot_id"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_code_editor_canvas_bot_id")'},{alias:"canvasPreviewUrlOverride",args:[{kind:"Literal",name:"gateName",value:"poe_web_canvas_preview_url_override"}],kind:"ScalarField",name:"stringGate",storageKey:'stringGate(gateName:"poe_web_canvas_preview_url_override")'},{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'},{alias:"poeEnableMultiUserInvite",args:[{kind:"Literal",name:"gateName",value:"poe_enable_multi_user_invite"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_multi_user_invite")'},t,{alias:"privateBotQueryAccessEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_bot_query_private_bot_access_enabled"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_bot_query_private_bot_access_enabled")'},{alias:"botQueryDisabledBotIds",args:[{kind:"Literal",name:"gateName",value:"poe_bot_query_disabled_bot_ids"}],kind:"ScalarField",name:"integerArrayGate",storageKey:'integerArrayGate(gateName:"poe_bot_query_disabled_bot_ids")'},i,{alias:"enablePrivacyShieldUpdates",args:[{kind:"Literal",name:"gateName",value:"poe_web_privacy_shield_updates"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_privacy_shield_updates")'},{alias:"shouldHideBotInfoCardWithAutoReplyOff",args:[{kind:"Literal",name:"gateName",value:"poe_hide_bot_info_card_with_auto_reply_off"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_hide_bot_info_card_with_auto_reply_off")'},{alias:"poeWebChatNewScrollBehavior",args:[{kind:"Literal",name:"gateName",value:"poe_web_chat_new_scroll_behavior"}],kind:"ScalarField",name:"stringGate",storageKey:'stringGate(gateName:"poe_web_chat_new_scroll_behavior")'},{alias:"poeHideLeftSideMessageHeaderIfSameSender",args:[{kind:"Literal",name:"gateName",value:"poe_hide_left_side_message_header_if_same_sender"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_hide_left_side_message_header_if_same_sender")'},{alias:"markdownCharacterLimit",args:[{kind:"Literal",name:"gateName",value:"poe_web_markdown_character_limit"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_markdown_character_limit")'},{alias:"botMarkdownCharacterLimit",args:[{kind:"Literal",name:"gateName",value:"poe_web_bot_markdown_character_limit"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_bot_markdown_character_limit")'},{kind:"ScalarField",name:"promptBotImageDomainWhitelist"},{alias:"enableScriptingCodeReference",args:[{kind:"Literal",name:"gateName",value:"poe_enable_scripting_code_blocks"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_scripting_code_blocks")'},{alias:"enableScriptBotCreation",args:[{kind:"Literal",name:"gateName",value:"poe_web_script_bot_creation"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_script_bot_creation")'},{alias:"enableMessageReplies",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_message_replies"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_message_replies")'},{alias:"messageBranchingEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_message_branching"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_message_branching")'},{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"},i,{concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionProduct",plural:!1,selections:[{kind:"ScalarField",name:"paidSubscriptionPeriod"},i,l]},{alias:"yearlyOptions",args:s,concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:o,storageKey:'subscriptionOptions(paidSubscriptionPeriod:"yearly")'},{alias:"monthlyOptions",args:c,concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:o,storageKey:'subscriptionOptions(paidSubscriptionPeriod:"monthly")'},{alias:"yearlyInsufficientPointsUpgradeOptions",args:[m,r],concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:[l,u,p,g,{alias:"yearlyCost",args:s,kind:"ScalarField",name:"costPerPeriod",storageKey:'costPerPeriod(paidSubscriptionPeriod:"yearly")'},_,k={kind:"ScalarField",name:"includedItemStrings"},b={kind:"ScalarField",name:"webPaymentProcessorString"},i],storageKey:'subscriptionOptions(optionsContext:"insufficient_points",paidSubscriptionPeriod:"yearly")'},{alias:"monthlyInsufficientPointsUpgradeOptions",args:[m,d],concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:[l,u,p,g,_,k,b,i],storageKey:'subscriptionOptions(optionsContext:"insufficient_points",paidSubscriptionPeriod:"monthly")'}]},{alias:"poeDebugRegenerateMessage",args:[{kind:"Literal",name:"gateName",value:"poe_debug_regenerate_message"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_debug_regenerate_message")'},{alias:"submitMessageParamsAsDict",args:[{kind:"Literal",name:"gateName",value:"poe_pass_message_params_as_dictionary"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_pass_message_params_as_dictionary")'},{alias:"poeEnableMessageReadReceipts",args:[{kind:"Literal",name:"gateName",value:"poe_enable_message_read_receipts"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_message_read_receipts")'},{alias:"showInteractiveMedia",args:[{kind:"Literal",name:"gateName",value:"poe_enable_user_message_attachments_new_ui"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_user_message_attachments_new_ui")'},{alias:"badgeAtBotMessageCreationEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_badge_at_bot_message_creation"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_badge_at_bot_message_creation")'},{alias:"enableEasierUndoContextClear",args:[{kind:"Literal",name:"gateName",value:"poe_enable_easier_undo_context_clear"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_easier_undo_context_clear")'},{alias:"lastAtMentionEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_add_last_at_mention_to_dropdown"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_add_last_at_mention_to_dropdown")'},{kind:"ScalarField",name:"shouldSeeWebSubscriptionAnnouncement"},{kind:"ScalarField",name:"fileUploadSizeLimits"},{alias:"formattedChatInput",args:[{kind:"Literal",name:"gateName",value:"poe_web_formatted_chat_input"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_formatted_chat_input")'},{alias:"useNewPrivacyCheck",args:[{kind:"Literal",name:"gateName",value:"poe_use_script_privacy_check"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_script_privacy_check")'}]}]},params:{id:"bfc3e08cd7e67934af0d589039a1f4331f38d458897d748529a72e5dfbc315e5",metadata:{},name:"ChatHomeMainInputContainerOptimisticViewerQuery",operationKind:"query",text:null}});h.hash="e103b5a206ed33567e4af2b481455feb",a.default=h},28797:function(e,a,n){"use strict";var t;n.r(a);let i={argumentDefinitions:[],kind:"Fragment",name:"ChatHomeMainInputContainer_bot",selections:[t={kind:"ScalarField",name:"botId"},{kind:"FragmentSpread",name:"ChatMessageInputContainer_bot"},{kind:"InlineDataFragmentSpread",name:"logHelpers_getBotLogData_bot",selections:[t,{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"useSendMessageFromHomePage_bot"}],type:"Bot"};i.hash="051bf96ef66e28a47456033f0fa2a2c5",a.default=i},63527:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"ChatHomeMainInputContainer_selectBot"};t.hash="b1315de8a5a2295173e13b5924c21d14",a.default=t},59409:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatHomeMainInputContainer_viewer",selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{kind:"ScalarField",name:"id"}]},{kind:"FragmentSpread",name:"ChatMessageInputContainer_viewer"},{alias:"enableMessageDrafts",args:[{kind:"Literal",name:"gateName",value:"poe_enable_message_drafts"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_message_drafts")'},{kind:"FragmentSpread",name:"useSendMessageFromHomePage_viewer"}],type:"Viewer"};t.hash="af5730b41c83d04c1087205e2a8135be",a.default=t},62054:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatHomeMain_useLoginEffect_viewer",selections:[{kind:"ScalarField",name:"primaryEmail"},{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{kind:"ScalarField",name:"fullName"}]},{kind:"ScalarField",name:"showDownloadAppPrompt"}],type:"Viewer"};t.hash="bdddb3abdc9176eb5bac810aabeccc78",a.default=t},7252:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatHomeMain_viewer",selections:[{kind:"FragmentSpread",name:"ChatHomeMainInputContainer_viewer"},{kind:"FragmentSpread",name:"ChatHomeMain_useLoginEffect_viewer"},{kind:"FragmentSpread",name:"useHomeBotSelector_viewer"},{kind:"FragmentSpread",name:"PaywallContextWrapper_viewer"},{kind:"FragmentSpread",name:"ChatHomeMainActionButtons_viewer"},{kind:"FragmentSpread",name:"useSendMessageFromHomePage_viewer"}],type:"Viewer"};t.hash="b10d7f85679a6172f3d2d043ef2ad7f7",a.default=t},71745:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_messageAttachment",selections:[{kind:"FragmentSpread",name:"FileInfo_attachment"}],type:"MessageAttachment"};t.hash="5c1de64091b0951dc9cce2f9eac236f1",a.default=t},79315:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageInputAttachments_messageAttachments",selections:[{kind:"FragmentSpread",name:"ChatMessageInputAttachments_ChatMessageInputAttachment_messageAttachment"}],type:"MessageAttachment"};t.hash="eeaee6404e1a35d10e11dfb47510ff60",a.default=t},80752:function(e,a,n){"use strict";var t,i;n.r(a);let l={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputContainer_bot",selections:[t={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"allowsImageAttachments"},{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"customUIDefinition"},{kind:"FragmentSpread",name:"botHelpers_useDeletion_bot"},{kind:"FragmentSpread",name:"useFileUpload_bot"},i={kind:"InlineDataFragmentSpread",name:"paywallContext_openPaywall_bot",selections:[{kind:"InlineDataFragmentSpread",name:"logHelpers_getBotLogData_bot",selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"PaywallOpener_bot"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_useMaybeBlockOnPaywall_bot",selections:[i],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_bot",selections:[t],argumentDefinitions:[]}],type:"Bot"};l.hash="873547ebf2024fa367f833bb49d6a47a",a.default=l},91305:function(e,a,n){"use strict";var t,i,l,r;n.r(a);let s=(t={kind:"ScalarField",name:"chatId"},l=[i={kind:"ScalarField",name:"id"}],{argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputContainer_chat",selections:[{kind:"FragmentSpread",name:"ChatInputSelector_chat"},{kind:"InlineDataFragmentSpread",name:"useFileUpload_chat",selections:[t],argumentDefinitions:[]},{kind:"FragmentSpread",name:"useMentionedBotsInputs_chat"},{kind:"InlineDataFragmentSpread",name:"sendMessage_chat",selections:[i,t,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[i,{kind:"ScalarField",name:"handle"}]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_chat",selections:l,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_chat",selections:[i,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"ScalarField",name:"hasMarkdownRendering"}]}],argumentDefinitions:[]}],argumentDefinitions:[]},r={kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_bot",selections:l,argumentDefinitions:[]}]},r],type:"Chat"});s.hash="77c11396ba7bdc66ba39ef04d5e6656e",a.default=s},52103:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageInputContainer_messageEdges",selections:[{kind:"FragmentSpread",name:"ChatMessageTextArea_messageEdges"}],type:"MessageEdge"};t.hash="3763d1e0a57ccedfde9ee810abab3e3b",a.default=t},4027:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageInputContainer_viewer",selections:[{kind:"ScalarField",name:"fileUploadSizeLimits"},{alias:"submitMessageParamsAsDict",args:[{kind:"Literal",name:"gateName",value:"poe_pass_message_params_as_dictionary"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_pass_message_params_as_dictionary")'},{kind:"InlineDataFragmentSpread",name:"subscriptionHelpers_getShouldShowPaywall_viewer",selections:[{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"}]}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"useFileUpload_viewer"},{kind:"FragmentSpread",name:"ChatMessageTextArea_viewer"},{kind:"InlineDataFragmentSpread",name:"sendMessage_viewer",selections:[{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'}],argumentDefinitions:[]},{kind:"FragmentSpread",name:"ChatInputSelector_viewer"}],type:"Viewer"};t.hash="4ff82a5a254cfddc5ccd78b6b34d455c",a.default=t},33848:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"ChatMessageTextArea_getLastHumanMessageText_messageEdge"};t.hash="a01c79c1084fa7fcca797236c2cf1604",a.default=t},28159:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageTextArea_messageEdges",selections:[{kind:"FragmentSpread",name:"ChatMessageTextArea_useOnKeyDown_messageEdges"}],type:"MessageEdge"};t.hash="adef175ef9e8eb0b392205c0b7ec1e41",a.default=t},45830:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ChatMessageTextArea_useOnKeyDown_messageEdges",selections:[{kind:"InlineDataFragmentSpread",name:"ChatMessageTextArea_getLastHumanMessageText_messageEdge",selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"ScalarField",name:"text"},{kind:"InlineDataFragmentSpread",name:"messageHelpers_isHumanMessage",selections:[{kind:"ScalarField",name:"author"}],argumentDefinitions:[]}]}],argumentDefinitions:[]}],type:"MessageEdge"};t.hash="326ac8a25d146f97c1aab77fcfc8ef9b",a.default=t},17971:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"ChatMessageTextArea_viewer",selections:[{kind:"ScalarField",name:"id"},{alias:"formattedChatInput",args:[{kind:"Literal",name:"gateName",value:"poe_web_formatted_chat_input"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_formatted_chat_input")'}],type:"Viewer"};t.hash="90a809335bb616edc8c85932ca13e5f6",a.default=t},19716:function(e,a,n){"use strict";var t,i,l,r,s,o,d,c,m,u,p,g,_,k,b,h,f,F,S;n.r(a);let y=(t=[{defaultValue:null,kind:"LocalArgument",name:"botId"}],i=[{kind:"Variable",name:"botId",variableName:"botId"}],l={kind:"ScalarField",name:"id"},r={kind:"ScalarField",name:"displayName"},s={kind:"TypeDiscriminator",abstractKey:"__isNode"},o={kind:"ScalarField",name:"__typename"},d={kind:"ScalarField",name:"language"},c={kind:"ScalarField",name:"subscriptionProductId"},u=[m={kind:"Literal",name:"paidSubscriptionPeriod",value:"yearly"}],p=[l],k={kind:"Literal",name:"optionsContext",value:"insufficient_points"},b={kind:"ScalarField",name:"amountDueToday"},h={kind:"ScalarField",name:"subscriptionRenewalTime"},f={alias:"monthlyCost",args:_=[g={kind:"Literal",name:"paidSubscriptionPeriod",value:"monthly"}],kind:"ScalarField",name:"costPerPeriod",storageKey:'costPerPeriod(paidSubscriptionPeriod:"monthly")'},{fragment:{argumentDefinitions:t,kind:"Fragment",name:"OptimisticChatPageColumnLoaderQuery",selections:[{args:i,concreteType:"Bot",kind:"LinkedField",name:"botById",plural:!1,selections:[{kind:"FragmentSpread",name:"OptimisticChatPageColumn_bot"}]},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"OptimisticChatPageColumn_viewer"}]},{kind:"FragmentSpread",name:"OptimisticChatPageColumn_root"}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"OptimisticChatPageColumnLoaderQuery",selections:[{args:i,concreteType:"Bot",kind:"LinkedField",name:"botById",plural:!1,selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"model"},{kind:"ScalarField",name:"uploadFileSizeLimit"},{kind:"ScalarField",name:"allowsImageAttachments"},l,{kind:"ScalarField",name:"isCreatedByPoeUserAccount"},{kind:"ScalarField",name:"noAccessMessage"},{kind:"ScalarField",name:"allowsClearContext"},{kind:"ScalarField",name:"nickname"},r,{kind:"ScalarField",name:"introduction"},{kind:"ScalarField",name:"conversationStarters"},{kind:"ScalarField",name:"isCanvasOnlyBot"},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"followerCount"},{kind:"ScalarField",name:"monthlyActiveUsers"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PoeUser",kind:"LinkedField",name:"creator",plural:!1,selections:[{kind:"ScalarField",name:"isDeleted"},{args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},{kind:"ScalarField",name:"fullName"},{alias:"nullableHandle",kind:"ScalarField",name:"handle"},l,s]},{kind:"ScalarField",name:"canUserAccessBot"},{kind:"ScalarField",name:"deletionState"},{kind:"LinkedField",name:"picture",plural:!1,selections:[o,{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},{concreteType:"BotPricing",kind:"LinkedField",name:"botPricing",plural:!1,selections:[{kind:"ScalarField",name:"botPricingLabel"}]},{kind:"ScalarField",name:"translatedBotTags"},{kind:"ScalarField",name:"description"},{kind:"ScalarField",name:"poweredBy"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"isPromptPublic"},{kind:"ScalarField",name:"botCategory"},{kind:"ScalarField",name:"viewerIsFollower"},{kind:"ScalarField",name:"shareLink"},{kind:"ScalarField",name:"promptPlaintext"},{kind:"ScalarField",name:"shouldHide"},{kind:"ScalarField",name:"isOfficialBot"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},d]},{kind:"ScalarField",name:"supportsRemix"},{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"customUIDefinition"},{kind:"ScalarField",name:"isDown"},s]},{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"badgingEnabledProportion",args:[{kind:"Literal",name:"gateName",value:"poe_badging_enabled_proportion"}],kind:"ScalarField",name:"floatGate",storageKey:'floatGate(gateName:"poe_badging_enabled_proportion")'},{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[l,o]},{alias:"useInFrameCanvasServerRelay",args:[{kind:"Literal",name:"gateName",value:"poe_web_canvas_use_in_frame_canvas_server_relay"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_canvas_use_in_frame_canvas_server_relay")'},{alias:"enableCanvasAppDebugMode",args:[{kind:"Literal",name:"gateName",value:"poe_canvas_enable_debug_mode"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_canvas_enable_debug_mode")'},{alias:"persistenceAndSyncEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_canvas_data_store"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_canvas_data_store")'},{alias:"codeEditorCanvasBotId",args:[{kind:"Literal",name:"gateName",value:"poe_web_code_editor_canvas_bot_id"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_code_editor_canvas_bot_id")'},{alias:"canvasPreviewUrlOverride",args:[{kind:"Literal",name:"gateName",value:"poe_web_canvas_preview_url_override"}],kind:"ScalarField",name:"stringGate",storageKey:'stringGate(gateName:"poe_web_canvas_preview_url_override")'},{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'},{alias:"poeEnableMultiUserInvite",args:[{kind:"Literal",name:"gateName",value:"poe_enable_multi_user_invite"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_multi_user_invite")'},{kind:"ScalarField",name:"uid"},{alias:"privateBotQueryAccessEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_bot_query_private_bot_access_enabled"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_bot_query_private_bot_access_enabled")'},{alias:"botQueryDisabledBotIds",args:[{kind:"Literal",name:"gateName",value:"poe_bot_query_disabled_bot_ids"}],kind:"ScalarField",name:"integerArrayGate",storageKey:'integerArrayGate(gateName:"poe_bot_query_disabled_bot_ids")'},l,{alias:"enablePrivacyShieldUpdates",args:[{kind:"Literal",name:"gateName",value:"poe_web_privacy_shield_updates"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_privacy_shield_updates")'},{alias:"shouldHideBotInfoCardWithAutoReplyOff",args:[{kind:"Literal",name:"gateName",value:"poe_hide_bot_info_card_with_auto_reply_off"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_hide_bot_info_card_with_auto_reply_off")'},{alias:"poeWebChatNewScrollBehavior",args:[{kind:"Literal",name:"gateName",value:"poe_web_chat_new_scroll_behavior"}],kind:"ScalarField",name:"stringGate",storageKey:'stringGate(gateName:"poe_web_chat_new_scroll_behavior")'},{alias:"poeHideLeftSideMessageHeaderIfSameSender",args:[{kind:"Literal",name:"gateName",value:"poe_hide_left_side_message_header_if_same_sender"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_hide_left_side_message_header_if_same_sender")'},{alias:"markdownCharacterLimit",args:[{kind:"Literal",name:"gateName",value:"poe_web_markdown_character_limit"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_markdown_character_limit")'},{alias:"botMarkdownCharacterLimit",args:[{kind:"Literal",name:"gateName",value:"poe_web_bot_markdown_character_limit"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_bot_markdown_character_limit")'},{kind:"ScalarField",name:"promptBotImageDomainWhitelist"},{alias:"enableScriptingCodeReference",args:[{kind:"Literal",name:"gateName",value:"poe_enable_scripting_code_blocks"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_scripting_code_blocks")'},{alias:"enableScriptBotCreation",args:[{kind:"Literal",name:"gateName",value:"poe_web_script_bot_creation"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_script_bot_creation")'},{alias:"enableMessageReplies",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_message_replies"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_message_replies")'},{alias:"messageBranchingEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_message_branching"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_message_branching")'},{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"},l,{concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionProduct",plural:!1,selections:[{kind:"ScalarField",name:"paidSubscriptionPeriod"},l,c]},{alias:"yearlyOptions",args:u,concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:p,storageKey:'subscriptionOptions(paidSubscriptionPeriod:"yearly")'},{alias:"monthlyOptions",args:_,concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:p,storageKey:'subscriptionOptions(paidSubscriptionPeriod:"monthly")'},{alias:"yearlyInsufficientPointsUpgradeOptions",args:[k,m],concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:[c,r,b,h,{alias:"yearlyCost",args:u,kind:"ScalarField",name:"costPerPeriod",storageKey:'costPerPeriod(paidSubscriptionPeriod:"yearly")'},f,F={kind:"ScalarField",name:"includedItemStrings"},S={kind:"ScalarField",name:"webPaymentProcessorString"},l],storageKey:'subscriptionOptions(optionsContext:"insufficient_points",paidSubscriptionPeriod:"yearly")'},{alias:"monthlyInsufficientPointsUpgradeOptions",args:[k,g],concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:[c,r,b,h,f,F,S,l],storageKey:'subscriptionOptions(optionsContext:"insufficient_points",paidSubscriptionPeriod:"monthly")'}]},{alias:"poeDebugRegenerateMessage",args:[{kind:"Literal",name:"gateName",value:"poe_debug_regenerate_message"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_debug_regenerate_message")'},{alias:"submitMessageParamsAsDict",args:[{kind:"Literal",name:"gateName",value:"poe_pass_message_params_as_dictionary"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_pass_message_params_as_dictionary")'},{alias:"poeEnableMessageReadReceipts",args:[{kind:"Literal",name:"gateName",value:"poe_enable_message_read_receipts"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_message_read_receipts")'},{alias:"showInteractiveMedia",args:[{kind:"Literal",name:"gateName",value:"poe_enable_user_message_attachments_new_ui"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_user_message_attachments_new_ui")'},{alias:"badgeAtBotMessageCreationEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_badge_at_bot_message_creation"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_badge_at_bot_message_creation")'},{alias:"enableEasierUndoContextClear",args:[{kind:"Literal",name:"gateName",value:"poe_enable_easier_undo_context_clear"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_easier_undo_context_clear")'},{alias:"lastAtMentionEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_add_last_at_mention_to_dropdown"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_add_last_at_mention_to_dropdown")'},{kind:"ScalarField",name:"shouldSeeWebSubscriptionAnnouncement"},{kind:"ScalarField",name:"creationTime"},{kind:"ScalarField",name:"fileUploadSizeLimits"},{alias:"formattedChatInput",args:[{kind:"Literal",name:"gateName",value:"poe_web_formatted_chat_input"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_formatted_chat_input")'},{alias:"useNewPrivacyCheck",args:[{kind:"Literal",name:"gateName",value:"poe_use_script_privacy_check"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_script_privacy_check")'}]},{kind:"ScalarField",name:"supportedPreviewsContentTypes"},{concreteType:"ExecutableLanguageInfo",kind:"LinkedField",name:"supportedExecutableLanguages",plural:!0,selections:[d,l]}]},params:{id:"24307c77dc6432d9347fcb227a89a8a0bd67a73e87c00170f663d25b68284c6d",metadata:{},name:"OptimisticChatPageColumnLoaderQuery",operationKind:"query",text:null}});y.hash="596e9294fee57311c506ad3744f9a09a",a.default=y},576:function(e,a,n){"use strict";var t,i,l,r,s,o,d,c,m,u,p,g,_,k;n.r(a);let b=(t={kind:"ScalarField",name:"id"},i={kind:"ScalarField",name:"subscriptionProductId"},r=[l={kind:"Literal",name:"paidSubscriptionPeriod",value:"yearly"}],s=[t],c={kind:"Literal",name:"optionsContext",value:"insufficient_points"},m={kind:"ScalarField",name:"displayName"},u={kind:"ScalarField",name:"amountDueToday"},p={kind:"ScalarField",name:"subscriptionRenewalTime"},g={alias:"monthlyCost",args:d=[o={kind:"Literal",name:"paidSubscriptionPeriod",value:"monthly"}],kind:"ScalarField",name:"costPerPeriod",storageKey:'costPerPeriod(paidSubscriptionPeriod:"monthly")'},{fragment:{argumentDefinitions:[],kind:"Fragment",name:"OptimisticChatPageColumnLoader_useViewerAndRootQuery",selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"OptimisticChatPageColumn_viewer"}]},{kind:"FragmentSpread",name:"OptimisticChatPageColumn_root"}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"OptimisticChatPageColumnLoader_useViewerAndRootQuery",selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"badgingEnabledProportion",args:[{kind:"Literal",name:"gateName",value:"poe_badging_enabled_proportion"}],kind:"ScalarField",name:"floatGate",storageKey:'floatGate(gateName:"poe_badging_enabled_proportion")'},{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[t,{kind:"ScalarField",name:"__typename"}]},{alias:"useInFrameCanvasServerRelay",args:[{kind:"Literal",name:"gateName",value:"poe_web_canvas_use_in_frame_canvas_server_relay"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_canvas_use_in_frame_canvas_server_relay")'},{alias:"enableCanvasAppDebugMode",args:[{kind:"Literal",name:"gateName",value:"poe_canvas_enable_debug_mode"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_canvas_enable_debug_mode")'},{alias:"persistenceAndSyncEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_canvas_data_store"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_canvas_data_store")'},{alias:"codeEditorCanvasBotId",args:[{kind:"Literal",name:"gateName",value:"poe_web_code_editor_canvas_bot_id"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_code_editor_canvas_bot_id")'},{alias:"canvasPreviewUrlOverride",args:[{kind:"Literal",name:"gateName",value:"poe_web_canvas_preview_url_override"}],kind:"ScalarField",name:"stringGate",storageKey:'stringGate(gateName:"poe_web_canvas_preview_url_override")'},{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'},{alias:"poeEnableMultiUserInvite",args:[{kind:"Literal",name:"gateName",value:"poe_enable_multi_user_invite"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_multi_user_invite")'},{kind:"ScalarField",name:"uid"},{alias:"privateBotQueryAccessEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_bot_query_private_bot_access_enabled"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_bot_query_private_bot_access_enabled")'},{alias:"botQueryDisabledBotIds",args:[{kind:"Literal",name:"gateName",value:"poe_bot_query_disabled_bot_ids"}],kind:"ScalarField",name:"integerArrayGate",storageKey:'integerArrayGate(gateName:"poe_bot_query_disabled_bot_ids")'},t,{alias:"enablePrivacyShieldUpdates",args:[{kind:"Literal",name:"gateName",value:"poe_web_privacy_shield_updates"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_privacy_shield_updates")'},{alias:"shouldHideBotInfoCardWithAutoReplyOff",args:[{kind:"Literal",name:"gateName",value:"poe_hide_bot_info_card_with_auto_reply_off"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_hide_bot_info_card_with_auto_reply_off")'},{alias:"poeWebChatNewScrollBehavior",args:[{kind:"Literal",name:"gateName",value:"poe_web_chat_new_scroll_behavior"}],kind:"ScalarField",name:"stringGate",storageKey:'stringGate(gateName:"poe_web_chat_new_scroll_behavior")'},{alias:"poeHideLeftSideMessageHeaderIfSameSender",args:[{kind:"Literal",name:"gateName",value:"poe_hide_left_side_message_header_if_same_sender"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_hide_left_side_message_header_if_same_sender")'},{alias:"markdownCharacterLimit",args:[{kind:"Literal",name:"gateName",value:"poe_web_markdown_character_limit"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_markdown_character_limit")'},{alias:"botMarkdownCharacterLimit",args:[{kind:"Literal",name:"gateName",value:"poe_web_bot_markdown_character_limit"}],kind:"ScalarField",name:"integerGate",storageKey:'integerGate(gateName:"poe_web_bot_markdown_character_limit")'},{kind:"ScalarField",name:"promptBotImageDomainWhitelist"},{alias:"enableScriptingCodeReference",args:[{kind:"Literal",name:"gateName",value:"poe_enable_scripting_code_blocks"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_scripting_code_blocks")'},{alias:"enableScriptBotCreation",args:[{kind:"Literal",name:"gateName",value:"poe_web_script_bot_creation"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_script_bot_creation")'},{alias:"enableMessageReplies",args:[{kind:"Literal",name:"gateName",value:"poe_web_enable_message_replies"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_enable_message_replies")'},{alias:"messageBranchingEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_message_branching"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_message_branching")'},{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"},t,{concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionProduct",plural:!1,selections:[{kind:"ScalarField",name:"paidSubscriptionPeriod"},t,i]},{alias:"yearlyOptions",args:r,concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:s,storageKey:'subscriptionOptions(paidSubscriptionPeriod:"yearly")'},{alias:"monthlyOptions",args:d,concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:s,storageKey:'subscriptionOptions(paidSubscriptionPeriod:"monthly")'},{alias:"yearlyInsufficientPointsUpgradeOptions",args:[c,l],concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:[i,m,u,p,{alias:"yearlyCost",args:r,kind:"ScalarField",name:"costPerPeriod",storageKey:'costPerPeriod(paidSubscriptionPeriod:"yearly")'},g,_={kind:"ScalarField",name:"includedItemStrings"},k={kind:"ScalarField",name:"webPaymentProcessorString"},t],storageKey:'subscriptionOptions(optionsContext:"insufficient_points",paidSubscriptionPeriod:"yearly")'},{alias:"monthlyInsufficientPointsUpgradeOptions",args:[c,o],concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionOptions",plural:!0,selections:[i,m,u,p,g,_,k,t],storageKey:'subscriptionOptions(optionsContext:"insufficient_points",paidSubscriptionPeriod:"monthly")'}]},{alias:"poeDebugRegenerateMessage",args:[{kind:"Literal",name:"gateName",value:"poe_debug_regenerate_message"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_debug_regenerate_message")'},{alias:"submitMessageParamsAsDict",args:[{kind:"Literal",name:"gateName",value:"poe_pass_message_params_as_dictionary"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_pass_message_params_as_dictionary")'},{alias:"poeEnableMessageReadReceipts",args:[{kind:"Literal",name:"gateName",value:"poe_enable_message_read_receipts"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_message_read_receipts")'},{alias:"showInteractiveMedia",args:[{kind:"Literal",name:"gateName",value:"poe_enable_user_message_attachments_new_ui"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_user_message_attachments_new_ui")'},{alias:"badgeAtBotMessageCreationEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_badge_at_bot_message_creation"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_badge_at_bot_message_creation")'},{alias:"enableEasierUndoContextClear",args:[{kind:"Literal",name:"gateName",value:"poe_enable_easier_undo_context_clear"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_easier_undo_context_clear")'},{alias:"lastAtMentionEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_add_last_at_mention_to_dropdown"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_add_last_at_mention_to_dropdown")'},{kind:"ScalarField",name:"shouldSeeWebSubscriptionAnnouncement"},{kind:"ScalarField",name:"creationTime"},{kind:"ScalarField",name:"fileUploadSizeLimits"},{alias:"formattedChatInput",args:[{kind:"Literal",name:"gateName",value:"poe_web_formatted_chat_input"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_formatted_chat_input")'},{alias:"useNewPrivacyCheck",args:[{kind:"Literal",name:"gateName",value:"poe_use_script_privacy_check"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_script_privacy_check")'}]},{kind:"ScalarField",name:"supportedPreviewsContentTypes"},{concreteType:"ExecutableLanguageInfo",kind:"LinkedField",name:"supportedExecutableLanguages",plural:!0,selections:[{kind:"ScalarField",name:"language"},t]}]},params:{id:"2155aea40bcff6f8d205aac46df67a30bb72ba8642d21824a7dc48b404871562",metadata:{},name:"OptimisticChatPageColumnLoader_useViewerAndRootQuery",operationKind:"query",text:null}});b.hash="5491b1721b7ec3016254a7c240512cf2",a.default=b},45815:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"PaywallContextWrapper_bot",selections:[{kind:"FragmentSpread",name:"WebSubscriptionAnnouncementModalOpener_bot"}],type:"Bot"};t.hash="8bdd078b81c5b18516a17bb7c66e0525",a.default=t},56848:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"PaywallContextWrapper_viewer",selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{kind:"ScalarField",name:"__typename"}]},{kind:"FragmentSpread",name:"WebSubscriptionAnnouncementModalOpener_viewer"},{kind:"FragmentSpread",name:"PaywallOpener_viewer"}],type:"Viewer"};t.hash="af3ee2d2cc529e3d4debb1d2844517bf",a.default=t},1828:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"PaywallOpener_bot",selections:[{kind:"ScalarField",name:"botId"}],type:"Bot"};t.hash="054da9770fdcbc9651c2250b3e9e1380",a.default=t},90665:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"PaywallOpener_viewer",selections:[{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionProduct",plural:!1,selections:[{kind:"ScalarField",name:"paidSubscriptionPeriod"}]}]}],type:"Viewer"};t.hash="c2cc3c4b4df5f65959cf17c91b70fba2",a.default=t},10962:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"WebSubscriptionAnnouncementModalOpener_bot",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"isCreatedByPoeUserAccount"}],type:"Bot"};t.hash="7419bc47e1519b00c927f4085fb4b0dc",a.default=t},74969:function(e,a,n){"use strict";var t,i,l;n.r(a);let r={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"dismissibleType"}],kind:"Fragment",name:"WebSubscriptionAnnouncementModalOpener_dismissDismissible_Mutation",selections:[{args:i=[{kind:"Variable",name:"dismissibleType",variableName:"dismissibleType"}],concreteType:"DismissDismissible",kind:"LinkedField",name:"dismissDismissible",plural:!1,selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[l={kind:"ScalarField",name:"shouldSeeWebSubscriptionAnnouncement"}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"WebSubscriptionAnnouncementModalOpener_dismissDismissible_Mutation",selections:[{args:i,concreteType:"DismissDismissible",kind:"LinkedField",name:"dismissDismissible",plural:!1,selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[l,{kind:"ScalarField",name:"id"}]}]}]},params:{id:"4a5844dcd7e79cd6b2c0bcadebbbf593e85a167b1cab854d5527e6be12c8b468",metadata:{},name:"WebSubscriptionAnnouncementModalOpener_dismissDismissible_Mutation",operationKind:"mutation",text:null}};r.hash="5ef690b09af14848d43e2c77b76aeaad",a.default=r},34932:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"WebSubscriptionAnnouncementModalOpener_viewer",selections:[{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionProduct",plural:!1,selections:[{kind:"ScalarField",name:"paidSubscriptionPeriod"}]}]},{kind:"ScalarField",name:"shouldSeeWebSubscriptionAnnouncement"},{kind:"ScalarField",name:"creationTime"}],type:"Viewer"};t.hash="2a67522e07cc47915ebc749d1a059501",a.default=t},93857:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"inputHelpers_useIsBotResponding_message",selections:[{kind:"ScalarField",name:"author"},{kind:"ScalarField",name:"state"},{kind:"FragmentSpread",name:"useIsMessageCancelled_message"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"},{kind:"ScalarField",name:"timeoutLevel"}]}],type:"Message"};t.hash="3a48f1adb961832602859305f39d0486",a.default=t},31869:function(e,a,n){"use strict";var t,i,l,r,s,o,d,c,m,u,p,g,_;n.r(a);let k={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"attachments"},i={defaultValue:null,kind:"LocalArgument",name:"attachmentsToRemove"},l={defaultValue:null,kind:"LocalArgument",name:"fileHashJwts"},r={defaultValue:null,kind:"LocalArgument",name:"originalMessageId"},s={defaultValue:null,kind:"LocalArgument",name:"query"},o={defaultValue:null,kind:"LocalArgument",name:"source"}],kind:"Fragment",name:"messageEditing_editMutation",selections:[{args:d=[{kind:"Variable",name:"attachments",variableName:"attachments"},{kind:"Variable",name:"attachmentsToRemove",variableName:"attachmentsToRemove"},{kind:"Variable",name:"fileHashJwts",variableName:"fileHashJwts"},{kind:"Variable",name:"originalMessageId",variableName:"originalMessageId"},{kind:"Variable",name:"query",variableName:"query"},{kind:"Variable",name:"source",variableName:"source"}],concreteType:"MessageEdgeEdit",kind:"LinkedField",name:"messageEdgeEdit",plural:!1,selections:[c={kind:"ScalarField",name:"status"},m={kind:"ScalarField",name:"statusMessage"},{concreteType:"MessageEdge",kind:"LinkedField",name:"message",plural:!1,selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[u={kind:"ScalarField",name:"id"},p={kind:"ScalarField",name:"text"},g={kind:"ScalarField",name:"isEdited"},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"FragmentSpread",name:"Attachments_attachment"}]}]}]}]}],type:"MutationRoot"},kind:"Request",operation:{argumentDefinitions:[r,s,o,i,t,l],kind:"Operation",name:"messageEditing_editMutation",selections:[{args:d,concreteType:"MessageEdgeEdit",kind:"LinkedField",name:"messageEdgeEdit",plural:!1,selections:[c,m,{concreteType:"MessageEdge",kind:"LinkedField",name:"message",plural:!1,selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[u,p,g,{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[u,{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"isInline"},{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"mimeType"},{kind:"ScalarField",name:"width"},{kind:"ScalarField",name:"height"},u,{kind:"ScalarField",name:"size"},_={kind:"ScalarField",name:"url"},{kind:"ScalarField",name:"thumbnailUrl"}]},{kind:"ScalarField",name:"name"},_,{kind:"ScalarField",name:"attachmentId"},{kind:"InlineFragment",selections:[{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"MessageAttachment"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"localUrl"}]}],type:"Attachment",abstractKey:"__isAttachment"}]}]},u]}]}]},params:{id:"26c45df57011f00053077fbf56dc4f93d54fc4aadc64cfe6e665e903a3445f62",metadata:{},name:"messageEditing_editMutation",operationKind:"mutation",text:null}};k.hash="01c2abf69dad4437fb22025b41c09eaa",a.default=k},75267:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"messageEditing_messageEdgeEdit_viewer"};t.hash="a48d5354a4a1e231e77cc45a424fdae1",a.default=t},67203:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"optimisticChat_createOptimisticChat_bot"};t.hash="0621ed855d33ed90093ed42137ae49f3",a.default=t},19654:function(e,a,n){"use strict";var t,i,l,r,s,o,d,c,m,u,p,g,_,k,b,h,f,F,S,y,v,C,w,L,I,B,P,M,N,T,x,E,A,D,G,O,R,K,j,U,H,V,W,Z,q,Q,z,$,X,J,Y,ee,ea,en,et,ei,el,er,es,eo,ed,ec,em,eu,ep,eg,e_,ek,eb,eh,ef,eF,eS,ey,ev,eC,ew;n.r(a);let eL=(t=[{defaultValue:null,kind:"LocalArgument",name:"id"}],i=[{kind:"Variable",name:"optimisticChatId",variableName:"id"}],r={kind:"ScalarField",name:"isDeleted"},s={kind:"ScalarField",name:"isOptimistic"},o={kind:"ScalarField",name:"title"},d={kind:"ScalarField",name:"__typename"},c={kind:"ScalarField",name:"state"},m={kind:"TypeDiscriminator",abstractKey:"__isCanvasTabInterface"},u={kind:"ScalarField",name:"globalId"},g={kind:"ScalarField",name:"language"},k={kind:"ScalarField",name:"clientNonce"},b={kind:"ScalarField",name:"canvasCode"},w={concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[h={kind:"ScalarField",name:"botId"},l={kind:"ScalarField",name:"id"},f={kind:"ScalarField",name:"handle"},F={kind:"ScalarField",name:"viewerIsCreator"},S={kind:"ScalarField",name:"deletionState"},y={kind:"ScalarField",name:"isPromptPublic"},v={kind:"ScalarField",name:"isCanvasOnlyBot"},C={kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[_={kind:"ScalarField",name:"content"},p={kind:"ScalarField",name:"contentType"}]}]},L={kind:"ScalarField",name:"idWhenWasOptimistic"},B={kind:"ScalarField",name:"codeblockIndex"},P={concreteType:"Message",kind:"LinkedField",name:"message",plural:!1,selections:[I={kind:"ScalarField",name:"messageId"},l,c]},M={kind:"TypeDiscriminator",abstractKey:"__isNode"},N={kind:"ScalarField",name:"chatId"},x={concreteType:"Bot",kind:"LinkedField",name:"chatSettingsFieldBotToEdit",plural:!1,selections:[h,l,{concreteType:"PoeUser",kind:"LinkedField",name:"creator",plural:!1,selections:[T={kind:"ScalarField",name:"viewerIsUser"},l]}]},E={kind:"ScalarField",name:"nickname"},A={kind:"ScalarField",name:"messageTimeoutSecs"},D={kind:"ScalarField",name:"allowsImageAttachments"},G={kind:"ScalarField",name:"isApiBot"},O={kind:"ScalarField",name:"limitedAccessType"},R={kind:"ScalarField",name:"shouldHideLimitedAccessTag"},K={kind:"ScalarField",name:"translatedBotTags"},j={kind:"ScalarField",name:"displayName"},V={kind:"LinkedField",name:"picture",plural:!1,selections:H=[d,{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[U={kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},W={kind:"ScalarField",name:"supportsRemix"},Z={kind:"ScalarField",name:"isServerBot"},q={kind:"ScalarField",name:"supportsFileUpload"},Q={kind:"ScalarField",name:"customUIDefinition"},X={concreteType:"PoeUser",kind:"LinkedField",name:"creator",plural:!1,selections:[r,{args:z=[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},$={kind:"ScalarField",name:"fullName"},{alias:"nullableHandle",kind:"ScalarField",name:"handle"},l,M]},J={kind:"ScalarField",name:"canUserAccessBot"},Y={kind:"ScalarField",name:"poweredBy"},ee={kind:"ScalarField",name:"chatCode"},ea=[I,l],en={kind:"ScalarField",name:"creationTime"},et={kind:"ScalarField",name:"author"},ei={kind:"ScalarField",name:"timeoutLevel"},el={kind:"ScalarField",name:"textLengthOnCancellation"},er={kind:"ScalarField",name:"jobId"},es=[{kind:"Literal",name:"first",value:2}],eo={kind:"ScalarField",name:"cursor"},ed={concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]},ec=[{kind:"Literal",name:"last",value:12}],em={kind:"ScalarField",name:"uid"},eu={kind:"ScalarField",name:"viewerIsFollowing"},ep={alias:"smallProfilePhotoUrl",args:z,kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},eg={kind:"ScalarField",name:"text"},e_=[em,l],ek={kind:"ScalarField",name:"name"},eb={kind:"ScalarField",name:"mimeType"},eh={kind:"InlineFragment",selections:[l],type:"Node",abstractKey:"__isNode"},ef={kind:"ScalarField",name:"reaction"},eF=[{kind:"Literal",name:"first",value:5}],eS=[o],ey={kind:"ScalarField",name:"costBreakdown"},ev={concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[h,E,j,l,O,C,R,K,S,V,f,M]},eC={concreteType:"Chat",kind:"LinkedField",name:"chat",plural:!1,selections:[N,l]},{fragment:{argumentDefinitions:t,kind:"Fragment",name:"optimisticChat_retainOptimisticChatNodeQuery",selections:[{kind:"ClientExtension",selections:[{args:i,concreteType:"Chat",kind:"LinkedField",name:"optimisticChat",plural:!1,selections:[l,{kind:"FragmentSpread",name:"ChatPageColumn_chat"}]}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"optimisticChat_retainOptimisticChatNodeQuery",selections:[{kind:"ClientExtension",selections:[{args:i,concreteType:"Chat",kind:"LinkedField",name:"optimisticChat",plural:!1,selections:[l,r,s,o,{kind:"ScalarField",name:"hasMultipleUsers"},{kind:"LinkedField",name:"canvasTabInForeground",plural:!1,selections:[d,l,c,m,o,u,{concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[p,g,_]},k,b,{kind:"InlineFragment",selections:[s,h,w,L],type:"BotCanvasTab"},{kind:"InlineFragment",selections:[I,B,s,P,L,{kind:"InlineFragment",selections:[M],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"}],type:"MessageCanvasTab"},M]},N,{kind:"ScalarField",name:"canvasTabsCount"},x,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[h,l,f,{kind:"ScalarField",name:"hasMarkdownRendering"},{kind:"ScalarField",name:"introduction"},E,F,{kind:"ScalarField",name:"isTrustedBot"},C,{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[_,p,g]},A,D,G,O,R,K,S,j,V,W,Z,q,Q,{kind:"ScalarField",name:"botCategory"},{kind:"ScalarField",name:"promptPlaintext"},{kind:"ScalarField",name:"isCreatedByPoeUserAccount"},{kind:"ScalarField",name:"viewerIsFollower"},{kind:"ScalarField",name:"followerCount"},{kind:"ScalarField",name:"shareLink"},{kind:"ScalarField",name:"isDown"},{kind:"ScalarField",name:"model"},{kind:"ScalarField",name:"uploadFileSizeLimit"},{kind:"ScalarField",name:"noAccessMessage"},{kind:"ScalarField",name:"allowsClearContext"},{kind:"ScalarField",name:"conversationStarters"},v,{kind:"ScalarField",name:"monthlyActiveUsers"},X,J,{concreteType:"BotPricing",kind:"LinkedField",name:"botPricing",plural:!1,selections:[{kind:"ScalarField",name:"botPricingLabel"}]},{kind:"ScalarField",name:"description"},Y,y,{kind:"ScalarField",name:"shouldHide"},{kind:"ScalarField",name:"isOfficialBot"},{alias:"smallPicture",args:z,kind:"LinkedField",name:"picture",plural:!1,selections:H,storageKey:'picture(size:"small")'},M]},{concreteType:"Chat",kind:"LinkedField",name:"scriptTestSourceChat",plural:!1,selections:[x,o,ee,N,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[h,l]},l,d]},ee,{concreteType:"Message",kind:"LinkedField",name:"viewerLastSeenMessage",plural:!1,selections:ea},{kind:"ScalarField",name:"shouldBotAutoRespond"},en,{concreteType:"Message",kind:"LinkedField",name:"lastMessage",plural:!1,selections:[et,s,c,ei,l,el,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[W,f,l,Z,D,q,Q,S,h,E,j]}]},{concreteType:"Message",kind:"LinkedField",name:"lastMessageSeenByAllOtherMembers",plural:!1,selections:ea},{concreteType:"PoeJob",kind:"LinkedField",name:"activeJobs",plural:!0,selections:[er,{kind:"ScalarField",name:"viewerCanCancel"},l]},{args:es,concreteType:"CanvasTabConnection",kind:"LinkedField",name:"canvasTabsConnection",plural:!1,selections:[{concreteType:"CanvasTabEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"LinkedField",name:"node",plural:!1,selections:[d,m,l,c,{concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[p,g]},{kind:"InlineFragment",selections:[s,I,B,{kind:"InlineFragment",selections:[o,u,{concreteType:"PreviewContentObject",kind:"LinkedField",name:"previewContentObject",plural:!1,selections:[_]},k,b,{kind:"InlineFragment",selections:[h,w],type:"BotCanvasTab"},{kind:"InlineFragment",selections:[P],type:"MessageCanvasTab"},M],type:"CanvasTabInterface",abstractKey:"__isCanvasTabInterface"}],type:"MessageCanvasTab"},{kind:"InlineFragment",selections:[h],type:"BotCanvasTab"}]},eo,l]},ed,l],storageKey:"canvasTabsConnection(first:2)"},{args:es,handle:"connection",key:"CanvasTabSelector_canvasTabsConnection",kind:"LinkedHandle",name:"canvasTabsConnection"},{args:ec,concreteType:"MessagesConnection",kind:"LinkedField",name:"messagesConnection",plural:!1,selections:[{concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[et,{kind:"ScalarField",name:"isChatAnnouncement"},l,{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[em,l,$,f,eu,r,ep,M]},{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[h,l,A,D,f,G,E,O,C,R,K,S,j,V,M]},I,en,eg,c,s,k,{kind:"ScalarField",name:"messageCode"},{kind:"ScalarField",name:"parameters"},p,{kind:"ScalarField",name:"errorMessage"},{kind:"ScalarField",name:"sourceType"},{kind:"ScalarField",name:"messageStateText"},{kind:"ScalarField",name:"clientMessageStateText"},{kind:"ScalarField",name:"isEdited"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanDelete",plural:!0,selections:e_},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[l,{kind:"ScalarField",name:"attachmentId"},ek,U,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[eb,l,{kind:"ScalarField",name:"size"}]},s,{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"isInline"},{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[{kind:"ScalarField",name:"width"},{kind:"ScalarField",name:"height"},U,{kind:"ScalarField",name:"thumbnailUrl"}]},{kind:"ScalarField",name:"localUrl"}],type:"Attachment",abstractKey:"__isAttachment"}]},{concreteType:"CommandInfo",kind:"LinkedField",name:"command",plural:!1,selections:[{kind:"ScalarField",name:"commandType"}]},{kind:"LinkedField",name:"referencedMessageV2",plural:!1,selections:[d,{kind:"TypeDiscriminator",abstractKey:"__isMessageOrDeletedMessage"},{kind:"InlineFragment",selections:[I,eg,r,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[O,C,R,K,S,j,V,f,l,M]},{concreteType:"PoeUser",kind:"LinkedField",name:"authorUser",plural:!1,selections:[l,em,f,$,eu,r,ep,M]},{concreteType:"MessageAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[ek,U,{concreteType:"File",kind:"LinkedField",name:"file",plural:!1,selections:[eb,l]}],type:"Attachment",abstractKey:"__isAttachment"},l]}],type:"Message"},eh]},{concreteType:"PoeJob",kind:"LinkedField",name:"responsibleJob",plural:!1,selections:[c,l,er]},{concreteType:"MessageReactionCount",kind:"LinkedField",name:"reactionCounts",plural:!0,selections:[ef,{kind:"ScalarField",name:"count"},l]},{kind:"ScalarField",name:"viewerReaction"},{concreteType:"PoeUser",kind:"LinkedField",name:"usersCanEdit",plural:!0,selections:e_},{kind:"ScalarField",name:"hasCitations"},ei,{kind:"ScalarField",name:"heartbeatTimeoutLevel"},{kind:"ScalarField",name:"lastUpdatedText"},el,{args:eF,concreteType:"MessageReactionsConnection",kind:"LinkedField",name:"reactionsConnection",plural:!1,selections:[{concreteType:"MessageReactionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"MessageReactionNode",kind:"LinkedField",name:"node",plural:!1,selections:[ef,{concreteType:"PoeUser",kind:"LinkedField",name:"user",plural:!1,selections:[em,$,T,{alias:"mediumProfilePhotoUrl",args:[{kind:"Literal",name:"size",value:"medium"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"medium")'},l]},l,d]},eo,l]},ed],storageKey:"reactionsConnection(first:5)"},{args:eF,handle:"connection",key:"MessageReactionsModal_message_reactionsConnection",kind:"LinkedHandle",name:"reactionsConnection"},d,{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[r],type:"Message"}],type:"MessageOrDeletedMessage",abstractKey:"__isMessageOrDeletedMessage"},M]},l,eo]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"hasPreviousPage"},{kind:"ScalarField",name:"startCursor"}]},l],storageKey:"messagesConnection(last:12)"},{args:ec,handle:"connection",key:"ChatMessagesView_chat_messagesConnection",kind:"LinkedHandle",name:"messagesConnection"},{kind:"LinkedField",name:"displayedChatModal",plural:!1,selections:[d,{kind:"InlineFragment",selections:[N,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[f,O,C,R,K,S,j,V,l,M]},{kind:"LinkedField",name:"budgetIncreaseRequester",plural:!1,selections:[d,{kind:"InlineFragment",selections:[f],type:"Bot"},{kind:"InlineFragment",selections:eS,type:"MessageCanvasTab"},{kind:"InlineFragment",selections:eS,type:"BotCanvasTab"},eh]},{kind:"ScalarField",name:"applicablePointPriceThreshold"},{kind:"ScalarField",name:"totalRequestAmount"},I,ey,{concreteType:"MessagePointInfo",kind:"LinkedField",name:"messagePointInfo",plural:!1,selections:[{kind:"ScalarField",name:"messagePointBalance"},l]}],type:"CostThresholdUpdateChatModal"},{kind:"InlineFragment",selections:[N,ev,eC,en],type:"PaywallChatModal"},{kind:"InlineFragment",selections:[N,ev,eC,en,ew={kind:"ScalarField",name:"messageCostAmount"},ey],type:"PointLimitPaywallChatModal"},{kind:"InlineFragment",selections:[N,en,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[O,C,R,K,S,j,V,f,l,h,E,M]},ew,ey],type:"SubscriberPointLimitChatModal"},{kind:"InlineFragment",selections:[eC,{concreteType:"Bot",kind:"LinkedField",name:"bot",plural:!1,selections:[h,l,Y,S,j,V,f,{concreteType:"BotPricing",kind:"LinkedField",name:"botPricing",plural:!1,selections:[{kind:"ScalarField",name:"botPricingType"},{kind:"ScalarField",name:"standardMessagePrice"}]},C,X,J]},{kind:"ScalarField",name:"isPrivateDeletedBotsChangesEnabled"}],type:"AddBotChatModal"},eh]},{kind:"ScalarField",name:"isContextOptimizationOn"},{kind:"ScalarField",name:"membersIncludeUntrustedBot"},{kind:"ScalarField",name:"membersCount"},{args:es,concreteType:"ChatMembersConnection",kind:"LinkedField",name:"userMembersConnection",plural:!1,selections:[{concreteType:"ChatMemberEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"LinkedField",name:"node",plural:!1,selections:[d,{kind:"InlineFragment",selections:[em,$,ep],type:"PoeUser"},l]},l]}],storageKey:"userMembersConnection(first:2)"},M]}]}]},params:{cacheID:"c19fe4484d1dd694e6afa104a9bc9b09",id:null,metadata:{},name:"optimisticChat_retainOptimisticChatNodeQuery",operationKind:"query",text:null}});eL.hash="b9cc70a104c6b134e77f415ed673d2e9",a.default=eL},7439:function(e,a,n){"use strict";var t,i,l,r,s,o,d;n.r(a);let c=(t={kind:"ScalarField",name:"id"},l=[{kind:"Literal",name:"filterCanvasOnlyBots",value:!0},{kind:"Literal",name:"first",value:3}],s={kind:"ScalarField",name:"deletionState"},o={kind:"ScalarField",name:"displayName"},d={kind:"LinkedField",name:"picture",plural:!1,selections:r=[i={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},{fragment:{argumentDefinitions:[],kind:"Fragment",name:"pagesLandingPageQuery",selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"ChatHomeMain_viewer"},{kind:"FragmentSpread",name:"SprigSurvey_viewer"},{kind:"FragmentSpread",name:"MainNavbarLeftItem_viewer"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"pagesLandingPageQuery",selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[t,{kind:"ScalarField",name:"fullName"},i,{kind:"ScalarField",name:"uid"}]},{kind:"ScalarField",name:"fileUploadSizeLimits"},{alias:"submitMessageParamsAsDict",args:[{kind:"Literal",name:"gateName",value:"poe_pass_message_params_as_dictionary"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_pass_message_params_as_dictionary")'},{kind:"ScalarField",name:"isEligibleForWebSubscriptions"},{concreteType:"Subscription",kind:"LinkedField",name:"subscription",plural:!1,selections:[{kind:"ScalarField",name:"isActive"},t,{concreteType:"SubscriptionProduct",kind:"LinkedField",name:"subscriptionProduct",plural:!1,selections:[{kind:"ScalarField",name:"paidSubscriptionPeriod"},t]}]},t,{alias:"formattedChatInput",args:[{kind:"Literal",name:"gateName",value:"poe_web_formatted_chat_input"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_formatted_chat_input")'},{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'},{alias:"lastAtMentionEnabled",args:[{kind:"Literal",name:"gateName",value:"poe_add_last_at_mention_to_dropdown"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_add_last_at_mention_to_dropdown")'},{alias:"enableMessageDrafts",args:[{kind:"Literal",name:"gateName",value:"poe_enable_message_drafts"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_message_drafts")'},{kind:"ScalarField",name:"primaryEmail"},{kind:"ScalarField",name:"showDownloadAppPrompt"},{args:l,concreteType:"BotsConnection",kind:"LinkedField",name:"availableBotsConnection",plural:!1,selections:[{concreteType:"BotEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Bot",kind:"LinkedField",name:"node",plural:!1,selections:[t,{alias:"smallPicture",args:[{kind:"Literal",name:"size",value:"small"}],kind:"LinkedField",name:"picture",plural:!1,selections:r,storageKey:'picture(size:"small")'},s,o,d,i]},{kind:"ScalarField",name:"cursor"},t]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]},t],storageKey:"availableBotsConnection(filterCanvasOnlyBots:true,first:3)"},{args:l,filters:["filterCanvasOnlyBots"],handle:"connection",key:"HomeBotSelector_viewer_availableBotsConnection",kind:"LinkedHandle",name:"availableBotsConnection"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBot",plural:!1,selections:[t,{kind:"ScalarField",name:"isCreatedByPoeUserAccount"},{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"allowsImageAttachments"},{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"customUIDefinition"},s,{kind:"ScalarField",name:"nickname"},o,{kind:"ScalarField",name:"introduction"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{kind:"ScalarField",name:"translatedBotTags"},d,{kind:"ScalarField",name:"supportsRemix"},{kind:"TypeDiscriminator",abstractKey:"__isNode"}]},{kind:"ScalarField",name:"shouldSeeWebSubscriptionAnnouncement"},{kind:"ScalarField",name:"creationTime"},{alias:"poeEnableMultiUserInvite",args:[{kind:"Literal",name:"gateName",value:"poe_enable_multi_user_invite"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_enable_multi_user_invite")'},{kind:"ScalarField",name:"hasRecentlyUnsubscribed"},{alias:"badgingEnabledProportion",args:[{kind:"Literal",name:"gateName",value:"poe_badging_enabled_proportion"}],kind:"ScalarField",name:"floatGate",storageKey:'floatGate(gateName:"poe_badging_enabled_proportion")'}]}]},params:{id:"a5241389ae79a0fb0ada4f9eeede9d7e0c4955b269f663c9a55b6c0d7ed6cc4b",metadata:{},name:"pagesLandingPageQuery",operationKind:"query",text:null}});c.hash="118f07cb3946a40ec49b2d0ed96e08c8",a.default=c},37446:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"useFileUpload_addAttachments"};t.hash="dae988534f0ac4a322875d2c8b59b40d",a.default=t},28333:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useFileUpload_bot",selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"handle"}],type:"Bot"};t.hash="3e5058f644d26d8e7088bb2a90578331",a.default=t},70827:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"useFileUpload_chat"};t.hash="93a66caca5202b6acf1ddbf20f156c46",a.default=t},16641:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useFileUpload_viewer",selections:[{kind:"ScalarField",name:"fileUploadSizeLimits"}],type:"Viewer"};t.hash="86e274eced5cdcda3471d7240431b1a1",a.default=t},21768:function(e,a,n){"use strict";var t,i,l;n.r(a);let r={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"id"}],kind:"Fragment",name:"useHomeBotSelectorBotQuery",selections:[{args:i=[{kind:"Variable",name:"id",variableName:"id"}],kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"FragmentSpread",name:"useHomeBotSelector_bot"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useHomeBotSelectorBotQuery",selections:[{args:i,kind:"LinkedField",name:"node",plural:!1,selections:[l={kind:"ScalarField",name:"__typename"},{kind:"ScalarField",name:"id"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"isCreatedByPoeUserAccount"},{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"allowsImageAttachments"},{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"customUIDefinition"},{kind:"ScalarField",name:"deletionState"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"},{kind:"ScalarField",name:"introduction"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{kind:"ScalarField",name:"translatedBotTags"},{kind:"LinkedField",name:"picture",plural:!1,selections:[l,{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},{kind:"ScalarField",name:"supportsRemix"},{kind:"TypeDiscriminator",abstractKey:"__isNode"}],type:"Bot"}]}]},params:{id:"36d1447d85459e4d14f6d513432bf101d807f0b2f748e34673bafca0e3f11662",metadata:{},name:"useHomeBotSelectorBotQuery",operationKind:"query",text:null}};r.hash="0cff53b2036f47ec4ab78a6260811edd",a.default=r},15433:function(e,a,n){"use strict";var t,i,l,r,s,o,d,c,m,u;n.r(a);let p=(t=[{defaultValue:null,kind:"LocalArgument",name:"after"},{defaultValue:3,kind:"LocalArgument",name:"first"}],r={kind:"ScalarField",name:"id"},s=[i={kind:"Variable",name:"after",variableName:"after"},{kind:"Literal",name:"filterCanvasOnlyBots",value:!0},l={kind:"Variable",name:"first",variableName:"first"}],c={kind:"ScalarField",name:"deletionState"},m={kind:"ScalarField",name:"displayName"},u={kind:"LinkedField",name:"picture",plural:!1,selections:d=[o={kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},{fragment:{argumentDefinitions:t,kind:"Fragment",name:"useHomeBotSelectorViewerBotsPaginationQuery",selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:[i,l],kind:"FragmentSpread",name:"useHomeBotSelector_viewer"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useHomeBotSelectorViewerBotsPaginationQuery",selections:[{concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[r,{args:s,concreteType:"BotsConnection",kind:"LinkedField",name:"availableBotsConnection",plural:!1,selections:[{concreteType:"BotEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Bot",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:"smallPicture",args:[{kind:"Literal",name:"size",value:"small"}],kind:"LinkedField",name:"picture",plural:!1,selections:d,storageKey:'picture(size:"small")'},c,m,u,o]},{kind:"ScalarField",name:"cursor"},r]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]},r]},{args:s,filters:["filterCanvasOnlyBots"],handle:"connection",key:"HomeBotSelector_viewer_availableBotsConnection",kind:"LinkedHandle",name:"availableBotsConnection"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBot",plural:!1,selections:[r,{kind:"ScalarField",name:"isCreatedByPoeUserAccount"},{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"allowsImageAttachments"},{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"customUIDefinition"},c,{kind:"ScalarField",name:"nickname"},m,{kind:"ScalarField",name:"introduction"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{kind:"ScalarField",name:"translatedBotTags"},u,{kind:"ScalarField",name:"supportsRemix"},{kind:"TypeDiscriminator",abstractKey:"__isNode"}]}]}]},params:{id:"6366bd24f27f354cd42cae90ca59ff0b50a1d59c98eda3c8022b011f7dcb1f26",metadata:{},name:"useHomeBotSelectorViewerBotsPaginationQuery",operationKind:"query",text:null}});p.hash="bcb0372d7df25a3876b91ae72ae80db0",a.default=p},53435:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:{refetch:{fragmentPathInResult:["node"],operation:n(21768),identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"useHomeBotSelector_bot",selections:[{kind:"ScalarField",name:"id"},{kind:"FragmentSpread",name:"PaywallContextWrapper_bot"},{kind:"FragmentSpread",name:"ChatHomeMainInputContainer_bot"}],type:"Bot"};t.hash="0cff53b2036f47ec4ab78a6260811edd",a.default=t},70060:function(e,a,n){"use strict";var t,i,l;n.r(a);let r={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"botId"}],kind:"Fragment",name:"useHomeBotSelector_prefetchBotDataQuery",selections:[{args:i=[{kind:"Variable",name:"id",variableName:"botId"}],kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"FragmentSpread",name:"useHomeBotSelector_bot"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useHomeBotSelector_prefetchBotDataQuery",selections:[{args:i,kind:"LinkedField",name:"node",plural:!1,selections:[l={kind:"ScalarField",name:"__typename"},{kind:"ScalarField",name:"id"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"isCreatedByPoeUserAccount"},{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"allowsImageAttachments"},{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"customUIDefinition"},{kind:"ScalarField",name:"deletionState"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"},{kind:"ScalarField",name:"introduction"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{kind:"ScalarField",name:"translatedBotTags"},{kind:"LinkedField",name:"picture",plural:!1,selections:[l,{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},{kind:"ScalarField",name:"supportsRemix"},{kind:"TypeDiscriminator",abstractKey:"__isNode"}],type:"Bot"}]}]},params:{id:"c60766930f8060b3d6051c91e551426c58e4690e088d26767e3d2ed095767754",metadata:{},name:"useHomeBotSelector_prefetchBotDataQuery",operationKind:"query",text:null}};r.hash="bd8705b110533e6ec212c0a33c9877ec",a.default=r},91134:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"useHomeBotSelector_selectBot"};t.hash="dee857acad65dd72a88efae76111241c",a.default=t},63733:function(e,a,n){"use strict";var t,i;n.r(a);let l=(i={kind:"ScalarField",name:"id"},{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"after"},{defaultValue:3,kind:"LocalArgument",name:"first"}],kind:"Fragment",metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:t=["availableBotsConnection"]}],refetch:{connection:{forward:{count:"first",cursor:"after"},backward:null,path:t},fragmentPathInResult:["viewer"],operation:n(15433)}},name:"useHomeBotSelector_viewer",selections:[i,{alias:"availableBotsConnection",args:[{kind:"Literal",name:"filterCanvasOnlyBots",value:!0}],concreteType:"BotsConnection",kind:"LinkedField",name:"__HomeBotSelector_viewer_availableBotsConnection_connection",plural:!1,selections:[{concreteType:"BotEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{concreteType:"Bot",kind:"LinkedField",name:"node",plural:!1,selections:[i,{kind:"FragmentSpread",name:"BotSelectorHomeMain_bots"},{kind:"ScalarField",name:"__typename"}]},{kind:"ScalarField",name:"cursor"}]},{concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{kind:"ScalarField",name:"endCursor"},{kind:"ScalarField",name:"hasNextPage"}]}],storageKey:"__HomeBotSelector_viewer_availableBotsConnection_connection(filterCanvasOnlyBots:true)"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBot",plural:!1,selections:[i,{kind:"FragmentSpread",name:"useHomeBotSelector_bot"}]}],type:"Viewer"});l.hash="bcb0372d7df25a3876b91ae72ae80db0",a.default=l},69514:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useIsMessageCancelled_message",selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"state"},{kind:"ScalarField",name:"textLengthOnCancellation"}],type:"Message"};t.hash="88dfbf47fb5c19213d0650643aefb4d1",a.default=t},16795:function(e,a,n){"use strict";var t,i,l,r,s,o,d,c;n.r(a);let m={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"chatCode"},i={defaultValue:null,kind:"LocalArgument",name:"currentPartialHandle"},l={defaultValue:null,kind:"LocalArgument",name:"fullChatInput"},r={defaultValue:null,kind:"LocalArgument",name:"hasChat"}],kind:"Fragment",name:"useMentionedBotsInputsQuery",selections:[{args:[s={kind:"Variable",name:"chatCode",variableName:"chatCode"},o={kind:"Variable",name:"currentPartialHandle",variableName:"currentPartialHandle"},{kind:"Variable",name:"fullChatInput",variableName:"fullChatInput"},{kind:"Variable",name:"hasChat",variableName:"hasChat"}],kind:"FragmentSpread",name:"MentionedBotsResults_queryRoot"}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:[t,r,l,i],kind:"Operation",name:"useMentionedBotsInputsQuery",selections:[{args:[o,{kind:"Variable",name:"query",variableName:"fullChatInput"}],kind:"LinkedField",name:"mentionedBots",plural:!0,selections:[d={kind:"ScalarField",name:"__typename"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"supportsRemix"},c={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"allowsImageAttachments"},{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"customUIDefinition"},{kind:"ScalarField",name:"deletionState"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"displayName"},{kind:"ScalarField",name:"introduction"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{kind:"ScalarField",name:"translatedBotTags"},{kind:"LinkedField",name:"picture",plural:!1,selections:[d,{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},{condition:"hasChat",kind:"Condition",passingValue:!0,selections:[{args:[s],kind:"ScalarField",name:"isInChat"}]},{kind:"TypeDiscriminator",abstractKey:"__isNode"}],type:"Bot"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"botHandle"}],type:"MentionedBotDoesNotExistQuery"},{kind:"InlineFragment",selections:[c],type:"Node",abstractKey:"__isNode"}]}]},params:{id:"6fb81c76162cce33770988fd687dd93feb357cb4c1ae82a6340279659dcc28aa",metadata:{},name:"useMentionedBotsInputsQuery",operationKind:"query",text:null}};m.hash="073e844509003b0f6d757d414e25b1c4",a.default=m},75557:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useMentionedBotsInputs_chat",selections:[{kind:"ScalarField",name:"chatCode"},{kind:"ClientExtension",selections:[{kind:"ScalarField",name:"isOptimistic"}]}],type:"Chat"};t.hash="0a05ac4271bcd76b41ff49dd7a4b4904",a.default=t},23840:function(e,a,n){"use strict";n.r(a);let t={kind:"InlineDataFragment",name:"useMultibotAtMention_selectBot"};t.hash="0314cd632f900e2880f8d691274bc397",a.default=t},16216:function(e,a,n){"use strict";var t,i,l,r;n.r(a);let s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"botId"}],kind:"Fragment",name:"useSendMessageFromHomePageOptimisticBotQuery",selections:[{args:i=[{kind:"Variable",name:"botId",variableName:"botId"}],concreteType:"Bot",kind:"LinkedField",name:"botById",plural:!1,selections:[{kind:"FragmentSpread",name:"HandleBotLandingPageInner_bot"}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useSendMessageFromHomePageOptimisticBotQuery",selections:[{args:i,concreteType:"Bot",kind:"LinkedField",name:"botById",plural:!1,selections:[{kind:"ScalarField",name:"displayName"},{kind:"ScalarField",name:"botId"},{kind:"ScalarField",name:"model"},{kind:"ScalarField",name:"uploadFileSizeLimit"},{kind:"ScalarField",name:"allowsImageAttachments"},l={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"isCreatedByPoeUserAccount"},{kind:"ScalarField",name:"noAccessMessage"},{kind:"ScalarField",name:"allowsClearContext"},{kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"introduction"},{kind:"ScalarField",name:"conversationStarters"},{kind:"ScalarField",name:"isCanvasOnlyBot"},{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"followerCount"},{kind:"ScalarField",name:"monthlyActiveUsers"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PoeUser",kind:"LinkedField",name:"creator",plural:!1,selections:[{kind:"ScalarField",name:"isDeleted"},{args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profilePhotoUrl",storageKey:'profilePhotoUrl(size:"small")'},{kind:"ScalarField",name:"fullName"},{alias:"nullableHandle",kind:"ScalarField",name:"handle"},l,r={kind:"TypeDiscriminator",abstractKey:"__isNode"}]},{kind:"ScalarField",name:"canUserAccessBot"},{kind:"ScalarField",name:"deletionState"},{kind:"LinkedField",name:"picture",plural:!1,selections:[{kind:"ScalarField",name:"__typename"},{kind:"TypeDiscriminator",abstractKey:"__isBotPicture"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"localName"}],type:"LocalBotImage"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"url"}],type:"URLBotImage"}]},{concreteType:"BotPricing",kind:"LinkedField",name:"botPricing",plural:!1,selections:[{kind:"ScalarField",name:"botPricingLabel"}]},{kind:"ScalarField",name:"translatedBotTags"},{kind:"ScalarField",name:"description"},{kind:"ScalarField",name:"poweredBy"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"isPromptPublic"},{kind:"ScalarField",name:"botCategory"},{kind:"ScalarField",name:"viewerIsFollower"},{kind:"ScalarField",name:"shareLink"},{kind:"ScalarField",name:"promptPlaintext"},{kind:"ScalarField",name:"shouldHide"},{kind:"ScalarField",name:"isOfficialBot"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"messageTimeoutSecs"},{kind:"ScalarField",name:"isApiBot"},{kind:"ScalarField",name:"limitedAccessType"},{kind:"ScalarField",name:"shouldHideLimitedAccessTag"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"ScalarField",name:"supportsRemix"},{kind:"ScalarField",name:"isServerBot"},{kind:"ScalarField",name:"supportsFileUpload"},{kind:"ScalarField",name:"customUIDefinition"},{kind:"ScalarField",name:"isDown"},r]}]},params:{id:"1b87d3ef3365bb705c121a1ca83eab92ad1dd097ce0b893d37df73cf61632c2f",metadata:{},name:"useSendMessageFromHomePageOptimisticBotQuery",operationKind:"query",text:null}};s.hash="3a627cbca0c38d8adbba19f74517ffac",a.default=s},96317:function(e,a,n){"use strict";var t,i,l;n.r(a);let r={argumentDefinitions:[],kind:"Fragment",name:"useSendMessageFromHomePage_bot",selections:[t={kind:"ScalarField",name:"botId"},{kind:"InlineDataFragmentSpread",name:"sendMessage_bot",selections:[i={kind:"ScalarField",name:"id"}],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"optimisticChat_createOptimisticChat_bot",selections:[i,t,{kind:"ScalarField",name:"handle"},{kind:"ScalarField",name:"introduction"},l={kind:"ScalarField",name:"nickname"},{kind:"ScalarField",name:"viewerIsCreator"},{kind:"ScalarField",name:"isTrustedBot"},{kind:"ScalarField",name:"isPrivateBot"},{concreteType:"PreviewContentObject",kind:"LinkedField",name:"canvasContent",plural:!1,selections:[{kind:"ScalarField",name:"content"},{kind:"ScalarField",name:"contentType"},{kind:"ScalarField",name:"language"}]},{kind:"InlineDataFragmentSpread",name:"optimisticMessage_createOptimisticBotMessage_bot",selections:[l,{kind:"InlineDataFragmentSpread",name:"localMessage_createLocalChatMessage_bot",selections:[i,{kind:"FragmentSpread",name:"ChatMessage_bot"},{kind:"FragmentSpread",name:"ChatLastMessageArea_bot"},{kind:"FragmentSpread",name:"ChatPageMain_targetedBot"}],argumentDefinitions:[]}],argumentDefinitions:[]}],argumentDefinitions:[]}],type:"Bot"};r.hash="65700f963a76f1af40283732dd0615de",a.default=r},26644:function(e,a,n){"use strict";var t,i,l,r,s,o,d;n.r(a);let c={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"optimisticChatId"}],kind:"Fragment",name:"useSendMessageFromHomePage_optimisticChatQuery",selections:[{kind:"ClientExtension",selections:[{args:i=[{kind:"Variable",name:"optimisticChatId",variableName:"optimisticChatId"}],concreteType:"Chat",kind:"LinkedField",name:"optimisticChat",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_chat",selections:[l={kind:"ScalarField",name:"id"},r={kind:"ScalarField",name:"chatId"},{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[l,s={kind:"ScalarField",name:"handle"}]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onSuccessUpdater_chat",selections:[l],argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"sendMessage_onMessageSendChatUpdate_chat",selections:[l,{kind:"InlineDataFragmentSpread",name:"getChatContentType_chat",selections:[{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[o={kind:"ScalarField",name:"hasMarkdownRendering"}]}],argumentDefinitions:[]}],argumentDefinitions:[]},{kind:"ClientExtension",selections:[d={kind:"ScalarField",name:"isOptimistic"}]}],argumentDefinitions:[]}]}]}],type:"QueryRoot"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useSendMessageFromHomePage_optimisticChatQuery",selections:[{kind:"ClientExtension",selections:[{args:i,concreteType:"Chat",kind:"LinkedField",name:"optimisticChat",plural:!1,selections:[l,r,d,{concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[l,s,o]}]}]}]},params:{cacheID:"766cede0144cf7d41f6bf9be38b8717d",id:null,metadata:{},name:"useSendMessageFromHomePage_optimisticChatQuery",operationKind:"query",text:null}};c.hash="d2ff7e2a85720d786b238d98ef6122dc",a.default=c},90721:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",name:"useSendMessageFromHomePage_viewer",selections:[{kind:"InlineDataFragmentSpread",name:"sendMessage_viewer",selections:[{alias:"shouldUseFinishUploadEndpoint",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_finish_upload_endpoint"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_finish_upload_endpoint")'},{alias:"shouldUsePresignedUrl",args:[{kind:"Literal",name:"gateName",value:"poe_file_upload_use_presigned_url"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_file_upload_use_presigned_url")'},{alias:"useMessageSendingIcon",args:[{kind:"Literal",name:"gateName",value:"poe_use_message_sending_icon"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_use_message_sending_icon")'}],argumentDefinitions:[]}],type:"Viewer"};t.hash="781b634407c252a76451fac98be06b8a",a.default=t},31910:function(e,a,n){"use strict";var t=n(85893),i=n(67294),l=n(22120),r=n(12251),s=n(61936),o=n(15901),d=n.n(o),c=n(8583);a.Z=e=>{let{fileHandlerRef:a,isInsideRelativeContainer:n=!1}=e,o=(0,i.useRef)(null),m=(0,c.ZP)(),{t:u}=(0,l.$G)(),p=(0,i.useCallback)(e=>{var n;if(!a.current)return;let t=Array.from((null===(n=e.dataTransfer)||void 0===n?void 0:n.files)||[]),i=(0,s.w)(e);if(i.length>0){m({type:c.pC.error,content:u("A file or files you selected would not upload because it is actually a package of files. Please compress the package and upload as a .zip file.")});return}t.length&&a.current.handleFiles(t)},[a,m,u]),{isDropTargetDraggingOver:g,isDocumentDraggingOver:_}=(0,s.Y)(o,p);return(0,t.jsx)("div",{ref:o,className:(0,r.$)(d().dropTarget,n&&d().isInsideRelativeContainer),"data-visible":_,"data-active":g,children:u("Drop files here")})}},36809:function(e,a,n){"use strict";n.d(a,{Z:function(){return eL}});var t,i,l=n(85893),r=n(67172),s=n(5152),o=n.n(s),d=n(67294),c=n(22578),m=n(54344),u=n(41578),p=n(22641),g=n(8583),_=n(75014),k=n(19156),b=n(15117),h=n(42093),f=n(12251),F=n(9729),S=n(46932),y=n(41149),v=n(23595),C=n(68374),w=n(64516),L=n(48556),I=n.n(L),B=n(30038),P=n(23738),M=n(82306),N=n(94370),T=n(22120),x=n(78410),inputFooter_ChatMessageCancelButton=e=>{let{className:a,...n}=e,{t}=(0,T.$G)(),[i,s]=(0,d.useState)(null),o=t("Cancel");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.Z,{as:"button",ref:s,className:a,size:"sm",showIconOnly:"always",iconLeft:(0,l.jsx)(N.bM,{}),"aria-label":o,theme:"secondary",isDisabled:n.isDisabled,...n}),(0,l.jsx)(r.u,{anchorRef:i,label:o,placement:"top"})]})},E=n(41012),A=n(41248),D=n.n(A);let G=(0,d.forwardRef)(e=>{let{onFileUpload:a,...n}=e,t=(0,d.useRef)(null),{t:i}=(0,T.$G)(),s=(0,d.useCallback)(()=>{var e;null==t||null===(e=t.current)||void 0===e||e.click()},[]),o=(0,d.useCallback)(e=>{if(e.target.files){let n=Array.from(e.target.files);e.target.value="",a(n)}},[a]),[c,m]=(0,d.useState)(null),u=i("Select attachment");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(x.Z,{as:"button",ref:m,size:"sm",theme:"ghost",showIconOnly:"always",iconLeft:(0,l.jsx)(N.SC,{}),"aria-label":u,isDisabled:n.isDisabled,onClick:s,"data-button-file-input":!0}),(0,l.jsx)(r.u,{anchorRef:c,label:u,placement:"top"})]}),(0,l.jsx)("input",{className:D().input,ref:t,type:"file",multiple:!0,onChange:o})]})});G.displayName="ChatMessageFileInputButton";var O=n(67265),R=n(21054),K=n(48675),j=n(14813),U=n(96522),H=n.n(U);let ChatMessageInputAttachment=e=>{let{file:a,index:t,onDismiss:i}=e,r=(0,d.useCallback)(()=>{i(t)},[i,t]),s=(0,j.J$)(n(71745),a);return(0,l.jsx)(O.Z,{className:H().attachment,onDismiss:r,children:(0,l.jsx)(R.ZP,{file:s})})};var inputFooter_ChatMessageInputAttachments=e=>{let{files:a,onFileRemoved:t}=e,i=(0,d.useCallback)(e=>{t(e)},[t]),r=(0,j.mj)(n(79315),a),s=function(){let e=(0,d.useRef)(0),a=(0,d.useRef)(new WeakMap),n=(0,d.useCallback)(n=>(a.current.has(n)||a.current.set(n,e.current++),a.current.get(n)),[]);return n}();return a.length?(0,l.jsx)(K.Z,{className:H().container,children:r.map((e,a)=>(0,l.jsx)(ChatMessageInputAttachment,{file:e,index:a,onDismiss:i},s(e)))}):null},inputFooter_ChatMessageSendButton=e=>{let{className:a,isEditing:n,...t}=e,{t:i}=(0,T.$G)(),[s,o]=(0,d.useState)(null),c=i("Send message");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.Z,{as:"button",ref:o,className:a,size:"sm",showIconOnly:"always",iconLeft:n?(0,l.jsx)(N.DL,{}):(0,l.jsx)(N.Kq,{}),"aria-label":c,theme:t.isDisabled?"ghost":"primary",isDisabled:t.isDisabled,"data-button-send":!0,...t}),(0,l.jsx)(r.u,{anchorRef:s,label:c,placement:"top"})]})},V=n(96265),W=n.n(V);let useValueChangeListeners=e=>{let a=(0,d.useRef)([]),n=(0,d.useCallback)(e=>{a.current.forEach(a=>a(e))},[]),t=(0,d.useCallback)(e=>{n(e.target.value)},[n]),i=(0,d.useCallback)(n=>{if(a.current.push(n),1===a.current.length){var i;null===(i=e.current)||void 0===i||i.addEventListener("input",t)}},[e,t]),l=(0,d.useCallback)(n=>{if(a.current=a.current.filter(e=>e!==n),0===a.current.length){var i;null===(i=e.current)||void 0===i||i.removeEventListener("input",t)}},[e,t]);return(0,d.useEffect)(()=>()=>{var a;null===(a=e.current)||void 0===a||a.removeEventListener("input",t)},[e,t]),{addValueChangedListener:i,removeValueChangedListener:l,onValueChange:n}},usePlaceholderOverflow=(e,a)=>{let n=(0,d.useRef)(null),t=(0,d.useRef)(null),i=(0,d.useRef)([]),l=(0,d.useCallback)(e=>{i.current.forEach(a=>a(e))},[]),r=(0,d.useCallback)(e=>{i.current.push(e)},[]),s=(0,d.useCallback)(e=>{i.current=i.current.filter(a=>a!==e)},[]);(0,d.useEffect)(()=>{if(!a.current||!e.current)return;let i=new ResizeObserver(e=>{n.current=null==e?void 0:e[0].borderBoxSize[0].inlineSize,l(e)}),r=new ResizeObserver(e=>{var a;t.current=null==e?void 0:null===(a=e[0].contentBoxSize)||void 0===a?void 0:a[0].inlineSize,l(e)});return i.observe(e.current),r.observe(a.current),()=>{i.disconnect(),r.disconnect()}},[e,a,l]);let o=(0,d.useCallback)(e=>null!==t.current&&null!==n.current&&!!a.current&&(a.current.textContent=e,t.current>n.current),[a]);return{addPlaceholderResizeListener:r,removePlaceholderResizeListener:s,getPlaceholderOverflow:o}},Z=(0,d.forwardRef)((e,a)=>{let{className:n,onInput:t,onChange:i,footer:r,placeholder:s,...o}=e,c=(0,d.useRef)(null),m=(0,d.useRef)(null),u=(0,d.useRef)(null),p=(0,v.G6)((0,w.F)()),g=(0,d.useCallback)(()=>{if(c.current&&m.current){var e;c.current.dataset.replicatedValue=m.current.value,p&&((e=m.current).scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&requestAnimationFrame(()=>{c.current&&(c.current.style.transform="translateY(0)",c.current.style.transform="unset")})}},[p]),_=(0,d.useCallback)(e=>{null==t||t(e),g()},[t,g]),{addValueChangedListener:k,removeValueChangedListener:b,onValueChange:h}=useValueChangeListeners(m),{getPlaceholderOverflow:F,addPlaceholderResizeListener:S,removePlaceholderResizeListener:y}=usePlaceholderOverflow(m,u);return(0,d.useImperativeHandle)(a,()=>({focus:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.focus()},blur:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.blur()},addEventListener:(e,a,n)=>{var t;return null===(t=m.current)||void 0===t?void 0:t.addEventListener(e,a,n)},removeEventListener:(e,a,n)=>{var t;return null===(t=m.current)||void 0===t?void 0:t.removeEventListener(e,a,n)},getValue:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.value},setValue:(e,a)=>{if(!m.current)return;let n=m.current.selectionStart,t=m.current.selectionEnd;m.current.value=e,m.current.scrollTo(0,m.current.scrollHeight),g(),a&&m.current.setSelectionRange(...a(n,t)),h(e)},addValueChangedListener:k,removeValueChangedListener:b,getSelectionStart:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.selectionStart},getSelectionEnd:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.selectionEnd},setSelectionRange:(e,a,n)=>{var t;return null===(t=m.current)||void 0===t?void 0:t.setSelectionRange(e,a,null!=n?n:"none")},getPlaceholderOverflow:F,addPlaceholderResizeListener:S,removePlaceholderResizeListener:y}),[g,k,b,h,F,S,y]),(0,l.jsxs)("div",{className:(0,f.$)(W().growWrap,n),ref:c,children:[(0,l.jsx)("textarea",{className:W().textArea,ref:m,rows:1,onInput:_,onChange:i,placeholder:s,...o}),(0,l.jsx)("div",{className:W().hidden,ref:u}),r]})});Z.displayName="GrowingTextArea";var q=n(21041),Q=n(40999),z=n(16177),$=n(89357),X=n(20740),J=n(98092),Y=n(61084),ee=n(63366),ea=n.n(ee),en=n(46895);let EditorStatePlugin_useValueChangeListeners=()=>{let e=(0,d.useRef)(new Set),a=(0,d.useCallback)(a=>{e.current.forEach(e=>{e(a)})},[]),n=(0,d.useCallback)(a=>{e.current.add(a)},[]),t=(0,d.useCallback)(a=>{e.current.delete(a)},[]);return{addValueChangedListener:n,removeValueChangedListener:t,onValueChange:a}};var textEditor_EditorStatePlugin=e=>{let{forwardedRef:a,outerOnChange:n,onKeyDown:t}=e,[i]=(0,en.g)(),{addValueChangedListener:l,removeValueChangedListener:r,onValueChange:s}=EditorStatePlugin_useValueChangeListeners();return(0,d.useEffect)(()=>{let e=i.registerUpdateListener(e=>{let{editorState:a}=e;a.read(()=>{let e=(0,Y.Gv)().getTextContent();s(e),n()})});return()=>{e()}},[i,s,n]),(0,d.useImperativeHandle)(a,()=>({focus:()=>{i.focus()},blur:()=>{i.blur(),i.update(()=>{let e=(0,Y.dL)();(0,Y.OP)(e)&&(e.anchor.offset=0,e.focus.offset=0,(0,Y.oq)(null))})},addEventListener:(e,a,n)=>{var t;null===(t=i.getRootElement())||void 0===t||t.addEventListener(e,a,n)},removeEventListener:(e,a,n)=>{var t;null===(t=i.getRootElement())||void 0===t||t.removeEventListener(e,a,n)},getValue:()=>{let e="";return i.getEditorState().read(()=>{e=(0,Y.Gv)().getTextContent()}),e},setValue:(e,a)=>{i.update(()=>{let n=(0,Y.dL)(),t=(0,Y.OP)(n)?n.anchor.offset:0,i=(0,Y.OP)(n)?n.focus.offset:0,l=(0,Y.Gv)(),r=(0,Y.BE)(),s=(0,Y.MX)(e);if(r.append(s),l.clear(),l.append(r),a){let[e,n]=a(t,i);s.select(e,n)}})},addValueChangedListener:l,removeValueChangedListener:r,getSelectionStart:()=>{let e=0;return i.getEditorState().read(()=>{let a=(0,Y.dL)();a&&(0,Y.OP)(a)&&(e=a.anchor.offset)}),e},getSelectionEnd:()=>{let e=0;return i.getEditorState().read(()=>{let a=(0,Y.dL)();a&&(0,Y.OP)(a)&&(e=a.focus.offset)}),e},setSelectionRange:(e,a)=>{i.update(()=>{let n=(0,Y.Gv)(),t=n.getFirstChild();if(t&&(0,Y.Rl)(t)){let n=t.getFirstChild();n&&(0,Y.Gg)(n)&&n.select(e,a)}})},getPlaceholderOverflow:()=>!1,addPlaceholderResizeListener:()=>{},removePlaceholderResizeListener:()=>{}}),[i,l,r]),(0,d.useEffect)(()=>{if(!t)return;let e=i.getRootElement();if(!e)return;let domKeyDownHandler=e=>{t(e)};return e.addEventListener("keydown",domKeyDownHandler),()=>{e.removeEventListener("keydown",domKeyDownHandler)}},[i,t]),null};let et={namespace:"MyEditor",onError:function(e){console.error(e)},nodes:[],editorState:()=>{let e=(0,Y.Gv)();if(null===e.getFirstChild()){let a=(0,Y.BE)();e.append(a)}return null}},ei=(0,d.forwardRef)((e,a)=>{let{className:n,onChange:t,footer:i,placeholder:r,onKeyDown:s}=e,o=(0,d.useMemo)(()=>({...et,editorState:()=>{let e=(0,Y.Gv)();if(null===e.getFirstChild()){let a=(0,Y.BE)();e.append(a)}return null}}),[]);return(0,l.jsx)(Q.R,{initialConfig:o,children:(0,l.jsxs)("div",{className:(0,f.$)(ea().textEditorContainer,ea().textArea,n),children:[(0,l.jsx)(J.B,{contentEditable:(0,l.jsx)(z.f,{className:ea().textEditor}),placeholder:(0,l.jsx)("div",{className:ea().placeholder,children:r}),ErrorBoundary:$.g}),i,(0,l.jsx)(X.e,{}),(0,l.jsx)(q.C,{}),(0,l.jsx)(textEditor_EditorStatePlugin,{forwardedRef:a,outerOnChange:t,onKeyDown:s})]})})});ei.displayName="ChatInputRichTextEditor";var el=n(4095);(t=i||(i={}))[t.BACKSPACE=8]="BACKSPACE",t[t.TAB=9]="TAB",t[t.ENTER=13]="ENTER",t[t.SPACE=32]="SPACE",t[t.ESC=27]="ESC",t[t.UP=38]="UP",t[t.DOWN=40]="DOWN",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.HOME=36]="HOME",t[t.END=35]="END";var er=i;let getLastHumanMessageText=e=>{if(!e)return null;for(let a=e.length-1;a>=0;a--){let{node:t}=(0,c.readInlineData)(n(33848),e[a]);if((0,el.Q1)(t))return t.text}return null},useOnKeyDown=(e,a,t,i)=>{let l=(0,c.useFragment)(n(45830),e),r=(0,d.useCallback)(e=>{e.preventDefault(),t()},[t]),s=(0,d.useCallback)(e=>{var n,t;if(!(null===(n=a.current)||void 0===n?void 0:n.getValue())){e.preventDefault();let n=getLastHumanMessageText(l);n&&(null===(t=a.current)||void 0===t||t.setValue(n,(e,a)=>[e+n.length,a+n.length]),i())}},[l,a,i]);return(0,d.useCallback)(e=>{e.shiftKey||e.keyCode!=er.ENTER?e.keyCode==er.UP&&s(e):r(e)},[r,s])},useGlobalShortcutFocus=e=>{(0,d.useEffect)(()=>{var a,n;let focusTextbox=()=>{var a;null===(a=e.current)||void 0===a||a.focus()};return null===(n=window.electronAPI)||void 0===n||null===(a=n.onGlobalShortcutTriggered)||void 0===a||a.call(n,focusTextbox),()=>{var e,a;null===(a=window.electronAPI)||void 0===a||null===(e=a.removeGlobalShortcutListener)||void 0===e||e.call(a,focusTextbox)}},[e])},es=(0,d.forwardRef)((e,a)=>{let{viewer:t,edges:i,className:r,submitMessage:s,onChange:o,footer:m,placeholderText:u,onPaste:p}=e,g=(0,c.useFragment)(n(17971),t),_=(0,c.useFragment)(n(28159),i),k=(0,d.useRef)(null);useGlobalShortcutFocus(k);let b=useOnKeyDown(_,k,s,o),h=(0,d.useMemo)(()=>(0,S.Z)([k,a]),[k,a]);return g.formattedChatInput?(0,l.jsx)(ei,{ref:h,className:r,placeholder:u,onChange:o,onKeyDown:b,onPaste:p,footer:m}):(0,l.jsx)(Z,{ref:h,className:r,placeholder:u,onChange:o,onKeyDown:b,onPaste:p,footer:m})});es.displayName="ChatMessageTextArea";var eo=n(41143),ed=n.n(eo),ec=n(31657),em=n(73331),eu=n(6269),ep=n.n(eu),eg=n(96384);let hideVoiceInputButton=e=>(0,v.P)(e)||(0,v.G6)(e),getSpeechRecognition=()=>{let{userAgent:e}=window.navigator;return hideVoiceInputButton(e)?null:"undefined"!=typeof SpeechRecognition?SpeechRecognition:"undefined"!=typeof webkitSpeechRecognition?webkitSpeechRecognition:null},getMessageFromErrorEvent=(e,a)=>{switch(a.error){case"no-speech":return e("No speech was detected. Try again.");case"audio-capture":return e("No microphone was found. Ensure that a microphone is installed and that microphone settings are configured correctly.");case"not-allowed":case"service-not-allowed":return e("Permission to use microphone was denied. Update your browser permission settings and try again.");case"network":return e("A network error occurred. Check your internet connection and try again.");case"language-not-supported":return e("The language {{language}} is not supported by your browser.",{language:(null==a?void 0:a.target)&&"lang"in a.target&&a.target.lang||"en"});case"aborted":if("No speech detected"===a.message)return e("No speech was detected. Try again.");return null;default:return e("An error occurred: {{error}}",{error:a.error})}};let SpeechRecognitionError=class SpeechRecognitionError extends em.n9{constructor(e){let a=[e.error,e.message].filter(Boolean).join(": ");super(a),this.name="SpeechRecognitionError"}};let logErrorEvent=e=>{("aborted"!==e.error||"No speech detected"===e.message)&&(0,em.H)(new SpeechRecognitionError(e))},createRecognition=e=>{let{onStart:a,onEnd:n,onError:t,onResult:i}=e,l=getSpeechRecognition();ed()(l,"SpeechRecognition is not supported");let r=new l;return r.continuous=!0,r.interimResults=!0,r.onstart=a,r.onspeechend=()=>{r.stop()},r.onend=n,r.onerror=t,r.onresult=i,r},useSpeechRecognition=(e,a)=>{let{t:n}=(0,T.$G)(),[t,i]=(0,d.useState)(!1),l=(0,d.useRef)(!1),[r,s]=(0,d.useState)(null),o=(0,d.useCallback)(()=>l.current,[]),c=(0,d.useContext)(ec.Z),m=(0,d.useRef)(null),u=(0,d.useCallback)(()=>{var e;null===(e=m.current)||void 0===e||e.stop(),m.current=null},[]),p=(0,d.useCallback)(()=>{var e;null===(e=m.current)||void 0===e||e.abort(),m.current=null},[]),g=(0,d.useCallback)(()=>{var t;s(null);let r=(null===(t=e.current)||void 0===t?void 0:t.getValue())||"",o=null==c?void 0:c.botId,d=null==c?void 0:c.model,p=null==c?void 0:c.chatId,g=createRecognition({onStart:()=>{var a,n;null===(a=e.current)||void 0===a||a.blur(),null===(n=e.current)||void 0===n||n.addEventListener("focus",u),i(!0),(0,F.Z)("poe/action_log",{action_type:(0,eg.E)(B.Z.start_voice_record),bot_id:o,chat_id:p,model_name:d})},onEnd:()=>{var a,n;i(!1),null===(a=e.current)||void 0===a||a.focus(),null===(n=e.current)||void 0===n||n.removeEventListener("focus",u),(0,F.Z)("poe/action_log",{action_type:(0,eg.E)(B.Z.finish_voice_record),bot_id:o,chat_id:p,model_name:d})},onError:e=>{logErrorEvent(e);let a=getMessageFromErrorEvent(n,e);a&&s(a)},onResult:n=>{let{results:t}=n;if(m.current===g){let n=Array.from(t).filter(e=>e[0].confidence>0).map(e=>e[0].transcript).join("");if(n){var i;l.current=!0,null===(i=e.current)||void 0===i||i.setValue(r+n),a()}}}});m.current=g,g.start()},[e,a,i,u,n,c]);return(0,d.useEffect)(()=>{let a=e.current,resetVoiceInputWhenClearInput=e=>{""==e&&(l.current=!1)};return null==a||a.addValueChangedListener(resetVoiceInputWhenClearInput),()=>{null==a||a.removeValueChangedListener(resetVoiceInputWhenClearInput)}},[e]),(0,d.useEffect)(()=>()=>{p()},[p]),{isRunning:t,startRecognition:g,stopRecognition:u,abortRecognition:p,getVoiceInputUsed:o,errorMessage:r}},e_=(0,d.forwardRef)((e,a)=>{let{className:n,chatInputRef:t,onInputChange:i,...s}=e,{t:o}=(0,T.$G)(),{isRunning:c,startRecognition:m,stopRecognition:u,abortRecognition:p,getVoiceInputUsed:g,errorMessage:_}=useSpeechRecognition(t,i);(0,d.useImperativeHandle)(a,()=>({startRecognition:m,stopRecognition:u,abortRecognition:p,getVoiceInputUsed:g}),[m,u,p,g]);let[k,b]=(0,d.useState)(null),h=_||o("Use microphone");return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:ep().container,children:[(0,l.jsx)(x.Z,{as:"button",size:"sm",theme:"ghost",showIconOnly:"always",iconLeft:(0,l.jsx)(N.lE,{}),ref:b,className:(0,f.$)(ep().button,n),onClick:c?u:m,"aria-selected":!!c,isDisabled:s.isDisabled,"data-button-voice-input":!0,...s}),(0,l.jsx)(r.u,{anchorRef:k,label:h,placement:"top",open:!!_||void 0,theme:_?"error":"base"})]})})});e_.displayName="ChatMessageVoiceInputButtonInner";let ek=(0,d.forwardRef)((e,a)=>{let[n,t]=(0,d.useState)(!1),i=(0,w.F)();return((0,d.useEffect)(()=>{t(!!getSpeechRecognition()&&!(0,v.Ev)(i))},[i]),hideVoiceInputButton(i))?null:(0,l.jsx)(e_,{ref:a,...e,isDisabled:!n})});ek.displayName="ChatMessageVoiceInputButton";var eb=n(64913),eh=n(47450),ef=n(12879),eF=n(44311),eS=n(26246),ey=n(89582),inputFooter_useMultibotAtMention=e=>{let{selectBot:a,chatInputRef:t,chatInputSelectorInputsRef:i,mentionedBotsSetInputs:l}=e,r=(0,d.useRef)(null),s=(0,d.useRef)(null),o=(0,d.useCallback)(e=>{let i;if((0,ey.rw)(e))i=e.mention,a(e,s.current);else{let t=(0,eF.readInlineData)(n(23840),e);i=(null==t?void 0:t.handle)||null,a(t,s.current)}if(r.current=i,i){var l;null===(l=t.current)||void 0===l||l.focus()}},[t,a]),c=(0,d.useRef)(""),m=(0,d.useCallback)(()=>{var e,a,n,r,o;let d=(null===(e=t.current)||void 0===e?void 0:e.getValue())||"";if(c.current!==d){let{mention:e,start:m,end:u}=(0,eS.XX)(d,(null===(a=t.current)||void 0===a?void 0:a.getSelectionStart())||0,(null===(n=t.current)||void 0===n?void 0:n.getSelectionEnd())||0);s.current={start:m,end:u},l(d,e),null===(o=i.current)||void 0===o||null===(r=o.setInputs)||void 0===r||r.call(o,e),c.current=d}},[i,l,t]);return{onInputChange:m,selectBot:o}};let importAddBotToChatModal=()=>n.e(3126).then(n.bind(n,83126)),ev=o()(()=>n.e(7821).then(n.bind(n,77821)),{loadableGenerated:{webpack:()=>[77821]},ssr:!1}),eC=o()(()=>n.e(3449).then(n.bind(n,93449)),{loadableGenerated:{webpack:()=>[93449]},ssr:!1}),ew=(0,d.forwardRef)((e,a)=>{let{bot:t,viewer:i,edges:s,chat:o,disableSend:L,onSubmitMessage:N,placeholderText:T,isBotResponding:x,fileHandlerRef:A,selectBot:D,setTargetedBot:O,setInputErrorMessage:R,onInputCleared:K,handleCancelEdit:j,accessoryChatBreakButton:U,disableCollapsibleBehavior:H,autofocusOnTouchDevice:V=!1}=e,W=(0,c.useFragment)(n(80752),t),Z=(0,c.useFragment)(n(52103),s),{fileUploadSizeLimits:q,submitMessageParamsAsDict:Q,...z}=(0,c.useFragment)(n(4027),i),$=(0,c.useFragment)(n(91305),o),X=(0,d.useRef)(null),{isLoggedInUser:J}=(0,m.b)(),Y=(0,w.F)(),ee=JSON.parse(q),ea=ee.total,en=(0,d.useCallback)(e=>{var a,n;eK((null===(n=eD.current)||void 0===n?void 0:null===(a=n.getValue())||void 0===a?void 0:a.trim())===""&&0===e.mainAttachments.length)},[]),et=(0,g.ZP)(),ei=(0,d.useCallback)(e=>{et({type:g.pC.error,content:e})},[et]),{attachments:el,handleFileUpload:er,handleFileRemove:eo,addFileToCustomUIControl:ed,removeFileFromCustomUIControl:ec,removeAllFilesFromCustomUIControl:em,clearFilesFromCustomUI:eu,clearFiles:ep,isFileOverLimit:eg,totalFileSize:e_}=(0,eh.ZP)({bot:W,chat:$||null,viewer:z,onFileChange:en,onError:ei}),[eF,eS]=(0,b.k)(),ey=(0,d.useMemo)(()=>eF[W.handle]||{parameters:{},bindings:{}},[eF,W.handle]),{draft:ew,updateDraft:eL,clearDraft:eI}=(0,k.cX)(),eB=(0,d.useCallback)(e=>{let a={...eF};a[W.handle]=e,eS(a),eL(e=>({...e,botHandleToCustomUIMenuState:a}))},[eF,eS,W.handle,eL]),eP=(0,d.useCallback)((e,a)=>{ed(W.handle,e,a)},[ed,W.handle]),eM=(0,d.useCallback)((e,a)=>{ec(W.handle,e,a)},[ec,W.handle]),eN=(0,d.useCallback)(e=>{em(W.handle,e)},[em,W.handle]),eT=(0,d.useCallback)(()=>{eu(W.handle)},[eu,W.handle]),ex=(0,d.useMemo)(()=>({featureFlags:{attachments:!0},attachments:el.attachmentsByBot[W.handle]||{},addAttachments:eP,removeAttachment:eM,removeParamAttachments:eN,clearAttachments:eT}),[el.attachmentsByBot,W.handle,eP,eM,eN,eT]);(0,d.useImperativeHandle)(A,()=>({handleFiles:er,clearAllFiles:ep}),[er,ep]);let eE=el.mainAttachments,eA=(0,d.useMemo)(()=>{if(eE.length>0)return!0;let e=el.attachmentsByBot[W.handle]||{},a=Object.keys(e),n=!1;return a.forEach(a=>{let t=e[a]||[];t.length>0&&(n=!0)}),n},[el.attachmentsByBot,eE,W.handle]),eD=(0,d.useRef)(null),eG=(0,d.useRef)(null),eO=(0,d.useMemo)(()=>(0,S.Z)([eD,a]),[eD,a]),[eR,eK]=(0,d.useState)(!0),[ej,eU]=(0,d.useState)(!1),eH=(0,d.useRef)(null),{queryReference:eV,debouncePromise:eW,setInputs:eZ}=(0,ef.t)({chat:$||null,setTargetedBot:O,setInputErrorMessage:R}),{selectBot:eq,onInputChange:eQ}=inputFooter_useMultibotAtMention({selectBot:D,chatInputRef:eD,chatInputSelectorInputsRef:eH,mentionedBotsSetInputs:eZ}),ez=(0,d.useCallback)(()=>{var e;let a=(null===(e=eD.current)||void 0===e?void 0:e.getValue())||"",n=(null==a?void 0:a.trim())===""&&!eA;eK(n),eQ(),n&&(null==K||K())},[eA,eQ,K]),e$=(0,d.useCallback)(function(){for(var e,a=arguments.length,n=Array(a),t=0;t<a;t++)n[t]=arguments[t];ez(...n);let i=(null===(e=eD.current)||void 0===e?void 0:e.getValue())||"";eL(e=>({...e,content:i}))},[ez,eL]),{isDeleted:eX}=(0,h.iZ)(W),eJ=(0,d.useRef)(null),eY=(0,d.useCallback)(()=>{var e;null===(e=eJ.current)||void 0===e||e.call(eJ)},[eJ]);(0,d.useEffect)(()=>{eY()},[eY,ej]);let{editingMessageData:e0,isLoadingEdit:e1}=(0,y.m)(),e2=!!e0,e3=L||(null==$?void 0:$.isOptimistic)&&x||eR||e_>ea||ej||eg;(0,d.useEffect)(()=>{!e2&&eD.current&&(ew.botHandleToCustomUIMenuState&&eS(ew.botHandleToCustomUIMenuState),void 0!==ew.content&&(eD.current.setValue(ew.content),ez()))},[eD]),(0,d.useEffect)(()=>{e0&&eD.current&&e0.text&&(eD.current.setValue(e0.text),eD.current.focus())},[e0,eD]);let e5=(0,d.useCallback)(()=>{var e,a;if(null===(e=eG.current)||void 0===e||e.abortRecognition(),eY(),navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&!(0,v.ED)(Y)&&(null===(a=eD.current)||void 0===a||a.blur()),e3)return;eI();let{submissionAttachments:n,stateCorrections:t}=(0,eb.s_)(el.mainAttachments,el.attachmentsByBot[W.handle]||{}),i={...ey.parameters,...t};return N(eD,eG,n,0===Object.keys(i).length?void 0:i,!!Q,ep)},[eY,e3,el.mainAttachments,el.attachmentsByBot,W.handle,ey,N,ep,eI,Q,Y]),e4=(0,d.useCallback)(()=>{var e;(!navigator.maxTouchPoints||!(navigator.maxTouchPoints>0)||(0,v.ED)(Y))&&(null===(e=eD.current)||void 0===e||e.focus())},[eD,Y]),e6=(0,d.useRef)(!1),e7=function(e){let a=(0,d.useRef)(e);return a.current=e,a}((0,M.fo)());(0,d.useEffect)(()=>{var e;(J||!0!==e6.current)&&e7.current!==M.YU.canvasFullWidth&&(!navigator.maxTouchPoints||!(navigator.maxTouchPoints>0)||(0,v.ED)(Y)||V)&&(null===(e=eD.current)||void 0===e||e.focus(),e6.current=!0)},[W.id,J,V,e7,Y]),(0,d.useEffect)(()=>{let e=eD.current;return null==e||e.addValueChangedListener(e$),()=>{null==e||e.removeValueChangedListener(e$)}},[e$]);let e9=eX||!W.allowsImageAttachments&&e_>ea,e8=function(e){let{handleFileUpload:a,isFileInputDisabled:n}=e;return(0,d.useCallback)(e=>{if(n)return;let t=function(e){var a,n;let t=Array.from((null===(a=e.clipboardData)||void 0===a?void 0:a.files)||[]);if(0===t.length)return[];let i=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return i&&!function(e){try{var a;let n=new DOMParser().parseFromString(e,"text/html");return 1===n.body.childElementCount&&(null===(a=n.body.firstElementChild)||void 0===a?void 0:a.tagName)==="IMG"}catch(e){return console.error("there was an issue parsing pasted html"),!1}}(i)?[]:t}(e);0!==t.length&&(a(t),e.preventDefault())},[a,n])}({isFileInputDisabled:e9,handleFileUpload:er}),[ae,aa]=(0,d.useState)(!1),an=(0,d.useCallback)(()=>{aa(!1),e5()},[aa,e5]),at=(0,d.useCallback)(()=>{aa(!1)},[aa]),ai=(0,d.useMemo)(()=>({close:at,botHandle:W.handle,onSubmitAndClose:an}),[W.handle,at,an]),al=(0,d.useRef)(!1),ar=(0,d.useCallback)(()=>{e5(),al.current||((0,C.nL)(C.wy.SendChatClicked),al.current=!0)},[e5]),as=(0,_.el)(ar,{viewer:z,viewObjectType:P.Z.limited_access_bot,bot:W}),ao=(0,d.useRef)(null),ad=(0,f.$)(I().inputContainer,e2&&I().editingMode),ac=(0,d.useCallback)(()=>{(0,F.Z)("poe/action_log",{action_type:B.Z.open_custom_ui_menu,bot_id:W.id,action_metadata:{}})},[W.id]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.Z,{isOpen:ae,onRequestClose:at,body:importAddBotToChatModal,bodyProps:ai,variant:"compact"}),(0,l.jsx)(r.pF,{children:(0,l.jsx)("div",{ref:ao,className:ad,onClick:e4,"data-input-is-empty":eR,"data-disable-collapsed-layout":H,tabIndex:-1,children:(0,l.jsxs)(E.qo,{anchorRef:ao,dismissAction:eJ,children:[(0,l.jsx)(ev,{viewer:z,className:I().botSelector,chatInputSelectorInputsRef:eH,anchorRef:ao,chatInputRef:eD,chat:$,selectBot:eq,onIsActiveChange:eU}),(0,l.jsx)(u.Z,{fallback:null,children:(0,l.jsx)(eC,{queryReference:eV,debouncePromise:eW,setInputs:eZ,chat:$,setInputErrorMessage:R,setTargetedBot:O})}),(0,l.jsx)(es,{ref:eO,viewer:z,edges:Z,className:I().textArea,submitMessage:as,onChange:e$,placeholderText:T,onPaste:e8,footer:(0,l.jsx)(inputFooter_ChatMessageInputAttachments,{files:eE,onFileRemoved:eo})}),(0,l.jsxs)("div",{className:I().actionContainerLeft,children:[!!U&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{onClick:eY,children:U}),(0,l.jsx)("div",{className:I().breakSeparator})]}),(0,l.jsx)(G,{isDisabled:e9,onFileUpload:er,ref:X}),(0,l.jsx)(E.ZP,{customUIDefinition:W.customUIDefinition,customUIMenuState:ey,messageContext:ex,updateCustomUIMenuState:eB,logOpen:ac})]}),(0,l.jsxs)("div",{className:I().actionContainerRight,children:[(0,l.jsx)(ek,{ref:eG,chatInputRef:eD,onInputChange:e$,isDisabled:eX}),e2&&j&&(0,l.jsx)(inputFooter_ChatMessageCancelButton,{className:I().cancelButton,onClick:j}),(0,l.jsx)(inputFooter_ChatMessageSendButton,{className:I().sendButton,onClick:as,isDisabled:e3,isEditing:e2,isLoading:e1})]})]})})})]})});ew.displayName="ChatMessageInputContainer";var eL=ew},64913:function(e,a,n){"use strict";n.d(a,{yJ:function(){return buildCustomUIPrompt},s_:function(){return computeSubmissionAttachments},ci:function(){return prettyPrintParameterState}});let attachmentAlreadyHasName=(e,a)=>e.includes(a),addNonceToFileName=(e,a)=>{let n=e.split(".");return n[0]=n[0]+"_"+a+"_",n.join(".")},findNonDuplicateFileName=(e,a)=>{let n=a,t=0;for(;attachmentAlreadyHasName(e,n);)n=addNonceToFileName(a,++t);return n},applyFilePickerAttachments=(e,a)=>{let n=[...e],t=[];return a.forEach(e=>{let a=n.map(e=>e.name),i=findNonDuplicateFileName(a,e.name);n.push(new File([e],i,{type:e.type})),t.push(i)}),{updatedAttachments:n,finalizedPickerState:t}},computeSubmissionAttachments=(e,a)=>{let n=e,t={},i=Object.keys(a);return i.forEach(e=>{let{updatedAttachments:i,finalizedPickerState:l}=applyFilePickerAttachments(n,a[e]);n=i,t[e]=l.length>0?l.join(","):void 0}),{submissionAttachments:n,stateCorrections:t}},alphabeticalSort=(e,a)=>e<a?-1:e>a?1:0,buildCustomUIPrompt=(e,a)=>{let n=Object.keys(a).sort((e,a)=>{let n=e.startsWith("poe_"),t=a.startsWith("poe_");return t&&!n?-1:n&&!t?1:alphabeticalSort(e,a)}).filter(a=>!e.includes("--".concat(a," "))).reduce((e,n)=>{let t=a[n];return null!=t?"".concat(e," --").concat(n," ").concat(t):e},"");return e+n},prettyPrintParameterState=e=>Object.entries(e).map(e=>{let[a,n]=e;return"".concat(a,": ").concat(n)}).join(", ")},39752:function(e,a,n){"use strict";n.d(a,{A:function(){return autocompleteBotHandle},X:function(){return useIsBotResponding}}),n(67294);var t=n(22578),i=n(25008),l=n(64291),r=n(35715),s=n(69388);let useIsBotResponding=e=>{let a=(0,t.useFragment)(n(93857),e),{isMessageCancelled:i}=(0,l.Z)(a);if(!a)return!1;let{author:o,isOptimistic:d,state:c,timeoutLevel:m}=a;return o==r.Z.human&&d&&c==s.Z.complete||c==s.Z.incomplete&&(null!=m?m:0)<3&&!i},autocompleteBotHandle=function(e,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(a&&e.current){var t,l,r;if(n){let t=n.end-n.start,i=(null===(l=e.current.getValue())||void 0===l?void 0:l.slice(0,n.start))+a+" "+(null===(r=e.current.getValue())||void 0===r?void 0:r.slice(n.end)),s=a.length+1-t;e.current.setValue(i,(e,n)=>[Math.max(e+s,a.length+1),Math.max(n+s,a.length+1)]);return}let s="@".concat(a," "),o=e.current.getValue(),d=i.zg.exec(o||""),c=null==d?void 0:null===(t=d.groups)||void 0===t?void 0:t.mention,[m,u]=c&&o?["@".concat(a," ")+o.slice(c.length),s.length-c.length]:["@".concat(a," ")+(o||""),s.length];e.current.setValue(m,(e,a)=>[Math.max(e+u,s.length),Math.max(a+u,s.length)])}}},47450:function(e,a,n){"use strict";n.d(a,{$8:function(){return MessageAttachmentsProvider},IV:function(){return addAttachmentsToFileHandler},cy:function(){return useMessageAttachments}});var t=n(85893),i=n(67294),l=n(22120),r=n(22578),s=n(21054),o=n(24579),d=n(50311),c=n(93105),m=n(9729),u=n(30038),p=n(96384);let g=(0,i.createContext)(null);function MessageAttachmentsProvider(e){let a=(0,i.useState)({mainAttachments:[],attachmentsByBot:{}});return(0,t.jsx)(g.Provider,{value:a,children:e.children})}function useMessageAttachments(){let e=(0,i.useContext)(g);if(null===e)throw Error("This can only be invoked inside MessageAttachmentsProvider");return e}let completeAttachmentsForBot=(e,a)=>{let n=a.mainAttachments,t=a.attachmentsByBot[e]||{},i=Object.keys(t).reduce((e,a)=>[...e,...t[a]],n);return i},getAttachmentData=e=>(0,r.readInlineData)(n(37446),e),addAttachmentsToFileHandler=async(e,a)=>{if(!(null==a?void 0:a.current)||(a.current.clearAllFiles(),o.i.clear(),!e.length))return;let n=e.map(e=>getAttachmentData(e)),t=await Promise.all(n.map(e=>fetch(e.url).then(e=>e.blob()))),i=[];for(let e=0;e<t.length;e++){let a=t[e],l=n[e].name,r=new File([a],l,{type:n[e].file.mimeType});o.i.set(r,{id:n[e].attachmentId}),i.push(r)}a.current.handleFiles(i)};a.ZP=e=>{let{bot:a,chat:t,viewer:g,onFileChange:_,onError:k}=e,{botId:b,handle:h}=(0,r.useFragment)(n(28333),a),{fileUploadSizeLimits:f}=(0,r.useFragment)(n(16641),g),[F,S]=useMessageAttachments(),{t:y}=(0,l.$G)(),v=(0,i.useCallback)(e=>{let a=(0,r.readInlineData)(n(70827),t||null);e.forEach(e=>{(0,d.a)(e),(0,m.Z)("poe/action_log",{action_type:(0,p.E)(u.Z.attach_file_in_chat_input),bot_id:b,chat_id:null==a?void 0:a.chatId,action_metadata:{file_size_in_kB:Math.round(e.size/1024),file_format:e.type}})}),S(a=>{let n=a.mainAttachments,t=[...n,...e],i={mainAttachments:t,attachmentsByBot:a.attachmentsByBot};return null==_||_(i),i})},[_,S,b,t]),C=(0,i.useCallback)(e=>{S(a=>{let n=a.mainAttachments,t=n.filter((a,n)=>n!==e),i={mainAttachments:t,attachmentsByBot:a.attachmentsByBot};return null==_||_(i),i})},[S,_]),w=(0,i.useCallback)(()=>{o.i.clear(),S(e=>{let a={mainAttachments:[],attachmentsByBot:e.attachmentsByBot};return null==_||_(a),a})},[_,S]),L=(0,i.useCallback)((e,a,n)=>{S(t=>{let i=t.attachmentsByBot[e]||{},l=i[a]||[],r={mainAttachments:t.mainAttachments,attachmentsByBot:{...t.attachmentsByBot,[e]:{...i,[a]:[...l,...n]}}};return null==_||_(r),r})},[_,S]),I=(0,i.useCallback)((e,a,n)=>{S(t=>{let i=t.attachmentsByBot[e]||{},l=i[a]||[],r={mainAttachments:t.mainAttachments,attachmentsByBot:{...t.attachmentsByBot,[e]:{...i,[a]:l.filter((e,a)=>a!==n)}}};return null==_||_(r),r})},[_,S]),B=(0,i.useCallback)((e,a)=>{S(n=>{let t=n.attachmentsByBot[e]||{},i={...t};delete i[a];let l={mainAttachments:n.mainAttachments,attachmentsByBot:{...n.attachmentsByBot,[e]:{...i}}};return null==_||_(l),l})},[_,S]),P=(0,i.useCallback)(e=>{S(a=>{let n={mainAttachments:a.mainAttachments,attachmentsByBot:{...a.attachmentsByBot,[e]:{}}};return null==_||_(n),n})},[_,S]),M=completeAttachmentsForBot(h,F),N=(0,i.useMemo)(()=>(0,c.sv)(M),[M]),T=(0,i.useMemo)(()=>(0,c.VX)(f),[f]),{isFileOverLimit:x,fileTypeOverLimit:E,fileTypeSizeLimit:A}=(0,i.useMemo)(()=>(0,c.Mj)(M,T),[M,T]),D=(0,s.xD)(E);return(0,i.useEffect)(()=>{if(T){if(x){let e=(0,c.K9)(x,D,A,y)||"";e&&(null==k||k(e));return}if(N>T.total){let e=(0,c.K9)(x,D,T.total,y)||"";e&&(null==k||k(e));return}}},[x,D,A,N,T,k,y]),{attachments:F,handleFileUpload:v,handleFileRemove:C,clearFiles:w,addFileToCustomUIControl:L,removeFileFromCustomUIControl:I,removeAllFilesFromCustomUIControl:B,clearFilesFromCustomUI:P,isFileOverLimit:x,totalFileSize:N}}},12879:function(e,a,n){"use strict";n.d(a,{U:function(){return s},t:function(){return useMentionedBotsInputs}});var t=n(67294),i=n(22578),l=n(44311),r=n(33358);let s=n(16795),useMentionedBotsInputs=e=>{let{chat:a,setTargetedBot:o,setInputErrorMessage:d}=e,c=(0,i.useFragment)(n(75557),a),[m,u,p]=(0,i.useQueryLoader)(s),[g,_,k]=(0,r.h)(),b=(0,t.useRef)(""),h=(0,t.useRef)(null),f=(0,i.useRelayEnvironment)(),F=(0,t.useCallback)((e,a)=>{if(b.current=e,h.current=a,""===e)d(null),null==o||o(null),p(),_();else{let n=!!(null==c?void 0:c.isOptimistic),t={chatCode:c?c.chatCode:"",hasChat:!!c&&!n,fullChatInput:e,currentPartialHandle:(null==a?void 0:a.endsWith("/"))?null==a?void 0:a.slice(0,-1):a||""};"available"===f.getStore().check((0,l.createOperationDescriptor)(s.default,t)).status?(u(t),_()):g(()=>{b.current===e&&h.current===a&&u(t)})}},[c,g,_,f,u,p,d,o]);return{queryReference:m,debouncePromise:k.current,setInputs:F}}},29154:function(e,a,n){"use strict";var t=n(85893),i=n(67294),l=n(22641);let importAddChatMembersModal=()=>Promise.all([n.e(665),n.e(685)]).then(n.bind(n,69804));a.Z=e=>{let[a,n]=(0,i.useState)(!1),[r,s]=(0,i.useState)(()=>()=>{}),o=(0,i.useCallback)(()=>{n(!0)},[]),d=(0,i.useCallback)(()=>{n(!1),r()},[r]),c=(0,i.useMemo)(()=>({closeModal:d,chatId:null==e?void 0:e.chatId,botId:null==e?void 0:e.botId,setOnClose:s,sourcePage:null==e?void 0:e.sourcePage}),[d,null==e?void 0:e.chatId,null==e?void 0:e.botId,null==e?void 0:e.sourcePage]),m=(0,t.jsx)(l.Z,{isOpen:a,onRequestClose:d,body:importAddChatMembersModal,bodyProps:c});return{modal:m,openModal:o}}},91469:function(e,a,n){"use strict";var t=n(85893),i=n(13525),l=n(12251),r=n(23595),s=n(64516),o=n(11300),d=n.n(o);a.Z=e=>{let{header:a,startAtBottom:n,children:o,disallowScroll:c,noMaxWidth:m=!1,deviceType:u}=e,{elementProps:p,providerProps:g}=(0,i.GO)(),_=(0,s.F)(),k=!(0,r.k6)(_,u)&&d().scrollSectionOverflow;return(0,t.jsxs)(t.Fragment,{children:[a,(0,t.jsx)(i.yp,{...g,children:(0,t.jsx)("div",{className:(0,l.$)(d().scrollSection,n&&d().startAtBottom,k,c&&d().disallowScroll),...p,children:(0,t.jsx)("div",{className:(0,l.$)(d().column,m&&d().noMaxWidth),children:o})})})]})}},24581:function(e,a,n){"use strict";var t=n(85893),i=n(1250),l=n(36803);a.Z=e=>(0,t.jsx)(l.Z,{leftNavItem:(0,t.jsx)(i.Z,{viewer:e.viewer}),...e})},21980:function(e,a,n){"use strict";var t=n(85893),i=n(94370),l=n(12251),r=n(8828),s=n.n(r);a.Z=e=>{let{className:a,text:n}=e;return(0,t.jsxs)("div",{className:(0,l.$)(s().banner,a),children:[(0,t.jsx)("div",{className:s().iconContainer,children:(0,t.jsx)(i.au,{size:"sm"})}),n]})}},28937:function(e,a,n){"use strict";n.d(a,{Z:function(){return subscription_PaywallContextWrapper}});var t,i,l=n(85893),r=n(67294),s=n(22578),o=n(41143),d=n.n(o);n(44311);var c=n(22641);(t=i||(i={})).web_subs_announcement="web_subs_announcement",t.response_speed_upsell="response_speed_upsell",t.subs_onboarding_flow="subs_onboarding_flow",t.ios_subs_signup_upsell="ios_subs_signup_upsell",t.android_subs_announcement="android_subs_announcement";var m=i;let importAnnouncement=()=>n.e(4098).then(n.bind(n,94098));var subscription_WebSubscriptionAnnouncementModalOpener=e=>{var a;let{bot:t,viewer:i}=e,o=(0,s.useFragment)(n(10962),t),u=(0,s.useFragment)(n(34932),i),[p]=(0,s.useMutation)(n(74969)),g=u.creationTime;d()(!!g,"Viewer creation time cannot be empty!");let _=g/1e3,k=Date.now()-_>=864e5,b=u.shouldSeeWebSubscriptionAnnouncement&&!(null===(a=u.subscription)||void 0===a?void 0:a.subscriptionProduct.paidSubscriptionPeriod)&&o.isCreatedByPoeUserAccount&&k,[h,f]=(0,r.useState)(b),F=(0,r.useCallback)(()=>{f(!1),p({variables:{dismissibleType:m.web_subs_announcement},onCompleted:()=>{f(!1)}})},[f,p]),S=(0,r.useMemo)(()=>({closeAnnouncement:F}),[F]);return(0,l.jsx)(c.Z,{isOpen:h,onRequestClose:F,body:importAnnouncement,bodyProps:S,modalHeight:200,useMinHeight:!0})},u=n(6940),p=n(84931),g=n(20620);let importPaywallModal=()=>Promise.all([n.e(8324),n.e(6470),n.e(668),n.e(3258),n.e(7420),n.e(6696)]).then(n.bind(n,2459));var subscription_PaywallOpener=e=>{let{subscriptionFunnelId:a,bot:t,viewer:i}=e,{botId:o}=(0,s.useFragment)(n(1828),t),d=(0,s.useFragment)(n(90665),i),{subscription:c}=d,m=(0,r.useMemo)(()=>({botId:o,subscriptionFunnelId:a}),[o,a]),{closePaywall:u}=(0,p.r)();return(null==c?void 0:c.subscriptionProduct.paidSubscriptionPeriod)?null:(0,l.jsx)(r.Suspense,{fallback:null,children:(0,l.jsx)(g.Z,{body:importPaywallModal,bodyProps:m,onRequestClose:u})})},subscription_PaywallContextWrapper=e=>{let{bot:a,viewer:t,children:i}=e,o=(0,s.useFragment)(n(45815),a),d=(0,s.useFragment)(n(56848),t);(0,u.zw)();let[c,m]=(0,r.useState)(null),g=!!d.poeUser;return(0,l.jsxs)(p.U,{value:g?m:null,children:[i,g&&(0,l.jsxs)(l.Fragment,{children:[c&&(0,l.jsx)(subscription_PaywallOpener,{viewer:d,...c}),(0,l.jsx)(subscription_WebSubscriptionAnnouncementModalOpener,{bot:o,viewer:d})]})]})}},15117:function(e,a,n){"use strict";n.d(a,{E:function(){return ParameterControlsProvider},k:function(){return useParameterControls}});var t=n(85893),i=n(67294);let l=(0,i.createContext)(null);function ParameterControlsProvider(e){let a=(0,i.useState)({});return(0,t.jsx)(l.Provider,{value:a,children:e.children})}let useParameterControls=()=>{let e=(0,i.useContext)(l);if(null===e)throw Error("This can only be invoked inside ParameterControlsProvider");return e}},64291:function(e,a,n){"use strict";var t=n(67294),i=n(22578),l=n(69388);let r=new Map;a.Z=e=>{var a;let s=(0,i.useFragment)(n(69514),e),o=(0,i.useRelayEnvironment)();if((0,t.useEffect)(()=>{(0,i.commitLocalUpdate)(o,e=>{if(!s)return;let a=e.get(s.id);a&&s.state===l.Z.cancelled&&s.textLengthOnCancellation&&a.setValue(s.textLengthOnCancellation,"textLengthOnCancellationImmediate")})},[o,s]),!s)return{isMessageCancelled:!1,textLengthOnCancellation:null};let{state:d,textLengthOnCancellation:c}=s;return d===l.Z.cancelled&&c&&c>0&&r.set(s.id,c),{isMessageCancelled:d===l.Z.cancelled,textLengthOnCancellation:null!==(a=r.get(s.id))&&void 0!==a?a:c}}},24579:function(e,a,n){"use strict";n.d(a,{i:function(){return t}});let t=new Map},41149:function(e,a,n){"use strict";n.d(a,{l7:function(){return MessageEditingProvider},m:function(){return useMessageEditing},tv:function(){return useEditMessage}});var t=n(67294),i=n(22120),l=n(22578),r=n(44311),s=n(8583),o=n(19156),d=n(24579),c=n(30038),m=n(96384),u=n(43518),p=n(28871),g=n(41580),_=n(50311),k=n(9729);let editMessage=(e,a,t,i,l,s,o,d,c,m)=>{let u={mutation:n(31869),uploadables:o,variables:{originalMessageId:a,query:t,source:i,attachmentsToRemove:l,attachments:s,fileHashJwts:d},onCompleted:e=>{null==c||c(e)},onError:e=>{null==m||m(e)}};return(0,r.commitMutation)(e,u)},messageHasNotChanged=(e,a,n,t)=>t===n&&0===e.length&&0===a.length,b={sourceType:"chat_input",chatInputMetadata:{useVoiceRecord:!1}},editMessageWithOptions=async e=>{var a,t;let{environment:i,messageId:r,newText:o,viewer:c,chatInputRef:m,voiceButtonRef:k,chatId:h,files:f,clearFiles:F,cancelEditing:S,onSuccess:y,setToast:v,t:C,previousMessageText:w,setIsLoadingEdit:L}=e;if(!o.trim()&&(null==f?void 0:f.length)===0){v({content:C("Message cannot be empty"),type:s.pC.error});return}L(!0);let{shouldUseFinishUploadEndpoint:I,shouldUsePresignedUrl:B}=(0,l.readInlineData)(n(75267),c),P=Array.from(d.i.entries()).filter(e=>{let[a]=e;return!(null==f?void 0:f.includes(a))}).map(e=>{let[,a]=e;return a.id}),M=null!==(a=null==f?void 0:f.filter(e=>!d.i.has(e)))&&void 0!==a?a:[],resetState=()=>{S(),(null==m?void 0:m.current)&&m.current.setValue(""),null==F||F(),L(!1)},onMessageEditError=(e,a)=>{v({content:a?C("Failed to edit message: {{statusMessage}}",{statusMessage:a}):C("Failed to edit message."),type:s.pC.error}),resetState()};if(messageHasNotChanged(M,P,o,w)){resetState();return}logMessageEditedAction(r,h,{removedAttachmentCount:P.length,newAttachmentCount:M.length});let[N,T]=(0,p.A6)(M),x=await Promise.all(T.map(async e=>({contentType:N[e].type,fileHash:await (0,_.B)(N[e]),name:N[e].name})));if(B){let e=await (0,u.$)(x.map(e=>({fileHash:e.fileHash,contentType:e.contentType})),i,C,onMessageEditError),a=await (0,u.K)(new Map(e.map((e,a)=>[e,M[a]])),onMessageEditError,C);if(a.length>0)return}let E=[];if(I&&N){let{success:e,tokens:a}=await (0,g.qY)({uploadablesAndAttachmentsOrFileInfo:B?x:{uploadables:N,attachments:T},onComplete:e=>{if(!e.every(e=>e.success)){let a=e.filter(e=>!e.success),n=new Map;a.forEach(e=>{n.has(e.error)||n.set(e.error,[]),n.get(e.error).push(e.filename)});let t=Array.from(n.entries()).map(e=>{let[a,n]=e;return C("{{errorMessage}}: {{filenames}}",{errorMessage:a,filenames:n.join(", ")})}).join(" ");onMessageEditError(Error("Failed to upload files"),t)}}});if(!e)return;E=a}try{null==k||null===(t=k.current)||void 0===t||t.abortRecognition();let e=editMessage(i,r,o,b,P,T,N,E,e=>{"success"!==e.messageEdgeEdit.status?v({content:C("Failed to edit message: {{statusMessage}}",{statusMessage:e.messageEdgeEdit.statusMessage}),type:s.pC.error}):v({content:C("Message edited"),type:s.pC.success}),resetState(),null==y||y(e)},onMessageEditError);return e}catch(e){throw v({content:C("Failed to edit message"),type:s.pC.error}),L(!1),e}},logMessageEditedAction=(e,a,n)=>{(0,k.Z)("poe/action_log",{action_type:(0,m.E)(c.Z.edit_message),message_id:e,chat_id:a,action_metadata:n})},useEditMessage=()=>{let e=(0,l.useRelayEnvironment)(),a=(0,s.ZP)(),{t:n}=(0,i.$G)(),{editingMessageData:r,setIsLoadingEdit:o}=useMessageEditing();return(0,t.useCallback)(t=>editMessageWithOptions({...t,environment:e,setToast:a,t:n,previousMessageText:null==r?void 0:r.text,setIsLoadingEdit:o}),[e,a,n,r,o])},h=(0,t.createContext)({editingMessageData:null,initialMessageDraftValue:"",startEditing:()=>{},cancelEditing:()=>{},isLoadingEdit:!1,setIsLoadingEdit:()=>{}});function MessageEditingProvider(e){let{children:a}=e,[n,i]=(0,t.useState)(null),[l,r]=(0,t.useState)(""),[s,d]=(0,t.useState)(!1),{draft:c,updateDraft:m}=(0,o.cX)();(0,t.useEffect)(()=>{c.editingMessageId&&c.content&&i({messageId:c.editingMessageId,text:c.content})},[c]);let u=(0,t.useCallback)((e,a,n)=>{void 0!==n&&r(n),i({messageId:e,text:a}),m(n=>({...n,editingMessageId:e,content:a}))},[m]),p=(0,t.useCallback)(()=>{i(null),d(!1),m(e=>({...e,editingMessageId:void 0,content:""}))},[m]);return t.createElement(h.Provider,{value:{editingMessageData:n,initialMessageDraftValue:l,startEditing:u,cancelEditing:p,isLoadingEdit:s,setIsLoadingEdit:d}},a)}function useMessageEditing(){return(0,t.useContext)(h)}},18462:function(e,a,n){"use strict";n.d(a,{Br:function(){return MultiselectProvider},oW:function(){return i}});var t,i,l=n(85893),r=n(67294);(t=i||(i={}))[t.none=0]="none",t[t.share=1]="share",t[t.delete=2]="delete";let s=(0,r.createContext)(0),o=(0,r.createContext)(()=>{}),d=(0,r.createContext)([]),c=(0,r.createContext)(()=>{}),MultiselectProvider=e=>{let{children:a}=e,[n,t]=(0,r.useState)(0),[i,m]=(0,r.useState)([]);return(0,l.jsx)(s.Provider,{value:n,children:(0,l.jsx)(o.Provider,{value:t,children:(0,l.jsx)(d.Provider,{value:i,children:(0,l.jsx)(c.Provider,{value:m,children:a})})})})};a.ZP=()=>{let e=(0,r.useContext)(s),a=(0,r.useContext)(o),n=(0,r.useContext)(d),t=(0,r.useContext)(c),i=(0,r.useCallback)(e=>{t(a=>[...a,e])},[t]),l=(0,r.useCallback)(e=>{t(a=>a.filter(a=>a!==e))},[t]),m=(0,r.useCallback)(e=>{n.includes(e)?l(e):i(e)},[n,l,i]),u=(0,r.useCallback)(()=>{t([])},[t]),p=(0,r.useMemo)(()=>0!==e,[e]);return{selectionMode:e,selectedIds:n,setSelectionMode:a,addSelection:i,removeSelection:l,toggleSelection:m,clearSelection:u,isSelecting:p}}},15601:function(e,a,n){"use strict";n.d(a,{q:function(){return getHasBeenOffline}});var t=n(67294);let i=!1,getHasBeenOffline=()=>i;a.Z=()=>{let[e,a]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{let setOffline=()=>{i=!0,a(!0)},setOnline=()=>{a(!1)};return window.addEventListener("offline",setOffline),window.addEventListener("online",setOnline),()=>{window.removeEventListener("offline",setOffline),window.removeEventListener("online",setOnline)}},[a]),e}},71953:function(e,a,n){"use strict";n.d(a,{F5:function(){return useCreateOptimisticChat},VQ:function(){return releaseOptimisticChatNodeForGarbageCollection},t3:function(){return useOptimisticChat},tR:function(){return createOptimisticChat}});var t=n(41143),i=n.n(t),l=n(67294),r=n(22578),s=n(44311),o=n(96458),d=n(87973),c=n(67280),m=n(69388),u=n(8453),p=n(46245),g=n(53236),_=n(89188);let gen_random_number=()=>Math.floor(1e9*Math.random()),getOptimisticChatId=e=>"OPTIMISTIC_CHAT_".concat(e),getOptimisticMessagesConnectionId=e=>s.ConnectionHandler.getConnectionID(e,"ChatMessagesView_chat_messagesConnection"),getOptimisticMessagePageInfoId=e=>"".concat(e,"_MESSAGE_PAGE_INFO"),getOptimisticMemberPageInfoId=e=>"".concat(e,"_MEMBER_PAGE_INFO"),getOptimisticIntroMessageEdgeId=e=>"".concat(e,"_INTRO_MESSAGE_EDGE"),getOptimisticMembersConnectionId=e=>"".concat(e,"_MEMBERS_CONNECTION"),getOptimisticBotMemberEdgeId=e=>"".concat(e,"_BOT_MEMBER_EDGE"),useOptimisticChat=(e,a)=>{let n=useCreateOptimisticChat(e),[t]=(0,l.useState)(()=>a||n());return t},useCreateOptimisticChat=e=>{let a=(0,r.useRelayEnvironment)();return(0,l.useCallback)(()=>createOptimisticChat({environment:a,bot:e}),[a,e])},createOptimisticChat=e=>{let a,t,{environment:l,bot:r}=e;return(0,s.commitLocalUpdate)(l,e=>{let{id:l,botId:k,nickname:b,introduction:h,isTrustedBot:f,viewerIsCreator:F,handle:S,canvasContent:y,isPrivateBot:v,...C}=(0,s.readInlineData)(n(67203),r),w=e.get(l);for(i()(w,"botRecord is ".concat(w));!a||e.get(a);)a=getOptimisticChatId(t=gen_random_number());let L=e.create(a,"Chat");if(L.setValue(a,"id"),L.setValue(a,"chatId"),L.setValue("","chatCode"),L.setValue(!0,"isOptimistic"),L.setValue(b,"defaultBotNickname"),L.setValue(1e3*Date.now(),"creationTime"),L.setValue(1e3*Date.now(),"lastInteractionTime"),L.setValue(null,"title"),L.setLinkedRecords([],"activeJobs"),L.setValue(!0,"shouldShowDisclaimer"),L.setValue(1e3*Date.now(),"creationTime"),L.setValue(!w.getValue("isTrustedBot"),"membersIncludeUntrustedBot"),L.setValue(!f,"membersIncludeUntrustedBot"),L.setLinkedRecord(w,"defaultBotObject"),L.setValue(null,"displayedChatModal"),y){let n=(0,u.kU)(e,{bot:{handle:S,id:l,botId:k,viewerIsCreator:F,deletionState:o.Z.not_deleted,isCanvasOnlyBot:!0,isPromptPublic:!0,isPrivateBot:v,canvasContent:{content:y.content,contentType:y.contentType}},botId:k,previewContentObject:{content:y.content,contentType:y.contentType,language:y.language},__isNode:"BotCanvasTab",isOptimistic:!0,id:(0,u.Zr)(),state:d.Z.foreground,canvasCode:"OPTIMISTIC_CANVAS_CODE",clientNonce:(0,g.C)(),title:S});(0,p.vf)(e,{canvasTab:n,chatNodeId:a})}let I=h?(0,_.dS)(e,{text:h,state:m.Z.complete,bot:C,contentType:c.Z.text_markdown}):null,B=h?[I]:[],P=B.map(n=>{i()(a,"chatId is ".concat(a));let t=e.create(getOptimisticIntroMessageEdgeId(a),"MessageEdge");return t.setLinkedRecord(n,"node"),t}),M=e.create(getOptimisticMessagePageInfoId(a),"PageInfo");M.setValue(!1,"hasPreviousPage"),M.setValue(I?I.getDataID():null,"startCursor");let N=e.create(getOptimisticMessagesConnectionId(a),"MessagesConnection");N.setLinkedRecords(P,"edges"),N.setLinkedRecord(M,"pageInfo"),L.setLinkedRecord(N,"messagesConnection",{last:5}),L.setLinkedRecord(N,"__ChatMessagesView_chat_messagesConnection_connection");let T=[e.create(getOptimisticBotMemberEdgeId(a),"ChatMemberEdge")];T[0].setLinkedRecord(w,"node");let x=e.create(getOptimisticMemberPageInfoId(a),"PageInfo");x.setValue(!1,"hasNextPage"),x.setValue(T[0].getDataID(),"endCursor");let E=e.create(getOptimisticMembersConnectionId(a),"ChatMemberConnection");E.setLinkedRecords(T,"edges"),E.setLinkedRecord(x,"pageInfo"),L.setLinkedRecord(E,"membersConnection"),e.getRoot().setLinkedRecord(L,"optimisticChat",{optimisticChatId:a})}),i()(a,"chatId is ".concat(a)),i()(t,"chatIdNumber is ".concat(t)),function(e,a){let t=n(19654),i=(0,s.getRequest)(t),l=(0,s.createOperationDescriptor)(i,{id:e}),r=a.retain(l);k.set(e,r)}(a,l),a},k=new Map;function releaseOptimisticChatNodeForGarbageCollection(e){let a=k.get(e);a&&(a.dispose(),k.delete(e))}},47853:function(e,a,n){"use strict";n.d(a,{$:function(){return logAppDownloadPromptEvent},q:function(){return i}});var t,i,l=n(9729);(t=i||(i={})).seen="seen",t.download_for_free_click="download_for_free_click",t.stay_in_browser_click="stay_in_browser_click",t.dismiss="dismiss";let logAppDownloadPromptEvent=e=>{(0,l.Z)("poe/prompts",{prompt_name:"app_download_prompt",step:e})}},95619:function(e,a,n){"use strict";n.d(a,{c:function(){return useDebouncedValue}});var t=n(67294);function useDebouncedValue(e,a){let[n,i]=(0,t.useState)(e);return(0,t.useEffect)(()=>{let n=!1,t=setTimeout(()=>{n||i(e)},a);return()=>{n=!0,clearTimeout(t)}},[e,a]),n}},25925:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return ew}});var t,i,l,r=n(85893),s=n(11163),o=n(67294);n(44311);var d=n(94370),c=n(41143),m=n.n(c),u=n(5152),p=n.n(u),g=n(22120),_=n(22578),k=n(67172),b=n(22641),h=n(78410),f=n(42093),F=n(60582),S=n(67603),y=n.n(S),v=n(93581),C=n(38401);let importSelectorModal=()=>Promise.all([n.e(7224),n.e(1173)]).then(n.bind(n,47224)),w=(0,o.memo)(e=>{let{onBotSelect:a,onMoreBotsModalClose:t}=e,[i,l]=(0,o.useState)(!1),{t:s}=(0,g.$G)(),[c,m]=(0,F.D)(),u=(0,o.useCallback)(()=>{Promise.all([n.e(7224),n.e(1173)]).then(n.bind(n,47224)),m({includeHomePageBotSelectorFragment:!0,filterCanvasOnlyBots:!0})},[m]),[p,_]=(0,o.useState)(null),f=(0,o.useCallback)(e=>{u(),l(!0),e.preventDefault()},[l,u]),S=(0,o.useCallback)(()=>{l(!1),setTimeout(()=>null==t?void 0:t(),1)},[t,l]),y=(0,o.useMemo)(()=>c?{closeModal:S,includeHomePageBotSelectorFragment:!0,queryRef:c,onSelectorItemClick:(e,n)=>{e.preventDefault();let t=n.keyIfIncludeHomePageBotSelectorFragment;l(!1),setTimeout(()=>a(t),1)}}:null,[S,c,a]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{as:"button",onClick:f,onMouseOver:u,onFocus:u,theme:"ghost",size:"sm",showIconOnly:"always",iconLeft:(0,r.jsx)(d.jV,{size:"md"}),ref:_,children:s("More")}),(0,r.jsx)(k.u,{anchorRef:p,label:s("More")}),y&&(0,r.jsx)(b.Z,{isOpen:i,onRequestClose:S,modalHeight:"70vh",modalMaxHeight:800,body:importSelectorModal,bodyProps:y})]})});w.displayName="AllBotsButtonPill";let L=(0,o.forwardRef)((e,a)=>{let{bot:t}=e,i=(0,_.useFragment)(n(58586),t),l=(0,f.dC)(i);return(0,r.jsx)(C.iA,{ref:a,value:i.id,avatar:(0,r.jsx)(v.Z,{bot:i,picture:i.smallPicture,size:"x-sm",hasBorder:!1,className:y().botImage}),children:l})});L.displayName="BotSelectorPill";var chat_BotSelectorHomeMain=e=>{let{selectedBotId:a,displayBots:t,onBotSelect:i,onMoreBotsModalClose:l}=e,s=(0,_.useFragment)(n(36433),t),d=o.useRef(null),c=o.useRef(null);o.useEffect(()=>{(null==d?void 0:d.current)&&(null==c?void 0:c.current)&&c.current.scrollTo({left:d.current.offsetLeft+d.current.offsetWidth/2-c.current.offsetWidth/2})},[a]);let m=(0,o.useCallback)(e=>{i(null!=e?e:"")},[i]);return(0,r.jsx)("div",{className:y().botPillWrapper,children:(0,r.jsx)(C.UG,{type:"radio",required:!0,value:a,onValueChange:m,children:(0,r.jsxs)("div",{className:y().botPillWrapperScroll,ref:c,children:[s.map(e=>(0,r.jsx)(L,{bot:e,isSelected:e.id===a,onBotSelect:i,ref:e.id===a?d:void 0},e.id)),(0,r.jsx)(w,{onBotSelect:i,onMoreBotsModalClose:l}),(0,r.jsx)("div",{className:y().botPillWrapperShadow})]})})})},I=n(45598),hooks_useHomeBotSelector=e=>{let{data:a}=(0,_.usePaginationFragment)(n(63733),e),[t,i]=(0,_.useRefetchableFragment)(n(53435),a.defaultBot),[l,r]=(0,o.useState)(()=>a.availableBotsConnection.edges.slice(0,3).map(e=>e.node));(0,o.useEffect)(()=>{r(a.availableBotsConnection.edges.slice(0,3).map(e=>e.node))},[a.availableBotsConnection.edges]);let[s,d]=(0,o.useState)(()=>l[0].id),[c,u]=(0,o.useState)(!1);!function(e,a){let t=(0,o.useRef)(!1),i=(0,_.useRelayEnvironment)();(0,o.useEffect)(()=>{if(!t.current)for(let{id:l}of(t.current=!0,e))l!==a&&(0,_.fetchQuery)(i,n(70060),{botId:l},{fetchPolicy:"store-or-network"}).toPromise().catch(e=>{console.error("there was an error prefetching bot selection data",e)})},[e,a,i])}(l,s);let p=(0,o.useCallback)(e=>{if(u(!0),(0,I.H)(e)){let n=a.availableBotsConnection.edges.find(a=>a.node.id==e),t=l.find(a=>a.id==e),s=t||(null==n?void 0:n.node);s&&(u(!0),d(e),r(a=>a.some(a=>a.id===e)?a:[s,...a].slice(0,3)),(0,o.startTransition)(()=>{i({id:e},{fetchPolicy:"store-or-network"})}))}else{let a=(0,_.readInlineData)(n(91134),e);d(a.id),r(e=>e.some(e=>e.id===a.id)?e:[a,...e].slice(0,3)),(0,o.startTransition)(()=>{i({id:a.id},{fetchPolicy:"store-or-network"})})}},[i,a.availableBotsConnection.edges,l]);return m()(null!=t,"Selected Bot Data is ".concat(t)),{displayBots:l,selectedBotId:s,deferredSelectedBotData:t,deferredBotDataIsLoaded:s===t.id,onBotSelect:p,hasUsedBotSelector:c}},B=n(36809),P=n(29154),M=n(71258),N=n(446),T=n(8583),x=n(21980),E=n(60223),A=n(28937),D=n(19156),G=n(15117);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(null,arguments)}var addGroup=function(e){return o.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=o.createElement("path",{d:"M8.183 10.98c-.12.013-.237.036-.361.036a3.263 3.263 0 0 1-3.258-3.259 3.26 3.26 0 0 1 3.258-3.258c.124 0 .241.023.361.036a7.3 7.3 0 0 1 1.233-1.763 5.2 5.2 0 0 0-1.593-.273 5.264 5.264 0 0 0-5.258 5.258c0 2.9 2.358 5.259 5.258 5.259a5.2 5.2 0 0 0 1.593-.273 7.3 7.3 0 0 1-1.232-1.763zm.945 3.335A6.33 6.33 0 0 0 1.5 20.5h2c0-2.295 1.802-4.159 4.063-4.296a8.3 8.3 0 0 1 1.565-1.889m5.55-1.298a5.265 5.265 0 0 1-5.259-5.259c0-2.9 2.359-5.258 5.259-5.258s5.258 2.358 5.258 5.258-2.358 5.259-5.258 5.259m0-8.517a3.263 3.263 0 0 0-3.259 3.258 3.263 3.263 0 0 0 3.259 3.259 3.26 3.26 0 0 0 3.258-3.259A3.26 3.26 0 0 0 14.678 4.5m1.759 12.06c.033-.006.065-.019.099-.025a3 3 0 0 1 .912-1.71 6.3 6.3 0 0 0-2.77-.648 6.33 6.33 0 0 0-6.323 6.322h2a4.327 4.327 0 0 1 4.323-4.322c.628 0 1.22.141 1.759.383M22 18.5h-1.5V17a1 1 0 1 0-2 0v1.5H17a1 1 0 1 0 0 2h1.5V22a1 1 0 1 0 2 0v-1.5H22a1 1 0 1 0 0-2"})))},O=n(28871),R=n(71953),K=n(68374),j=n(5247),chat_useSendMessageFromHomePage=(e,a,t)=>{let i=(0,_.useFragment)(n(96317),e),l=(0,_.useFragment)(n(90721),a),r=(0,_.useRelayEnvironment)();(0,o.useEffect)(()=>{let e=(0,_.loadQuery)(r,n(16216),{botId:i.botId});return()=>e.dispose()},[i.botId,r]);let d=(0,s.useRouter)(),c=(0,o.useCallback)(e=>{let{messageEdgeCreate:a}=e,n=a.chat;m()(n,"chat is null"),d.replace("/",void 0,{shallow:!0}),d.push("?chat=".concat(n.chatCode,"&botId=").concat(n.defaultBotObject.botId),"chat/".concat(n.chatCode),{shallow:!0})},[d]),{t:u}=(0,g.$G)(),p=(0,R.F5)(i),k=(0,T.ZP)(),b=(0,o.useCallback)(async(e,a,s,o)=>{let g=p();d.push("?optimisticChatId=".concat(g,"&botId=").concat(i.botId),"/",{shallow:!0});let b=await (0,_.fetchQuery)(r,n(26644),{optimisticChatId:g},{fetchPolicy:"store-or-network"}).toPromise();m()(null==b?void 0:b.optimisticChat,"Optimistic chat ".concat(g," not found in store")),(0,O.bG)({environment:r,bot:i,chat:b.optimisticChat,viewer:l,prompt:e,files:s,parameters:o,source:a,setToast:k,onSuccessfulMessageSend:c,t:u}),t&&a.sourceType===j.Z.chat_input&&(0,K.nL)(K.wy.UsedBotSwiticherBeforeSendMessage)},[i,l,p,d,k,r,c,t,u]);return b},U=n(12251),H=n(15006),V=n(89582),W=n(9729),Z=n(46932),q=n(18462),Q=n(15601),z=n(23595),$=n(47853),X=n(4694),J=n(38357),Y=n(95619),ee=n(64516),ea=n(81739),en=n.n(ea),et=n(30038);(t=l||(l={})).home_page_input="home_page_input",t.chat_history_input="chat_history_input",t.chat_settings_new_chat_button="chat_settings_new_chat_button",t.plus_new_chat_button="plus_new_chat_button",t.introduction_suggested_reply="introduction_suggested_reply",t.home_page_conversation_starter="home_page_conversation_starter";var ei=l,el=n(29664),er=n(18802),es=n(31910),eo=n(64913),ed=n(39752),ec=n(47450),em=n(49542);let eu=p()(()=>n.e(5224).then(n.bind(n,35224)),{loadableGenerated:{webpack:()=>[35224]},ssr:!1,loading:()=>null}),ep=p()(()=>n.e(8399).then(n.bind(n,98399)),{loadableGenerated:{webpack:()=>[98399]},ssr:!1,loading:()=>(0,r.jsx)(N.Sz,{})}),importDownloadAppModal=()=>n.e(5249).then(n.bind(n,5249)),eg=n(28797),useTargetedBotState=e=>{let a=(0,_.useFragment)(eg,e),[n,t]=(0,o.useState)(null),i=(0,_.useFragment)(eg,n||e);return{defaultBotData:a,targetedBotData:i||a,setTargetedBot:t}},ChatHomeMainInputContainer=e=>{let{inputRef:a,defaultBot:t,viewer:i,hasUsedBotSelector:l,fileHandlerRef:s,disableSend:d=!1,inputErrorMessage:c,setInputErrorMessage:m}=e,{t:u}=(0,g.$G)(),{defaultBotData:p,targetedBotData:k,setTargetedBot:b}=useTargetedBotState(t),h=(0,_.useFragment)(n(59409),i);if(!h.poeUser)throw new X.NotFound;let f=(0,_.useRelayEnvironment)();(0,o.useEffect)(()=>{let e=(0,_.loadQuery)(f,n(5371),{});return()=>e.dispose()},[f]);let F=chat_useSendMessageFromHomePage(p,h,l),S=(0,o.useCallback)(async(e,a,n,t,i)=>{var l,r;let s=null===(l=e.current)||void 0===l?void 0:l.getValue();if(void 0===s||!s&&0===n.length)return;!i&&t&&(s=(0,eo.yJ)(s,t));let o={sourceType:"chat_input",chatInputMetadata:{useVoiceRecord:(null===(r=a.current)||void 0===r?void 0:r.getVoiceInputUsed())||!1,newChatContext:ei.home_page_input}};F(s,o,n,i?t:void 0)},[F]),y=(0,o.useRef)(null),v=(0,o.useContext)(em.s),C=(0,o.useMemo)(()=>(0,Z.Z)([a,y,v]),[a,y,v]),w=(0,o.useCallback)((e,a)=>{let t;if((0,V.rw)(e))t=e.mentionWithAt;else{let a=(0,_.readInlineData)(n(63527),e);t=(null==a?void 0:a.handle)||null}m(null),t&&y.current&&(0,ed.A)(y,t,a)},[y,m]),L=(0,ee.F)();return(0,r.jsxs)("div",{className:en().inputContainer,children:[(0,r.jsx)(ec.$8,{children:(0,r.jsx)(G.E,{children:(0,r.jsx)(D.KN,{storageKey:"homepage",disabled:!h.enableMessageDrafts,children:(0,r.jsx)(B.Z,{ref:C,viewer:h,placeholderText:u("Start a new chat"),bot:k,setTargetedBot:b,disableSend:d,edges:null,onSubmitMessage:S,isBotResponding:!1,setInputErrorMessage:m,selectBot:w,fileHandlerRef:s,disableCollapsibleBehavior:!0,autofocusOnTouchDevice:!0})})})}),!(0,z.s2)(L)&&c&&(0,r.jsx)("div",{className:en().warningBannerHolder,children:(0,r.jsx)(x.Z,{className:en().invalidMentionedBotWarning,text:c})})]})},ChatHomeMainActionButtons=e=>{let{viewer:a}=e,t=(0,_.useFragment)(n(97706),a),i=(0,s.useRouter)(),{t:l}=(0,g.$G)(),c=(0,T.ZP)(),m=(0,Q.Z)(),{modal:u,openModal:p}=(0,P.Z)({sourcePage:el.Z.landing_page}),k=(0,o.useCallback)(()=>{if(m){c({content:(0,r.jsx)("p",{children:l("Unable to create a new group chat. Check your internet connection.")}),type:T.pC.error});return}(0,W.Z)("poe/action_log",{action_type:et.Z.add_member_button_click,action_metadata:{entry_type:er.Z.page_surface,source_page:el.Z.landing_page}}),p()},[p,l,c,m]),b=(0,o.useCallback)(()=>{i.push("/explore")},[i]);return t.poeEnableMultiUserInvite?(0,r.jsxs)("div",{className:en().actionButtonsContainer,children:[(0,r.jsx)(h.Z,{size:"sm",theme:"secondary",iconLeft:(0,r.jsx)(addGroup,{}),as:"button",onClick:k,children:l("New group chat")}),(0,r.jsx)(h.Z,{size:"sm",theme:"secondary",iconLeft:(0,r.jsx)(d.Gq,{}),as:"button",onClick:b,children:l("Explore")}),(0,r.jsx)(q.Br,{children:u})]}):null},useLoginEffect=e=>{let{viewer:a}=e,t=(0,_.useFragment)(n(62054),a),[i,l]=(0,o.useState)(!1),d=(0,s.useRouter)(),c=(0,T.ZP)(),{t:u}=(0,g.$G)(),{downloadUrl:p}=(0,H.aG)();(0,o.useEffect)(()=>{t.showDownloadAppPrompt&&l(!0)},[]),(0,o.useEffect)(()=>{if(d.query.login_success){var e;let a=(null===(e=t.poeUser)||void 0===e?void 0:e.fullName)||t.primaryEmail;m()(!!a,"Name or email should be present for logged-in user."),c({content:u("Logged-in as {{nameOrEmail}}.",{nameOrEmail:a}),type:T.pC.success}),(0,J.CS)(d,"login_success")}},[]);let k=(0,o.useCallback)(()=>{l(!1)},[l]),h=(0,o.useCallback)(()=>{(0,$.$)($.q.dismiss),k()},[k]),f=(0,o.useMemo)(()=>({closeModal:k,downloadUrl:p}),[k,p]);return{downloadAppModal:(0,r.jsx)(b.Z,{isOpen:i,onRequestClose:h,body:importDownloadAppModal,bodyProps:f,shouldCloseOnOverlayClick:!1})}};var chat_ChatHomeMain=e=>{let{viewer:a}=e,t=(0,_.useFragment)(n(7252),a),{displayBots:i,selectedBotId:l,deferredSelectedBotData:s,deferredBotDataIsLoaded:d,onBotSelect:c,hasUsedBotSelector:m}=hooks_useHomeBotSelector(t),u=(0,o.useRef)(null),[p,g]=(0,o.useState)(null),k=(0,Y.c)(d,10)||d,{downloadAppModal:b}=useLoginEffect({viewer:t}),h=(0,o.useCallback)(e=>{var a;c(e),null===(a=u.current)||void 0===a||a.focus()},[c]),f=(0,o.useCallback)(()=>{var e;null===(e=u.current)||void 0===e||e.focus()},[]),F=(0,o.useRef)(null),S=(0,ee.F)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:en().centered,children:[(0,r.jsx)(M.Z,{title:"Poe"}),(0,r.jsxs)("div",{className:en().container,children:[(0,r.jsx)(es.Z,{fileHandlerRef:F}),(0,r.jsxs)("div",{className:en().logoWrapper,children:[(0,r.jsx)(E.Z,{className:en().logo,priority:!0}),(0,z.s2)(S)&&p&&(0,r.jsx)("div",{className:en().warningBannerHolderMWeb,children:(0,r.jsx)(x.Z,{text:p})})]}),(0,r.jsx)(chat_BotSelectorHomeMain,{displayBots:i,selectedBotId:l,onBotSelect:h,onMoreBotsModalClose:f}),(0,r.jsxs)(A.Z,{bot:s,viewer:t,children:[(0,r.jsx)(ChatHomeMainInputContainer,{inputRef:u,defaultBot:s,disableSend:!k,viewer:t,hasUsedBotSelector:m,fileHandlerRef:F,inputErrorMessage:p,setInputErrorMessage:g}),(0,r.jsx)(ChatHomeMainActionButtons,{viewer:t}),(0,r.jsx)(o.Suspense,{fallback:null,children:(0,r.jsx)(eu,{})})]})]})]}),(0,r.jsx)("div",{className:(0,U.$)(en().exploreBotsCarousel,en().centeredWide),children:(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)(N.Sz,{}),children:(0,r.jsx)(ep,{})})}),(0,r.jsx)("div",{className:en().centered,children:b})]})},e_=n(72722);let ek=p()(()=>Promise.all([n.e(1265),n.e(8324),n.e(6470),n.e(668),n.e(1193),n.e(961),n.e(324),n.e(665),n.e(1530),n.e(8956),n.e(8043),n.e(4164)]).then(n.bind(n,96011)).then(e=>e.OptimisticChatPageColumn),{loadableGenerated:{webpack:()=>[96011]},ssr:!1,loading:()=>null}),OptimisticChatLoader=e=>{let{botId:a,optimisticChatId:t}=e,{viewer:i,root:l}=useViewerAndRoot(),{botById:s}=(0,_.useLazyLoadQuery)(n(19716),{botId:a});return(0,r.jsx)(ek,{bot:s,chats:null,root:l,viewer:i,optimisticChatId:t})};function useViewerAndRoot(){let{viewer:e,...a}=(0,_.useLazyLoadQuery)(n(576),{},{fetchPolicy:"store-or-network"});return{viewer:e,root:a}}function PreloadOptimisticChatPageColumnData(){return useViewerAndRoot(),(0,r.jsx)(r.Fragment,{})}function OptimisticChatPageColumnLoader(e){let a=(0,e_.Z)();return!0===e.preloadOnly?(0,r.jsx)(o.Suspense,{fallback:null,children:a&&(0,r.jsx)(PreloadOptimisticChatPageColumnData,{})}):(0,r.jsx)(OptimisticChatLoader,{botId:e.botId,optimisticChatId:e.optimisticChatId})}var eb=n(59562),eh=n.n(eb),ef=n(24581),layout_HomePageMainNavbar=e=>(0,r.jsx)(ef.Z,{className:eh().navbar,...e}),eF=n(91469),eS=n(58143),ey=n(88258),ev=n(74285);let useOptimisticChatArgs=()=>{let e=(0,s.useRouter)(),{optimisticChatId:a,botId:n,chat:t}=e.query;if(!(0,I.H)(n))return null;let i=parseInt(n);return isNaN(i)?null:(0,I.H)(t)?{chatCode:t,botId:i}:(0,I.H)(a)?{optimisticChatId:a,botId:i}:null},eC=(0,ey.T)(e=>{let{viewer:a}=e,n=useOptimisticChatArgs(),t=(0,e_.Z)();return((0,ev.Rz)(),(0,K.fs)(a),n&&t)?(0,r.jsx)(OptimisticChatPageColumnLoader,{...n,preloadOnly:!1}):(0,r.jsxs)(eS.M,{pageType:el.Z.landing_page,children:[(0,r.jsxs)(eF.Z,{noMaxWidth:!0,header:(0,r.jsx)(layout_HomePageMainNavbar,{title:"",viewer:a}),children:[(0,r.jsx)(M.Z,{title:""}),(0,r.jsx)(chat_ChatHomeMain,{viewer:a})]}),(0,r.jsx)(o.Suspense,{fallback:null,children:(0,r.jsx)(OptimisticChatPageColumnLoader,{preloadOnly:!0})})]})},{query:n(7439),variables:{}},{loggedInOnly:!0});var ew=eC},18802:function(e,a){"use strict";var n,t;(t=n||(n={})).chat_page="chat_page",t.chat_settings="chat_settings",t.share_modal="share_modal",t.add_member_modal="add_member_modal",t.home_page="home_page",t.user_profile_page="user_profile_page",t.direct_message="direct_message",t.page_surface="page_surface",a.Z=n},67603:function(e){e.exports={botPillWrapper:"BotSelectorHomeMain_botPillWrapper___6pXq",botPillWrapperScroll:"BotSelectorHomeMain_botPillWrapperScroll__9hLfI",allBotsButtonContent:"BotSelectorHomeMain_allBotsButtonContent__9xD6_",botPillWrapperShadow:"BotSelectorHomeMain_botPillWrapperShadow__6EckD"}},15901:function(e){e.exports={dropTarget:"ChatDragDropTarget_dropTarget__1WrAL",isInsideRelativeContainer:"ChatDragDropTarget_isInsideRelativeContainer__7KI58"}},81739:function(e){e.exports={container:"ChatHomeMain_container__l4uRf",centered:"ChatHomeMain_centered__SoOYo",centeredWide:"ChatHomeMain_centeredWide__Bt1jJ",logo:"ChatHomeMain_logo__OZxiw",inputContainer:"ChatHomeMain_inputContainer__9mgRh",exploreBotsCarousel:"ChatHomeMain_exploreBotsCarousel__wddju",warningBannerHolder:"ChatHomeMain_warningBannerHolder__N8rjs",invalidMentionedBotWarning:"ChatHomeMain_invalidMentionedBotWarning__5GTGE",warningBannerHolderMWeb:"ChatHomeMain_warningBannerHolderMWeb__idL8s",logoWrapper:"ChatHomeMain_logoWrapper__3Vhf6",actionButtonsContainer:"ChatHomeMain_actionButtonsContainer__zKqdC"}},41248:function(e){e.exports={input:"ChatMessageFileInputButton_input__svNx4"}},96522:function(e){e.exports={"compact-only":"only screen and (max-width : 684px)",container:"ChatMessageInputAttachments_container__AAxGu",attachment:"ChatMessageInputAttachments_attachment__ZTrHT"}},48556:function(e){e.exports={"compact-only":"only screen and (max-width : 684px)",inputContainer:"ChatMessageInputContainer_inputContainer__s2AGa",actionContainerBase:"ChatMessageInputContainer_actionContainerBase__8BKrX",actionContainerLeft:"ChatMessageInputContainer_actionContainerLeft__dIwkm ChatMessageInputContainer_actionContainerBase__8BKrX",actionContainerRight:"ChatMessageInputContainer_actionContainerRight__fyfsX ChatMessageInputContainer_actionContainerBase__8BKrX",breakSeparator:"ChatMessageInputContainer_breakSeparator__6WnHy",textArea:"ChatMessageInputContainer_textArea__fNi6E"}},6269:function(e){e.exports={container:"ChatMessageVoiceInputButton_container__B5Uev",button:"ChatMessageVoiceInputButton_button__NjXno",pulse:"ChatMessageVoiceInputButton_pulse__5F2SB",fadeInUpAndOut:"ChatMessageVoiceInputButton_fadeInUpAndOut__NP3s1"}},59562:function(e){e.exports={navbar:"HomePageMainNavbar_navbar__VoEbp"}},11300:function(e){e.exports={scrollSection:"MainColumn_scrollSection__A9NHB",scrollSectionOverflow:"MainColumn_scrollSectionOverflow__FbPqw",column:"MainColumn_column__UEunw",noMaxWidth:"MainColumn_noMaxWidth__8pWAi",disallowScroll:"MainColumn_disallowScroll__zR9H2",startAtBottom:"MainColumn_startAtBottom__KeM8B"}},96265:function(e){e.exports={growWrap:"GrowingTextArea_growWrap__im5W3",textArea:"GrowingTextArea_textArea__ZWQbP",hidden:"GrowingTextArea_hidden__xLW0K"}},8828:function(e){e.exports={banner:"WarningBanner_banner__otlmq",iconContainer:"WarningBanner_iconContainer__YW6xV"}},63366:function(e){e.exports={textEditorContainer:"ChatInputRichTextEditor_textEditorContainer__e0wnU",textEditor:"ChatInputRichTextEditor_textEditor__wPXZH",placeholder:"ChatInputRichTextEditor_placeholder__wgit0"}}},function(e){e.O(0,[6342,9692,2816,5675,1476,3967,1191,8062,2071,2460,486,9142,4549,6384,1054,1366,4374,4144,379,9774,2888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);